var W=Object.defineProperty;var H=(t,e,n)=>e in t?W(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var P=(t,e,n)=>(H(t,typeof e!="symbol"?e+"":e,n),n),j=(t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)};var B=(t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)};var L=(t,e,n)=>(j(t,e,"access private method"),n);var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function getAugmentedNamespace(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var shams=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},n=Symbol("test"),r=Object(n);if(typeof n=="string"||Object.prototype.toString.call(n)!=="[object Symbol]"||Object.prototype.toString.call(r)!=="[object Symbol]")return!1;var s=42;e[n]=s;for(n in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var o=Object.getOwnPropertySymbols(e);if(o.length!==1||o[0]!==n||!Object.prototype.propertyIsEnumerable.call(e,n))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var a=Object.getOwnPropertyDescriptor(e,n);if(a.value!==s||a.enumerable!==!0)return!1}return!0},origSymbol=typeof Symbol<"u"&&Symbol,hasSymbolSham=shams,hasSymbols$1=function(){return typeof origSymbol!="function"||typeof Symbol!="function"||typeof origSymbol("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:hasSymbolSham()},test={foo:{}},$Object=Object,hasProto$1=function(){return{__proto__:test}.foo===test.foo&&!({__proto__:null}instanceof $Object)},ERROR_MESSAGE="Function.prototype.bind called on incompatible ",toStr$1=Object.prototype.toString,max$1=Math.max,funcType="[object Function]",concatty=function(e,n){for(var r=[],s=0;s<e.length;s+=1)r[s]=e[s];for(var o=0;o<n.length;o+=1)r[o+e.length]=n[o];return r},slicy=function(e,n){for(var r=[],s=n||0,o=0;s<e.length;s+=1,o+=1)r[o]=e[s];return r},joiny=function(t,e){for(var n="",r=0;r<t.length;r+=1)n+=t[r],r+1<t.length&&(n+=e);return n},implementation$1=function(e){var n=this;if(typeof n!="function"||toStr$1.apply(n)!==funcType)throw new TypeError(ERROR_MESSAGE+n);for(var r=slicy(arguments,1),s,o=function(){if(this instanceof s){var f=n.apply(this,concatty(r,arguments));return Object(f)===f?f:this}return n.apply(e,concatty(r,arguments))},a=max$1(0,n.length-r.length),l=[],c=0;c<a;c++)l[c]="$"+c;if(s=Function("binder","return function ("+joiny(l,",")+"){ return binder.apply(this,arguments); }")(o),n.prototype){var u=function(){};u.prototype=n.prototype,s.prototype=new u,u.prototype=null}return s},implementation=implementation$1,functionBind=Function.prototype.bind||implementation,hasOwnProperty$1={}.hasOwnProperty,call=Function.prototype.call,src=call.bind?call.bind(hasOwnProperty$1):function(t,e){return call.call(hasOwnProperty$1,t,e)},undefined$1,$SyntaxError$1=SyntaxError,$Function=Function,$TypeError$3=TypeError,getEvalledConstructor=function(t){try{return $Function('"use strict"; return ('+t+").constructor;")()}catch{}},$gOPD$1=Object.getOwnPropertyDescriptor;if($gOPD$1)try{$gOPD$1({},"")}catch{$gOPD$1=null}var throwTypeError=function(){throw new $TypeError$3},ThrowTypeError=$gOPD$1?function(){try{return arguments.callee,throwTypeError}catch{try{return $gOPD$1(arguments,"callee").get}catch{return throwTypeError}}}():throwTypeError,hasSymbols=hasSymbols$1(),hasProto=hasProto$1(),getProto=Object.getPrototypeOf||(hasProto?function(t){return t.__proto__}:null),needsEval={},TypedArray=typeof Uint8Array>"u"||!getProto?undefined$1:getProto(Uint8Array),INTRINSICS={"%AggregateError%":typeof AggregateError>"u"?undefined$1:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?undefined$1:ArrayBuffer,"%ArrayIteratorPrototype%":hasSymbols&&getProto?getProto([][Symbol.iterator]()):undefined$1,"%AsyncFromSyncIteratorPrototype%":undefined$1,"%AsyncFunction%":needsEval,"%AsyncGenerator%":needsEval,"%AsyncGeneratorFunction%":needsEval,"%AsyncIteratorPrototype%":needsEval,"%Atomics%":typeof Atomics>"u"?undefined$1:Atomics,"%BigInt%":typeof BigInt>"u"?undefined$1:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?undefined$1:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?undefined$1:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?undefined$1:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?undefined$1:Float32Array,"%Float64Array%":typeof Float64Array>"u"?undefined$1:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?undefined$1:FinalizationRegistry,"%Function%":$Function,"%GeneratorFunction%":needsEval,"%Int8Array%":typeof Int8Array>"u"?undefined$1:Int8Array,"%Int16Array%":typeof Int16Array>"u"?undefined$1:Int16Array,"%Int32Array%":typeof Int32Array>"u"?undefined$1:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":hasSymbols&&getProto?getProto(getProto([][Symbol.iterator]())):undefined$1,"%JSON%":typeof JSON=="object"?JSON:undefined$1,"%Map%":typeof Map>"u"?undefined$1:Map,"%MapIteratorPrototype%":typeof Map>"u"||!hasSymbols||!getProto?undefined$1:getProto(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?undefined$1:Promise,"%Proxy%":typeof Proxy>"u"?undefined$1:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?undefined$1:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?undefined$1:Set,"%SetIteratorPrototype%":typeof Set>"u"||!hasSymbols||!getProto?undefined$1:getProto(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?undefined$1:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":hasSymbols&&getProto?getProto(""[Symbol.iterator]()):undefined$1,"%Symbol%":hasSymbols?Symbol:undefined$1,"%SyntaxError%":$SyntaxError$1,"%ThrowTypeError%":ThrowTypeError,"%TypedArray%":TypedArray,"%TypeError%":$TypeError$3,"%Uint8Array%":typeof Uint8Array>"u"?undefined$1:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?undefined$1:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?undefined$1:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?undefined$1:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?undefined$1:WeakMap,"%WeakRef%":typeof WeakRef>"u"?undefined$1:WeakRef,"%WeakSet%":typeof WeakSet>"u"?undefined$1:WeakSet};if(getProto)try{null.error}catch(t){var errorProto=getProto(getProto(t));INTRINSICS["%Error.prototype%"]=errorProto}var doEval=function t(e){var n;if(e==="%AsyncFunction%")n=getEvalledConstructor("async function () {}");else if(e==="%GeneratorFunction%")n=getEvalledConstructor("function* () {}");else if(e==="%AsyncGeneratorFunction%")n=getEvalledConstructor("async function* () {}");else if(e==="%AsyncGenerator%"){var r=t("%AsyncGeneratorFunction%");r&&(n=r.prototype)}else if(e==="%AsyncIteratorPrototype%"){var s=t("%AsyncGenerator%");s&&getProto&&(n=getProto(s.prototype))}return INTRINSICS[e]=n,n},LEGACY_ALIASES={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},bind=functionBind,hasOwn$1=src,$concat$1=bind.call(Function.call,Array.prototype.concat),$spliceApply=bind.call(Function.apply,Array.prototype.splice),$replace$1=bind.call(Function.call,String.prototype.replace),$strSlice=bind.call(Function.call,String.prototype.slice),$exec=bind.call(Function.call,RegExp.prototype.exec),rePropName=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,reEscapeChar=/\\(\\)?/g,stringToPath=function(e){var n=$strSlice(e,0,1),r=$strSlice(e,-1);if(n==="%"&&r!=="%")throw new $SyntaxError$1("invalid intrinsic syntax, expected closing `%`");if(r==="%"&&n!=="%")throw new $SyntaxError$1("invalid intrinsic syntax, expected opening `%`");var s=[];return $replace$1(e,rePropName,function(o,a,l,c){s[s.length]=l?$replace$1(c,reEscapeChar,"$1"):a||o}),s},getBaseIntrinsic=function(e,n){var r=e,s;if(hasOwn$1(LEGACY_ALIASES,r)&&(s=LEGACY_ALIASES[r],r="%"+s[0]+"%"),hasOwn$1(INTRINSICS,r)){var o=INTRINSICS[r];if(o===needsEval&&(o=doEval(r)),typeof o>"u"&&!n)throw new $TypeError$3("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:s,name:r,value:o}}throw new $SyntaxError$1("intrinsic "+e+" does not exist!")},getIntrinsic=function(e,n){if(typeof e!="string"||e.length===0)throw new $TypeError$3("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof n!="boolean")throw new $TypeError$3('"allowMissing" argument must be a boolean');if($exec(/^%?[^%]*%?$/,e)===null)throw new $SyntaxError$1("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var r=stringToPath(e),s=r.length>0?r[0]:"",o=getBaseIntrinsic("%"+s+"%",n),a=o.name,l=o.value,c=!1,u=o.alias;u&&(s=u[0],$spliceApply(r,$concat$1([0,1],u)));for(var f=1,p=!0;f<r.length;f+=1){var d=r[f],h=$strSlice(d,0,1),g=$strSlice(d,-1);if((h==='"'||h==="'"||h==="`"||g==='"'||g==="'"||g==="`")&&h!==g)throw new $SyntaxError$1("property names with quotes must have matching quotes");if((d==="constructor"||!p)&&(c=!0),s+="."+d,a="%"+s+"%",hasOwn$1(INTRINSICS,a))l=INTRINSICS[a];else if(l!=null){if(!(d in l)){if(!n)throw new $TypeError$3("base intrinsic for "+e+" exists, but the property is not available.");return}if($gOPD$1&&f+1>=r.length){var v=$gOPD$1(l,d);p=!!v,p&&"get"in v&&!("originalValue"in v.get)?l=v.get:l=l[d]}else p=hasOwn$1(l,d),l=l[d];p&&!c&&(INTRINSICS[a]=l)}}return l},callBind$1={exports:{}},GetIntrinsic$5=getIntrinsic,$defineProperty$1=GetIntrinsic$5("%Object.defineProperty%",!0),hasPropertyDescriptors$1=function(){if($defineProperty$1)try{return $defineProperty$1({},"a",{value:1}),!0}catch{return!1}return!1};hasPropertyDescriptors$1.hasArrayLengthDefineBug=function(){if(!hasPropertyDescriptors$1())return null;try{return $defineProperty$1([],"length",{value:1}).length!==1}catch{return!0}};var hasPropertyDescriptors_1=hasPropertyDescriptors$1,GetIntrinsic$4=getIntrinsic,$gOPD=GetIntrinsic$4("%Object.getOwnPropertyDescriptor%",!0);if($gOPD)try{$gOPD([],"length")}catch{$gOPD=null}var gopd$1=$gOPD,hasPropertyDescriptors=hasPropertyDescriptors_1(),GetIntrinsic$3=getIntrinsic,$defineProperty=hasPropertyDescriptors&&GetIntrinsic$3("%Object.defineProperty%",!0);if($defineProperty)try{$defineProperty({},"a",{value:1})}catch{$defineProperty=!1}var $SyntaxError=GetIntrinsic$3("%SyntaxError%"),$TypeError$2=GetIntrinsic$3("%TypeError%"),gopd=gopd$1,defineDataProperty=function(e,n,r){if(!e||typeof e!="object"&&typeof e!="function")throw new $TypeError$2("`obj` must be an object or a function`");if(typeof n!="string"&&typeof n!="symbol")throw new $TypeError$2("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new $TypeError$2("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new $TypeError$2("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new $TypeError$2("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new $TypeError$2("`loose`, if provided, must be a boolean");var s=arguments.length>3?arguments[3]:null,o=arguments.length>4?arguments[4]:null,a=arguments.length>5?arguments[5]:null,l=arguments.length>6?arguments[6]:!1,c=!!gopd&&gopd(e,n);if($defineProperty)$defineProperty(e,n,{configurable:a===null&&c?c.configurable:!a,enumerable:s===null&&c?c.enumerable:!s,value:r,writable:o===null&&c?c.writable:!o});else if(l||!s&&!o&&!a)e[n]=r;else throw new $SyntaxError("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},GetIntrinsic$2=getIntrinsic,define=defineDataProperty,hasDescriptors=hasPropertyDescriptors_1(),gOPD=gopd$1,$TypeError$1=GetIntrinsic$2("%TypeError%"),$floor$1=GetIntrinsic$2("%Math.floor%"),setFunctionLength=function(e,n){if(typeof e!="function")throw new $TypeError$1("`fn` is not a function");if(typeof n!="number"||n<0||n>4294967295||$floor$1(n)!==n)throw new $TypeError$1("`length` must be a positive 32-bit integer");var r=arguments.length>2&&!!arguments[2],s=!0,o=!0;if("length"in e&&gOPD){var a=gOPD(e,"length");a&&!a.configurable&&(s=!1),a&&!a.writable&&(o=!1)}return(s||o||!r)&&(hasDescriptors?define(e,"length",n,!0,!0):define(e,"length",n)),e};(function(t){var e=functionBind,n=getIntrinsic,r=setFunctionLength,s=n("%TypeError%"),o=n("%Function.prototype.apply%"),a=n("%Function.prototype.call%"),l=n("%Reflect.apply%",!0)||e.call(a,o),c=n("%Object.defineProperty%",!0),u=n("%Math.max%");if(c)try{c({},"a",{value:1})}catch{c=null}t.exports=function(d){if(typeof d!="function")throw new s("a function is required");var h=l(e,a,arguments);return r(h,1+u(0,d.length-(arguments.length-1)),!0)};var f=function(){return l(e,o,arguments)};c?c(t.exports,"apply",{value:f}):t.exports.apply=f})(callBind$1);var callBindExports=callBind$1.exports,GetIntrinsic$1=getIntrinsic,callBind=callBindExports,$indexOf=callBind(GetIntrinsic$1("String.prototype.indexOf")),callBound$1=function(e,n){var r=GetIntrinsic$1(e,!!n);return typeof r=="function"&&$indexOf(e,".prototype.")>-1?callBind(r):r};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$0=getAugmentedNamespace(__viteBrowserExternal$1);var hasMap=typeof Map=="function"&&Map.prototype,mapSizeDescriptor=Object.getOwnPropertyDescriptor&&hasMap?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,mapSize=hasMap&&mapSizeDescriptor&&typeof mapSizeDescriptor.get=="function"?mapSizeDescriptor.get:null,mapForEach=hasMap&&Map.prototype.forEach,hasSet=typeof Set=="function"&&Set.prototype,setSizeDescriptor=Object.getOwnPropertyDescriptor&&hasSet?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,setSize=hasSet&&setSizeDescriptor&&typeof setSizeDescriptor.get=="function"?setSizeDescriptor.get:null,setForEach=hasSet&&Set.prototype.forEach,hasWeakMap=typeof WeakMap=="function"&&WeakMap.prototype,weakMapHas=hasWeakMap?WeakMap.prototype.has:null,hasWeakSet=typeof WeakSet=="function"&&WeakSet.prototype,weakSetHas=hasWeakSet?WeakSet.prototype.has:null,hasWeakRef=typeof WeakRef=="function"&&WeakRef.prototype,weakRefDeref=hasWeakRef?WeakRef.prototype.deref:null,booleanValueOf=Boolean.prototype.valueOf,objectToString=Object.prototype.toString,functionToString=Function.prototype.toString,$match=String.prototype.match,$slice=String.prototype.slice,$replace=String.prototype.replace,$toUpperCase=String.prototype.toUpperCase,$toLowerCase=String.prototype.toLowerCase,$test=RegExp.prototype.test,$concat=Array.prototype.concat,$join=Array.prototype.join,$arrSlice=Array.prototype.slice,$floor=Math.floor,bigIntValueOf=typeof BigInt=="function"?BigInt.prototype.valueOf:null,gOPS=Object.getOwnPropertySymbols,symToString=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,hasShammedSymbols=typeof Symbol=="function"&&typeof Symbol.iterator=="object",toStringTag=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===hasShammedSymbols||"symbol")?Symbol.toStringTag:null,isEnumerable=Object.prototype.propertyIsEnumerable,gPO=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(t){return t.__proto__}:null);function addNumericSeparator(t,e){if(t===1/0||t===-1/0||t!==t||t&&t>-1e3&&t<1e3||$test.call(/e/,e))return e;var n=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof t=="number"){var r=t<0?-$floor(-t):$floor(t);if(r!==t){var s=String(r),o=$slice.call(e,s.length+1);return $replace.call(s,n,"$&_")+"."+$replace.call($replace.call(o,/([0-9]{3})/g,"$&_"),/_$/,"")}}return $replace.call(e,n,"$&_")}var utilInspect=require$$0,inspectCustom=utilInspect.custom,inspectSymbol=isSymbol(inspectCustom)?inspectCustom:null,objectInspect=function t(e,n,r,s){var o=n||{};if(has$4(o,"quoteStyle")&&o.quoteStyle!=="single"&&o.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(has$4(o,"maxStringLength")&&(typeof o.maxStringLength=="number"?o.maxStringLength<0&&o.maxStringLength!==1/0:o.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var a=has$4(o,"customInspect")?o.customInspect:!0;if(typeof a!="boolean"&&a!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(has$4(o,"indent")&&o.indent!==null&&o.indent!=="	"&&!(parseInt(o.indent,10)===o.indent&&o.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(has$4(o,"numericSeparator")&&typeof o.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var l=o.numericSeparator;if(typeof e>"u")return"undefined";if(e===null)return"null";if(typeof e=="boolean")return e?"true":"false";if(typeof e=="string")return inspectString(e,o);if(typeof e=="number"){if(e===0)return 1/0/e>0?"0":"-0";var c=String(e);return l?addNumericSeparator(e,c):c}if(typeof e=="bigint"){var u=String(e)+"n";return l?addNumericSeparator(e,u):u}var f=typeof o.depth>"u"?5:o.depth;if(typeof r>"u"&&(r=0),r>=f&&f>0&&typeof e=="object")return isArray$4(e)?"[Array]":"[Object]";var p=getIndent(o,r);if(typeof s>"u")s=[];else if(indexOf$1(s,e)>=0)return"[Circular]";function d(F,R,T){if(R&&(s=$arrSlice.call(s),s.push(R)),T){var D={depth:o.depth};return has$4(o,"quoteStyle")&&(D.quoteStyle=o.quoteStyle),t(F,D,r+1,s)}return t(F,o,r+1,s)}if(typeof e=="function"&&!isRegExp$1(e)){var h=nameOf(e),g=arrObjKeys(e,d);return"[Function"+(h?": "+h:" (anonymous)")+"]"+(g.length>0?" { "+$join.call(g,", ")+" }":"")}if(isSymbol(e)){var v=hasShammedSymbols?$replace.call(String(e),/^(Symbol\(.*\))_[^)]*$/,"$1"):symToString.call(e);return typeof e=="object"&&!hasShammedSymbols?markBoxed(v):v}if(isElement$2(e)){for(var b="<"+$toLowerCase.call(String(e.nodeName)),m=e.attributes||[],y=0;y<m.length;y++)b+=" "+m[y].name+"="+wrapQuotes(quote(m[y].value),"double",o);return b+=">",e.childNodes&&e.childNodes.length&&(b+="..."),b+="</"+$toLowerCase.call(String(e.nodeName))+">",b}if(isArray$4(e)){if(e.length===0)return"[]";var S=arrObjKeys(e,d);return p&&!singleLineValues(S)?"["+indentedJoin(S,p)+"]":"[ "+$join.call(S,", ")+" ]"}if(isError(e)){var w=arrObjKeys(e,d);return!("cause"in Error.prototype)&&"cause"in e&&!isEnumerable.call(e,"cause")?"{ ["+String(e)+"] "+$join.call($concat.call("[cause]: "+d(e.cause),w),", ")+" }":w.length===0?"["+String(e)+"]":"{ ["+String(e)+"] "+$join.call(w,", ")+" }"}if(typeof e=="object"&&a){if(inspectSymbol&&typeof e[inspectSymbol]=="function"&&utilInspect)return utilInspect(e,{depth:f-r});if(a!=="symbol"&&typeof e.inspect=="function")return e.inspect()}if(isMap(e)){var $=[];return mapForEach&&mapForEach.call(e,function(F,R){$.push(d(R,e,!0)+" => "+d(F,e))}),collectionOf("Map",mapSize.call(e),$,p)}if(isSet(e)){var E=[];return setForEach&&setForEach.call(e,function(F){E.push(d(F,e))}),collectionOf("Set",setSize.call(e),E,p)}if(isWeakMap(e))return weakCollectionOf("WeakMap");if(isWeakSet(e))return weakCollectionOf("WeakSet");if(isWeakRef(e))return weakCollectionOf("WeakRef");if(isNumber$1(e))return markBoxed(d(Number(e)));if(isBigInt(e))return markBoxed(d(bigIntValueOf.call(e)));if(isBoolean(e))return markBoxed(booleanValueOf.call(e));if(isString$1(e))return markBoxed(d(String(e)));if(typeof window<"u"&&e===window)return"{ [object Window] }";if(e===commonjsGlobal)return"{ [object globalThis] }";if(!isDate(e)&&!isRegExp$1(e)){var x=arrObjKeys(e,d),C=gPO?gPO(e)===Object.prototype:e instanceof Object||e.constructor===Object,O=e instanceof Object?"":"null prototype",A=!C&&toStringTag&&Object(e)===e&&toStringTag in e?$slice.call(toStr(e),8,-1):O?"Object":"",I=C||typeof e.constructor!="function"?"":e.constructor.name?e.constructor.name+" ":"",k=I+(A||O?"["+$join.call($concat.call([],A||[],O||[]),": ")+"] ":"");return x.length===0?k+"{}":p?k+"{"+indentedJoin(x,p)+"}":k+"{ "+$join.call(x,", ")+" }"}return String(e)};function wrapQuotes(t,e,n){var r=(n.quoteStyle||e)==="double"?'"':"'";return r+t+r}function quote(t){return $replace.call(String(t),/"/g,"&quot;")}function isArray$4(t){return toStr(t)==="[object Array]"&&(!toStringTag||!(typeof t=="object"&&toStringTag in t))}function isDate(t){return toStr(t)==="[object Date]"&&(!toStringTag||!(typeof t=="object"&&toStringTag in t))}function isRegExp$1(t){return toStr(t)==="[object RegExp]"&&(!toStringTag||!(typeof t=="object"&&toStringTag in t))}function isError(t){return toStr(t)==="[object Error]"&&(!toStringTag||!(typeof t=="object"&&toStringTag in t))}function isString$1(t){return toStr(t)==="[object String]"&&(!toStringTag||!(typeof t=="object"&&toStringTag in t))}function isNumber$1(t){return toStr(t)==="[object Number]"&&(!toStringTag||!(typeof t=="object"&&toStringTag in t))}function isBoolean(t){return toStr(t)==="[object Boolean]"&&(!toStringTag||!(typeof t=="object"&&toStringTag in t))}function isSymbol(t){if(hasShammedSymbols)return t&&typeof t=="object"&&t instanceof Symbol;if(typeof t=="symbol")return!0;if(!t||typeof t!="object"||!symToString)return!1;try{return symToString.call(t),!0}catch{}return!1}function isBigInt(t){if(!t||typeof t!="object"||!bigIntValueOf)return!1;try{return bigIntValueOf.call(t),!0}catch{}return!1}var hasOwn=Object.prototype.hasOwnProperty||function(t){return t in this};function has$4(t,e){return hasOwn.call(t,e)}function toStr(t){return objectToString.call(t)}function nameOf(t){if(t.name)return t.name;var e=$match.call(functionToString.call(t),/^function\s*([\w$]+)/);return e?e[1]:null}function indexOf$1(t,e){if(t.indexOf)return t.indexOf(e);for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1}function isMap(t){if(!mapSize||!t||typeof t!="object")return!1;try{mapSize.call(t);try{setSize.call(t)}catch{return!0}return t instanceof Map}catch{}return!1}function isWeakMap(t){if(!weakMapHas||!t||typeof t!="object")return!1;try{weakMapHas.call(t,weakMapHas);try{weakSetHas.call(t,weakSetHas)}catch{return!0}return t instanceof WeakMap}catch{}return!1}function isWeakRef(t){if(!weakRefDeref||!t||typeof t!="object")return!1;try{return weakRefDeref.call(t),!0}catch{}return!1}function isSet(t){if(!setSize||!t||typeof t!="object")return!1;try{setSize.call(t);try{mapSize.call(t)}catch{return!0}return t instanceof Set}catch{}return!1}function isWeakSet(t){if(!weakSetHas||!t||typeof t!="object")return!1;try{weakSetHas.call(t,weakSetHas);try{weakMapHas.call(t,weakMapHas)}catch{return!0}return t instanceof WeakSet}catch{}return!1}function isElement$2(t){return!t||typeof t!="object"?!1:typeof HTMLElement<"u"&&t instanceof HTMLElement?!0:typeof t.nodeName=="string"&&typeof t.getAttribute=="function"}function inspectString(t,e){if(t.length>e.maxStringLength){var n=t.length-e.maxStringLength,r="... "+n+" more character"+(n>1?"s":"");return inspectString($slice.call(t,0,e.maxStringLength),e)+r}var s=$replace.call($replace.call(t,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,lowbyte);return wrapQuotes(s,"single",e)}function lowbyte(t){var e=t.charCodeAt(0),n={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return n?"\\"+n:"\\x"+(e<16?"0":"")+$toUpperCase.call(e.toString(16))}function markBoxed(t){return"Object("+t+")"}function weakCollectionOf(t){return t+" { ? }"}function collectionOf(t,e,n,r){var s=r?indentedJoin(n,r):$join.call(n,", ");return t+" ("+e+") {"+s+"}"}function singleLineValues(t){for(var e=0;e<t.length;e++)if(indexOf$1(t[e],`
`)>=0)return!1;return!0}function getIndent(t,e){var n;if(t.indent==="	")n="	";else if(typeof t.indent=="number"&&t.indent>0)n=$join.call(Array(t.indent+1)," ");else return null;return{base:n,prev:$join.call(Array(e+1),n)}}function indentedJoin(t,e){if(t.length===0)return"";var n=`
`+e.prev+e.base;return n+$join.call(t,","+n)+`
`+e.prev}function arrObjKeys(t,e){var n=isArray$4(t),r=[];if(n){r.length=t.length;for(var s=0;s<t.length;s++)r[s]=has$4(t,s)?e(t[s],t):""}var o=typeof gOPS=="function"?gOPS(t):[],a;if(hasShammedSymbols){a={};for(var l=0;l<o.length;l++)a["$"+o[l]]=o[l]}for(var c in t)has$4(t,c)&&(n&&String(Number(c))===c&&c<t.length||hasShammedSymbols&&a["$"+c]instanceof Symbol||($test.call(/[^\w$]/,c)?r.push(e(c,t)+": "+e(t[c],t)):r.push(c+": "+e(t[c],t))));if(typeof gOPS=="function")for(var u=0;u<o.length;u++)isEnumerable.call(t,o[u])&&r.push("["+e(o[u])+"]: "+e(t[o[u]],t));return r}var GetIntrinsic=getIntrinsic,callBound=callBound$1,inspect=objectInspect,$TypeError=GetIntrinsic("%TypeError%"),$WeakMap=GetIntrinsic("%WeakMap%",!0),$Map=GetIntrinsic("%Map%",!0),$weakMapGet=callBound("WeakMap.prototype.get",!0),$weakMapSet=callBound("WeakMap.prototype.set",!0),$weakMapHas=callBound("WeakMap.prototype.has",!0),$mapGet=callBound("Map.prototype.get",!0),$mapSet=callBound("Map.prototype.set",!0),$mapHas=callBound("Map.prototype.has",!0),listGetNode=function(t,e){for(var n=t,r;(r=n.next)!==null;n=r)if(r.key===e)return n.next=r.next,r.next=t.next,t.next=r,r},listGet=function(t,e){var n=listGetNode(t,e);return n&&n.value},listSet=function(t,e,n){var r=listGetNode(t,e);r?r.value=n:t.next={key:e,next:t.next,value:n}},listHas=function(t,e){return!!listGetNode(t,e)},sideChannel=function(){var e,n,r,s={assert:function(o){if(!s.has(o))throw new $TypeError("Side channel does not contain "+inspect(o))},get:function(o){if($WeakMap&&o&&(typeof o=="object"||typeof o=="function")){if(e)return $weakMapGet(e,o)}else if($Map){if(n)return $mapGet(n,o)}else if(r)return listGet(r,o)},has:function(o){if($WeakMap&&o&&(typeof o=="object"||typeof o=="function")){if(e)return $weakMapHas(e,o)}else if($Map){if(n)return $mapHas(n,o)}else if(r)return listHas(r,o);return!1},set:function(o,a){$WeakMap&&o&&(typeof o=="object"||typeof o=="function")?(e||(e=new $WeakMap),$weakMapSet(e,o,a)):$Map?(n||(n=new $Map),$mapSet(n,o,a)):(r||(r={key:{},next:null}),listSet(r,o,a))}};return s},replace=String.prototype.replace,percentTwenties=/%20/g,Format={RFC1738:"RFC1738",RFC3986:"RFC3986"},formats$3={default:Format.RFC3986,formatters:{RFC1738:function(t){return replace.call(t,percentTwenties,"+")},RFC3986:function(t){return String(t)}},RFC1738:Format.RFC1738,RFC3986:Format.RFC3986},formats$2=formats$3,has$3=Object.prototype.hasOwnProperty,isArray$3=Array.isArray,hexTable=function(){for(var t=[],e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t}(),compactQueue=function(e){for(;e.length>1;){var n=e.pop(),r=n.obj[n.prop];if(isArray$3(r)){for(var s=[],o=0;o<r.length;++o)typeof r[o]<"u"&&s.push(r[o]);n.obj[n.prop]=s}}},arrayToObject=function(e,n){for(var r=n&&n.plainObjects?Object.create(null):{},s=0;s<e.length;++s)typeof e[s]<"u"&&(r[s]=e[s]);return r},merge=function t(e,n,r){if(!n)return e;if(typeof n!="object"){if(isArray$3(e))e.push(n);else if(e&&typeof e=="object")(r&&(r.plainObjects||r.allowPrototypes)||!has$3.call(Object.prototype,n))&&(e[n]=!0);else return[e,n];return e}if(!e||typeof e!="object")return[e].concat(n);var s=e;return isArray$3(e)&&!isArray$3(n)&&(s=arrayToObject(e,r)),isArray$3(e)&&isArray$3(n)?(n.forEach(function(o,a){if(has$3.call(e,a)){var l=e[a];l&&typeof l=="object"&&o&&typeof o=="object"?e[a]=t(l,o,r):e.push(o)}else e[a]=o}),e):Object.keys(n).reduce(function(o,a){var l=n[a];return has$3.call(o,a)?o[a]=t(o[a],l,r):o[a]=l,o},s)},assign=function(e,n){return Object.keys(n).reduce(function(r,s){return r[s]=n[s],r},e)},decode=function(t,e,n){var r=t.replace(/\+/g," ");if(n==="iso-8859-1")return r.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(r)}catch{return r}},encode=function(e,n,r,s,o){if(e.length===0)return e;var a=e;if(typeof e=="symbol"?a=Symbol.prototype.toString.call(e):typeof e!="string"&&(a=String(e)),r==="iso-8859-1")return escape(a).replace(/%u[0-9a-f]{4}/gi,function(f){return"%26%23"+parseInt(f.slice(2),16)+"%3B"});for(var l="",c=0;c<a.length;++c){var u=a.charCodeAt(c);if(u===45||u===46||u===95||u===126||u>=48&&u<=57||u>=65&&u<=90||u>=97&&u<=122||o===formats$2.RFC1738&&(u===40||u===41)){l+=a.charAt(c);continue}if(u<128){l=l+hexTable[u];continue}if(u<2048){l=l+(hexTable[192|u>>6]+hexTable[128|u&63]);continue}if(u<55296||u>=57344){l=l+(hexTable[224|u>>12]+hexTable[128|u>>6&63]+hexTable[128|u&63]);continue}c+=1,u=65536+((u&1023)<<10|a.charCodeAt(c)&1023),l+=hexTable[240|u>>18]+hexTable[128|u>>12&63]+hexTable[128|u>>6&63]+hexTable[128|u&63]}return l},compact=function(e){for(var n=[{obj:{o:e},prop:"o"}],r=[],s=0;s<n.length;++s)for(var o=n[s],a=o.obj[o.prop],l=Object.keys(a),c=0;c<l.length;++c){var u=l[c],f=a[u];typeof f=="object"&&f!==null&&r.indexOf(f)===-1&&(n.push({obj:a,prop:u}),r.push(f))}return compactQueue(n),e},isRegExp=function(e){return Object.prototype.toString.call(e)==="[object RegExp]"},isBuffer=function(e){return!e||typeof e!="object"?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},combine=function(e,n){return[].concat(e,n)},maybeMap=function(e,n){if(isArray$3(e)){for(var r=[],s=0;s<e.length;s+=1)r.push(n(e[s]));return r}return n(e)},utils$2={arrayToObject,assign,combine,compact,decode,encode,isBuffer,isRegExp,maybeMap,merge},getSideChannel=sideChannel,utils$1=utils$2,formats$1=formats$3,has$2=Object.prototype.hasOwnProperty,arrayPrefixGenerators={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,n){return e+"["+n+"]"},repeat:function(e){return e}},isArray$2=Array.isArray,push$1=Array.prototype.push,pushToArray=function(t,e){push$1.apply(t,isArray$2(e)?e:[e])},toISO=Date.prototype.toISOString,defaultFormat=formats$1.default,defaults$2={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:utils$1.encode,encodeValuesOnly:!1,format:defaultFormat,formatter:formats$1.formatters[defaultFormat],indices:!1,serializeDate:function(e){return toISO.call(e)},skipNulls:!1,strictNullHandling:!1},isNonNullishPrimitive=function(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e=="symbol"||typeof e=="bigint"},sentinel={},stringify$1=function t(e,n,r,s,o,a,l,c,u,f,p,d,h,g,v,b){for(var m=e,y=b,S=0,w=!1;(y=y.get(sentinel))!==void 0&&!w;){var $=y.get(e);if(S+=1,typeof $<"u"){if($===S)throw new RangeError("Cyclic object value");w=!0}typeof y.get(sentinel)>"u"&&(S=0)}if(typeof c=="function"?m=c(n,m):m instanceof Date?m=p(m):r==="comma"&&isArray$2(m)&&(m=utils$1.maybeMap(m,function(D){return D instanceof Date?p(D):D})),m===null){if(o)return l&&!g?l(n,defaults$2.encoder,v,"key",d):n;m=""}if(isNonNullishPrimitive(m)||utils$1.isBuffer(m)){if(l){var E=g?n:l(n,defaults$2.encoder,v,"key",d);return[h(E)+"="+h(l(m,defaults$2.encoder,v,"value",d))]}return[h(n)+"="+h(String(m))]}var x=[];if(typeof m>"u")return x;var C;if(r==="comma"&&isArray$2(m))g&&l&&(m=utils$1.maybeMap(m,l)),C=[{value:m.length>0?m.join(",")||null:void 0}];else if(isArray$2(c))C=c;else{var O=Object.keys(m);C=u?O.sort(u):O}for(var A=s&&isArray$2(m)&&m.length===1?n+"[]":n,I=0;I<C.length;++I){var k=C[I],F=typeof k=="object"&&typeof k.value<"u"?k.value:m[k];if(!(a&&F===null)){var R=isArray$2(m)?typeof r=="function"?r(A,k):A:A+(f?"."+k:"["+k+"]");b.set(e,S);var T=getSideChannel();T.set(sentinel,b),pushToArray(x,t(F,R,r,s,o,a,r==="comma"&&g&&isArray$2(m)?null:l,c,u,f,p,d,h,g,v,T))}}return x},normalizeStringifyOptions=function(e){if(!e)return defaults$2;if(e.encoder!==null&&typeof e.encoder<"u"&&typeof e.encoder!="function")throw new TypeError("Encoder has to be a function.");var n=e.charset||defaults$2.charset;if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var r=formats$1.default;if(typeof e.format<"u"){if(!has$2.call(formats$1.formatters,e.format))throw new TypeError("Unknown format option provided.");r=e.format}var s=formats$1.formatters[r],o=defaults$2.filter;return(typeof e.filter=="function"||isArray$2(e.filter))&&(o=e.filter),{addQueryPrefix:typeof e.addQueryPrefix=="boolean"?e.addQueryPrefix:defaults$2.addQueryPrefix,allowDots:typeof e.allowDots>"u"?defaults$2.allowDots:!!e.allowDots,charset:n,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:defaults$2.charsetSentinel,delimiter:typeof e.delimiter>"u"?defaults$2.delimiter:e.delimiter,encode:typeof e.encode=="boolean"?e.encode:defaults$2.encode,encoder:typeof e.encoder=="function"?e.encoder:defaults$2.encoder,encodeValuesOnly:typeof e.encodeValuesOnly=="boolean"?e.encodeValuesOnly:defaults$2.encodeValuesOnly,filter:o,format:r,formatter:s,serializeDate:typeof e.serializeDate=="function"?e.serializeDate:defaults$2.serializeDate,skipNulls:typeof e.skipNulls=="boolean"?e.skipNulls:defaults$2.skipNulls,sort:typeof e.sort=="function"?e.sort:null,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:defaults$2.strictNullHandling}},stringify_1=function(t,e){var n=t,r=normalizeStringifyOptions(e),s,o;typeof r.filter=="function"?(o=r.filter,n=o("",n)):isArray$2(r.filter)&&(o=r.filter,s=o);var a=[];if(typeof n!="object"||n===null)return"";var l;e&&e.arrayFormat in arrayPrefixGenerators?l=e.arrayFormat:e&&"indices"in e?l=e.indices?"indices":"repeat":l="indices";var c=arrayPrefixGenerators[l];if(e&&"commaRoundTrip"in e&&typeof e.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var u=c==="comma"&&e&&e.commaRoundTrip;s||(s=Object.keys(n)),r.sort&&s.sort(r.sort);for(var f=getSideChannel(),p=0;p<s.length;++p){var d=s[p];r.skipNulls&&n[d]===null||pushToArray(a,stringify$1(n[d],d,c,u,r.strictNullHandling,r.skipNulls,r.encode?r.encoder:null,r.filter,r.sort,r.allowDots,r.serializeDate,r.format,r.formatter,r.encodeValuesOnly,r.charset,f))}var h=a.join(r.delimiter),g=r.addQueryPrefix===!0?"?":"";return r.charsetSentinel&&(r.charset==="iso-8859-1"?g+="utf8=%26%2310003%3B&":g+="utf8=%E2%9C%93&"),h.length>0?g+h:""},utils=utils$2,has$1=Object.prototype.hasOwnProperty,isArray$1=Array.isArray,defaults$1={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:utils.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},interpretNumericEntities=function(t){return t.replace(/&#(\d+);/g,function(e,n){return String.fromCharCode(parseInt(n,10))})},parseArrayValue=function(t,e){return t&&typeof t=="string"&&e.comma&&t.indexOf(",")>-1?t.split(","):t},isoSentinel="utf8=%26%2310003%3B",charsetSentinel="utf8=%E2%9C%93",parseValues=function(e,n){var r={__proto__:null},s=n.ignoreQueryPrefix?e.replace(/^\?/,""):e,o=n.parameterLimit===1/0?void 0:n.parameterLimit,a=s.split(n.delimiter,o),l=-1,c,u=n.charset;if(n.charsetSentinel)for(c=0;c<a.length;++c)a[c].indexOf("utf8=")===0&&(a[c]===charsetSentinel?u="utf-8":a[c]===isoSentinel&&(u="iso-8859-1"),l=c,c=a.length);for(c=0;c<a.length;++c)if(c!==l){var f=a[c],p=f.indexOf("]="),d=p===-1?f.indexOf("="):p+1,h,g;d===-1?(h=n.decoder(f,defaults$1.decoder,u,"key"),g=n.strictNullHandling?null:""):(h=n.decoder(f.slice(0,d),defaults$1.decoder,u,"key"),g=utils.maybeMap(parseArrayValue(f.slice(d+1),n),function(v){return n.decoder(v,defaults$1.decoder,u,"value")})),g&&n.interpretNumericEntities&&u==="iso-8859-1"&&(g=interpretNumericEntities(g)),f.indexOf("[]=")>-1&&(g=isArray$1(g)?[g]:g),has$1.call(r,h)?r[h]=utils.combine(r[h],g):r[h]=g}return r},parseObject=function(t,e,n,r){for(var s=r?e:parseArrayValue(e,n),o=t.length-1;o>=0;--o){var a,l=t[o];if(l==="[]"&&n.parseArrays)a=[].concat(s);else{a=n.plainObjects?Object.create(null):{};var c=l.charAt(0)==="["&&l.charAt(l.length-1)==="]"?l.slice(1,-1):l,u=parseInt(c,10);!n.parseArrays&&c===""?a={0:s}:!isNaN(u)&&l!==c&&String(u)===c&&u>=0&&n.parseArrays&&u<=n.arrayLimit?(a=[],a[u]=s):c!=="__proto__"&&(a[c]=s)}s=a}return s},parseKeys=function(e,n,r,s){if(e){var o=r.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,a=/(\[[^[\]]*])/,l=/(\[[^[\]]*])/g,c=r.depth>0&&a.exec(o),u=c?o.slice(0,c.index):o,f=[];if(u){if(!r.plainObjects&&has$1.call(Object.prototype,u)&&!r.allowPrototypes)return;f.push(u)}for(var p=0;r.depth>0&&(c=l.exec(o))!==null&&p<r.depth;){if(p+=1,!r.plainObjects&&has$1.call(Object.prototype,c[1].slice(1,-1))&&!r.allowPrototypes)return;f.push(c[1])}return c&&f.push("["+o.slice(c.index)+"]"),parseObject(f,n,r,s)}},normalizeParseOptions=function(e){if(!e)return defaults$1;if(e.decoder!==null&&e.decoder!==void 0&&typeof e.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var n=typeof e.charset>"u"?defaults$1.charset:e.charset;return{allowDots:typeof e.allowDots>"u"?defaults$1.allowDots:!!e.allowDots,allowPrototypes:typeof e.allowPrototypes=="boolean"?e.allowPrototypes:defaults$1.allowPrototypes,allowSparse:typeof e.allowSparse=="boolean"?e.allowSparse:defaults$1.allowSparse,arrayLimit:typeof e.arrayLimit=="number"?e.arrayLimit:defaults$1.arrayLimit,charset:n,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:defaults$1.charsetSentinel,comma:typeof e.comma=="boolean"?e.comma:defaults$1.comma,decoder:typeof e.decoder=="function"?e.decoder:defaults$1.decoder,delimiter:typeof e.delimiter=="string"||utils.isRegExp(e.delimiter)?e.delimiter:defaults$1.delimiter,depth:typeof e.depth=="number"||e.depth===!1?+e.depth:defaults$1.depth,ignoreQueryPrefix:e.ignoreQueryPrefix===!0,interpretNumericEntities:typeof e.interpretNumericEntities=="boolean"?e.interpretNumericEntities:defaults$1.interpretNumericEntities,parameterLimit:typeof e.parameterLimit=="number"?e.parameterLimit:defaults$1.parameterLimit,parseArrays:e.parseArrays!==!1,plainObjects:typeof e.plainObjects=="boolean"?e.plainObjects:defaults$1.plainObjects,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:defaults$1.strictNullHandling}},parse$1=function(t,e){var n=normalizeParseOptions(e);if(t===""||t===null||typeof t>"u")return n.plainObjects?Object.create(null):{};for(var r=typeof t=="string"?parseValues(t,n):t,s=n.plainObjects?Object.create(null):{},o=Object.keys(r),a=0;a<o.length;++a){var l=o[a],c=parseKeys(l,r[l],n,typeof t=="string");s=utils.merge(s,c,n)}return n.allowSparse===!0?s:utils.compact(s)},stringify=stringify_1,parse=parse$1,formats=formats$3,lib={formats,parse,stringify};const qs=getDefaultExportFromCjs(lib);function normalizeComponent(t,e,n,r,s,o,a,l){var c=typeof t=="function"?t.options:t;e&&(c.render=e,c.staticRenderFns=n,c._compiled=!0),r&&(c.functional=!0),o&&(c._scopeId="data-v-"+o);var u;if(a?(u=function(d){d=d||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,!d&&typeof __VUE_SSR_CONTEXT__<"u"&&(d=__VUE_SSR_CONTEXT__),s&&s.call(this,d),d&&d._registeredComponents&&d._registeredComponents.add(a)},c._ssrRegister=u):s&&(u=l?function(){s.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:s),u)if(c.functional){c._injectStyles=u;var f=c.render;c.render=function(h,g){return u.call(g),f(h,g)}}else{var p=c.beforeCreate;c.beforeCreate=p?[].concat(p,u):[u]}return{exports:t,options:c}}const _sfc_main$l={mixins:[Fieldtype],data(){return{}},inject:{storeName:{default:null}},computed:{componentName(){return this.config.mode==="table"?"relationship-table-mode":"relationship-input"},maxItems(){return this.config.max_items||1/0},columns(){return this.meta.columns},itemComponent(){return this.meta.itemComponent},itemDataUrl(){return this.meta.itemDataUrl+"?"+qs.stringify({config:this.configParameter})},filtersUrl(){return this.meta.filtersUrl+"?"+qs.stringify({config:this.configParameter})},selectionsUrl(){return this.baseSelectionsUrl+"?"+qs.stringify({config:this.configParameter,...this.meta.getBaseSelectionsUrlParameters})},baseSelectionsUrl(){return this.meta.baseSelectionsUrl},configParameter(){return utf8btoa(JSON.stringify(this.config))},site(){return this.storeName?this.$store.state.publish[this.storeName].site:this.$config.get("selectedSite")},canEdit(){return this.meta.canEdit},canCreate(){return this.meta.canCreate},canSearch(){return this.meta.canSearch},canReorder(){return this.maxItems>1&&this.config.reorderable===!0&&this.config.order_column!==void 0},statusIcons(){return this.meta.statusIcons},creatables(){return this.meta.creatables},formComponent(){return this.meta.formComponent},formComponentProps(){return this.meta.formComponentProps},taggable(){return this.meta.taggable},replicatorPreview(){return this.value.map(t=>{const e=_.findWhere(this.meta.data,{id:t});return e?e.title:t})}},methods:{itemDataUpdated(t){const e=clone(this.meta);e.data=t,this.updateMeta(e)},linkExistingItem(){this.$refs.input.$refs.existing.click()}}};var _sfc_render$l=function(){var e=this,n=e._self._c;return n(e.componentName,{ref:"input",tag:"component",attrs:{name:e.name,value:e.value,mode:e.config.mode,"can-edit":e.canEdit,config:e.config,"can-create":e.canCreate,"can-reorder":e.canReorder,site:e.site,data:e.meta?e.meta.data:[],"max-items":e.maxItems,"item-component":e.itemComponent,"item-data-url":e.itemDataUrl,"filters-url":e.filtersUrl,"selections-url":e.selectionsUrl,creatables:e.creatables,"form-component":e.formComponent,"form-component-props":e.formComponentProps,"status-icons":e.statusIcons,columns:e.columns,search:e.canSearch,"read-only":e.isReadOnly,taggable:e.taggable,"action-url":e.meta.actionUrl},on:{focus:function(r){return e.$emit("focus")},blur:function(r){return e.$emit("blur")},input:e.update,"item-data-updated":e.itemDataUpdated}})},_sfc_staticRenderFns$l=[],__component__$l=normalizeComponent(_sfc_main$l,_sfc_render$l,_sfc_staticRenderFns$l,!1,null,null,null,null);const RelationshipFieldtype=__component__$l.exports,_sfc_main$k={props:{component:String,componentProps:Object},data(){return{loading:!0,readOnly:!1,componentPropValues:{}}},computed:{publishContainer(){return`relate-fieldtype-inline-${this._uid}`}},created(){this.getItem()},methods:{getItem(){this.$axios.get(this.itemUrl).then(t=>{for(const e in this.componentProps){const n=data_get(t.data,this.componentProps[e]);this.$set(this.componentPropValues,e,n)}this.loading=!1})},close(){this.$emit("closed")},confirmClose(){this.shouldClose()&&this.close()},shouldClose(){return!(this.$dirty.has(this.publishContainer)&&!confirm(__("Are you sure? Unsaved changes will be lost.")))}}};var _sfc_render$k=function(){var e=this,n=e._self._c;return n("div",[n("stack",{attrs:{name:"inline-editor","before-close":e.shouldClose},on:{closed:e.close}},[n("div",{staticClass:"h-full overflow-auto p-6 bg-gray-300"},[e.loading?n("div",{staticClass:"absolute inset-0 z-200 flex items-center justify-center text-center"},[n("loading-graphic")],1):e._e(),e.loading?e._e():n(e.component,e._b({tag:"component",staticClass:"max-w-3xl mx-auto",attrs:{method:e.method,"is-creating":e.creating,"is-inline":!0,"publish-container":e.publishContainer},on:{saved:e.saved}},"component",e.componentPropValues,!1),[n("template",{slot:"action-buttons-right"},[e._t("action-buttons-right"),n("button",{staticClass:"btn-close",attrs:{type:"button"},domProps:{innerHTML:e._s("&times")},on:{click:e.confirmClose}})],2)],2)],1)])],1)},_sfc_staticRenderFns$k=[],__component__$k=normalizeComponent(_sfc_main$k,_sfc_render$k,_sfc_staticRenderFns$k,!1,null,null,null,null);const InlinePublishForm=__component__$k.exports,_sfc_main$j={mixins:[InlinePublishForm],props:{item:Object},data(){return{creating:!1,method:"patch",action:"update",title:this.item.title,itemUrl:this.item.edit_url}},methods:{saved(t){this.$emit("updated",t.data.data)}}},_sfc_render$j=null,_sfc_staticRenderFns$j=null;var __component__$j=normalizeComponent(_sfc_main$j,_sfc_render$j,_sfc_staticRenderFns$j,!1,null,null,null,null);const InlineEditForm=__component__$j.exports,_sfc_main$i={components:{InlineEditForm},props:{item:Object,config:Object,statusIcon:Boolean,editable:Boolean,sortable:Boolean,readOnly:Boolean,formComponent:String,formComponentProps:Object},data(){return{isEditing:!1}},methods:{edit(){this.editable&&(this.item.invalid||(this.isEditing=!0))},itemUpdated(t){this.item.title=t.title,this.item.published=t.published,this.item.private=t.private,this.item.status=t.status}}};var _sfc_render$i=function(){var e=this,n=e._self._c;return n("div",{staticClass:"item select-none",class:{invalid:e.item.invalid}},[e.sortable?n("div",{staticClass:"item-move"},[e._v(" ")]):e._e(),n("div",{staticClass:"item-inner"},[e.statusIcon?n("div",{staticClass:"little-dot mr-2 hidden@sm:block",class:e.item.status}):e._e(),e.item.invalid?n("div",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:e.__("An item with this ID could not be found"),expression:"__('An item with this ID could not be found')",modifiers:{top:!0}}],domProps:{textContent:e._s(e.item.title)}}):e._e(),!e.item.invalid&&e.editable?n("a",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.item.title,expression:"item.title"}],staticClass:"truncate",domProps:{textContent:e._s(e.item.title)},on:{click:e.edit}}):e._e(),!e.item.invalid&&!e.editable?n("div",{domProps:{textContent:e._s(e.item.title)}}):e._e(),e.isEditing?n("inline-edit-form",{attrs:{item:e.item,component:e.formComponent,"component-props":e.formComponentProps},on:{updated:e.itemUpdated,closed:function(r){e.isEditing=!1}}}):e._e(),n("div",{staticClass:"flex items-center flex-1 justify-end"},[e.item.collection?n("div",{staticClass:"text-4xs text-gray-600 uppercase whitespace-nowrap mr-2 hidden @sm:block",domProps:{textContent:e._s(e.item.collection.title)}}):e._e(),e.readOnly?e._e():n("div",{staticClass:"flex items-center"},[n("dropdown-list",[e.editable?n("dropdown-item",{attrs:{text:e.__("Edit")},on:{click:e.edit}}):e._e(),n("dropdown-item",{staticClass:"warning",attrs:{text:e.__("Unlink")},on:{click:function(r){return e.$emit("removed")}}})],1)],1)])],1)])},_sfc_staticRenderFns$i=[],__component__$i=normalizeComponent(_sfc_main$i,_sfc_render$i,_sfc_staticRenderFns$i,!1,null,null,null,null);const RelatedItem=__component__$i.exports,HasFilters={data(){return{activeFilterBadges:{},activeFilters:{},activePreset:null,activePresetPayload:{},searchQuery:""}},computed:{activeFilterCount(){let t=Object.keys(this.activeFilters).length;return this.activeFilters.hasOwnProperty("fields")&&(t=t+Object.keys(this.activeFilters.fields).filter(e=>e!="badge").length-1),t},canSave(){return this.isDirty&&this.preferencesPrefix},isDirty(){return this.isFiltering?this.activePreset?this.activePresetPayload.query!=this.searchQuery||!_.isEqual(this.activePresetPayload.filters||{},this.activeFilters):!0:!1},isFiltering(){return!_.isEmpty(this.activeFilters)||this.searchQuery||this.activePreset},hasActiveFilters(){return this.activeFilterCount>0},searchPlaceholder(){return this.activePreset?__("Searching in: ")+this.activePresetPayload.display:__("Search")}},created(){this.$keys.bind("f",t=>{t.preventDefault(),this.handleShowFilters()})},methods:{searchChanged(t){this.searchQuery=t},hasFields(t){for(const e in t)if(t[e])return!0;return!1},filterChanged({handle:t,values:e},n=!0){e&&this.hasFields(e)?Vue.set(this.activeFilters,t,e):Vue.delete(this.activeFilters,t),n&&this.unselectAllItems()},filtersChanged(t){this.activeFilters={};for(const e in t){const n=t[e];this.filterChanged({handle:e,values:n},!1)}this.unselectAllItems()},filtersReset(){this.activePreset=null,this.activePresetPayload={},this.searchQuery="",this.activeFilters={},this.activeFilterBadges={}},unselectAllItems(){this.$refs.dataList&&this.$refs.dataList.clearSelections()},selectPreset(t,e){this.activePreset=t,this.activePresetPayload=e,this.searchQuery=e.query,this.filtersChanged(e.filters)},autoApplyFilters(t){if(!t)return;let e={};t.filter(n=>!_.isEmpty(n.auto_apply)).forEach(n=>{e[n.handle]=n.auto_apply}),this.activeFilters=e}}},_sfc_main$h={mixins:[HasFilters],props:{filtersUrl:String,selectionsUrl:String,initialSelections:Array,initialSortColumn:String,initialSortDirection:String,maxSelections:Number,site:String,search:Boolean,type:String,exclusions:{type:Array,default:()=>[]},initialColumns:{type:Array,default:()=>[]}},data(){return{source:null,initializing:!0,loading:!0,items:[],meta:{},filters:[],sortColumn:this.initialSortColumn,sortDirection:this.initialSortDirection,page:1,selections:_.clone(this.initialSelections),columns:this.initialColumns,visibleColumns:this.initialColumns.filter(t=>t.visible)}},computed:{parameters(){return{sort:this.sortColumn,order:this.sortDirection,page:this.page,site:this.site,exclusions:this.exclusions,filters:utf8btoa(JSON.stringify(this.activeFilters)),columns:this.visibleColumns.map(t=>t.field).join(",")}},hasMaxSelections(){return this.maxSelections===1/0?!1:!!this.maxSelections}},mounted(){this.getFilters().then(()=>{this.autoApplyFilters(this.filters),this.initialRequest()})},watch:{parameters:{deep:!0,handler(t,e){this.initializing||JSON.stringify(e)!==JSON.stringify(t)&&this.request()}},loading:{immediate:!0,handler(t){this.$progress.loading("relationship-selector-listing",t)}},searchQuery(t){this.sortColumn=null,this.sortDirection=null,this.page=1,this.request()},selections(){this.maxSelections===1&&this.selections.length===1&&this.select()}},methods:{getFilters(){return this.filtersUrl?this.$axios.get(this.filtersUrl).then(t=>{this.filters=t.data}):Promise.resolve()},initialRequest(){return this.request().then(()=>{this.search&&this.$refs.search.focus()})},request(){this.loading=!0,this.source&&this.source.cancel(),this.source=this.$axios.CancelToken.source();const t={...this.parameters,search:this.searchQuery};return this.$axios.get(this.selectionsUrl,{params:t,cancelToken:this.source.token}).then(e=>{this.columns=e.data.meta.columns,this.items=e.data.data,this.meta=e.data.meta,this.activeFilterBadges={...e.data.meta.activeFilterBadges},this.loading=!1,this.initializing=!1}).catch(e=>{this.$axios.isCancel(e)||(this.loading=!1,this.initializing=!1,this.$toast.error(e.response?e.response.data.message:__("Something went wrong"),{duration:null}))})},sorted(t,e){this.sortColumn=t,this.sortDirection=e},setPage(t){this.page=t},select(){this.$emit("selected",this.selections),this.close()},close(){this.$emit("closed")},selectionsUpdated(t){this.selections=t},getStatusClass(t){return t.published&&t.private?"bg-transparent border border-gray-600":t.published?"bg-green-600":"bg-gray-400"},getStatusLabel(t){if(t.status==="published")return __("Published");if(t.status==="scheduled")return __("Scheduled");if(t.status==="expired")return __("Expired");if(t.status==="draft")return __("Draft")},getStatusTooltip(t){if(t.status==="published")return t.collection.dated?__("messages.status_published_with_date",{date:t.date}):null;if(t.status==="scheduled")return __("messages.status_scheduled_with_date",{date:t.date});if(t.status==="expired")return __("messages.status_expired_with_date",{date:t.date});if(t.status==="draft")return null},columnShowing(t){return this.visibleColumns.find(e=>e.field===t)}}};var _sfc_render$h=function(){var e=this,n=e._self._c;return n("div",{staticClass:"h-full bg-white"},[e.initializing?n("div",{staticClass:"absolute inset-0 z-200 flex items-center justify-center text-center"},[n("loading-graphic")],1):e._e(),e.initializing?e._e():n("data-list",{ref:"dataList",attrs:{rows:e.items,columns:e.columns,sort:!1,"sort-column":e.sortColumn,"sort-direction":e.sortDirection,selections:e.selections,"max-selections":e.maxSelections},on:{"selections-updated":e.selectionsUpdated},scopedSlots:e._u([{key:"default",fn:function({}){return n("div",{staticClass:"flex flex-col h-full"},[n("div",{staticClass:"bg-white bg-gray-200"},[n("div",{staticClass:"p-2"},[n("data-list-search",{ref:"search",staticClass:"h-8 min-w-[240px] w-full",attrs:{placeholder:e.searchPlaceholder},model:{value:e.searchQuery,callback:function(r){e.searchQuery=r},expression:"searchQuery"}})],1),n("div",[n("data-list-filters",{ref:"filters",attrs:{filters:e.filters,"active-filters":e.activeFilters,"active-filter-badges":e.activeFilterBadges,"active-count":e.activeFilterCount,"search-query":e.searchQuery},on:{changed:function(r){return e.filterChanged(r,!1)}}})],1)]),n("div",{staticClass:"flex-1 flex flex-col min-h-0"},[n("div",{staticClass:"flex flex-col h-full justify-start"},[n("div",{staticClass:"flex-1 overflow-scroll"},[n("data-list-table",{staticClass:"cursor-pointer",attrs:{loading:e.loading,"allow-bulk-actions":!0,"toggle-selection-on-row-click":!0,type:e.type},on:{sorted:e.sorted},scopedSlots:e._u([{key:"cell-title",fn:function({row:r}){return[n("div",{staticClass:"flex items-center"},[r.status&&!e.columnShowing("status")?n("div",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.getStatusLabel(r),expression:"getStatusLabel(entry)"}],staticClass:"little-dot mr-2",class:e.getStatusClass(r)}):e._e(),e._v(" "+e._s(r.title)+" ")])]}},{key:"cell-status",fn:function({row:r}){return[n("div",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.getStatusTooltip(r),expression:"getStatusTooltip(entry)"}],staticClass:"status-index-field select-none",class:`status-${r.status}`,domProps:{textContent:e._s(e.getStatusLabel(r))}})]}},{key:"cell-url",fn:function({row:r}){return[n("span",{staticClass:"text-2xs"},[e._v(e._s(r.url))])]}}],null,!0)})],1),e.meta.last_page>1?n("data-list-pagination",{staticClass:"border-t shadow-lg",attrs:{"resource-meta":e.meta,inline:!0},on:{"page-selected":e.setPage}}):e._e(),n("div",{staticClass:"p-4 border-t flex items-center justify-between bg-gray-200"},[n("div",{staticClass:"text-sm text-gray-700",domProps:{textContent:e._s(e.hasMaxSelections?e.__n(":count/:max selected",e.selections,{max:e.maxSelections}):e.__n(":count item selected|:count items selected",e.selections))}}),n("div",[n("button",{staticClass:"btn",attrs:{type:"button"},on:{click:e.close}},[e._v(" "+e._s(e.__("Cancel"))+" ")]),!e.hasMaxSelections||e.maxSelections>1?n("button",{staticClass:"btn-primary ml-2",attrs:{type:"button"},on:{click:e.select}},[e._v(" "+e._s(e.__("Select"))+" ")]):e._e()])])],1)])])}}],null,!1,1334854800)})],1)},_sfc_staticRenderFns$h=[],__component__$h=normalizeComponent(_sfc_main$h,_sfc_render$h,_sfc_staticRenderFns$h,!1,null,null,null,null);const ItemSelector=__component__$h.exports,_sfc_main$g={mixins:[InlinePublishForm],props:{site:String,itemUrl:String},data(){return{creating:!0,method:"post",action:"store",title:__("Create")}},inject:["storeName"],methods:{saved(t){this.$emit("created",t.data.data),this.$nextTick(()=>this.close())}}},_sfc_render$g=null,_sfc_staticRenderFns$g=null;var __component__$g=normalizeComponent(_sfc_main$g,_sfc_render$g,_sfc_staticRenderFns$g,!1,null,null,null,null);const InlineCreateForm=__component__$g.exports,_sfc_main$f={components:{InlineCreateForm},props:{site:String,creatables:Array,component:String,componentProps:Object},data(){return{creatable:null}},computed:{isCreating(){return this.creatable!==null}},methods:{itemCreated(t){this.stopCreating(),this.$emit("created",t)},stopCreating(){this.creatable=null},create(){this.creatables.length===1&&this.select(this.creatables[0])},select(t){this.creatable=t}}};var _sfc_render$f=function(){var e=this,n=e._self._c;return n("div",[n("dropdown-list",{attrs:{disabled:e.creatables.length===1},scopedSlots:e._u([{key:"trigger",fn:function(){return[n("button",{staticClass:"text-button text-blue hover:text-gray-800 mr-6 flex items-center outline-none",on:{click:e.create}},[n("svg-icon",{staticClass:"mr-1 h-4 w-4 flex items-center",attrs:{name:"light/content-writing"}}),n("span",{staticClass:"hidden @sm:block",domProps:{textContent:e._s(e.__("Create & Link Item"))}}),n("span",{staticClass:"@sm:hidden",domProps:{textContent:e._s(e.__("Create"))}})],1)]},proxy:!0}])},e._l(e.creatables,function(r){return n("dropdown-item",{key:r.url,attrs:{text:r.title},on:{click:function(s){return e.select(r)}}})}),1),e.isCreating?n("inline-create-form",{attrs:{site:e.site,"item-url":e.creatable.url,component:e.component,"component-props":e.componentProps},on:{created:e.itemCreated,closed:e.stopCreating}}):e._e()],1)},_sfc_staticRenderFns$f=[],__component__$f=normalizeComponent(_sfc_main$f,_sfc_render$f,_sfc_staticRenderFns$f,!1,null,null,null,null);const CreateButton=__component__$f.exports;class AbstractEvent{constructor(e){this._canceled=!1,this.data=e}get type(){return this.constructor.type}get cancelable(){return this.constructor.cancelable}cancel(){this._canceled=!0}canceled(){return this._canceled}clone(e){return new this.constructor({...this.data,...e})}}AbstractEvent.type="event";AbstractEvent.cancelable=!1;class AbstractPlugin{constructor(e){this.draggable=e}attach(){throw new Error("Not Implemented")}detach(){throw new Error("Not Implemented")}}const defaultDelay={mouse:0,drag:0,touch:100};class Sensor{constructor(e=[],n={}){this.containers=[...e],this.options={...n},this.dragging=!1,this.currentContainer=null,this.originalSource=null,this.startEvent=null,this.delay=calcDelay(n.delay)}attach(){return this}detach(){return this}addContainer(...e){this.containers=[...this.containers,...e]}removeContainer(...e){this.containers=this.containers.filter(n=>!e.includes(n))}trigger(e,n){const r=document.createEvent("Event");return r.detail=n,r.initEvent(n.type,!0,!0),e.dispatchEvent(r),this.lastEvent=n,n}}function calcDelay(t){const e={};if(t===void 0)return{...defaultDelay};if(typeof t=="number"){for(const n in defaultDelay)Object.prototype.hasOwnProperty.call(defaultDelay,n)&&(e[n]=t);return e}for(const n in defaultDelay)Object.prototype.hasOwnProperty.call(defaultDelay,n)&&(t[n]===void 0?e[n]=defaultDelay[n]:e[n]=t[n]);return e}function closest(t,e){if(t==null)return null;function n(s){return s==null||e==null?!1:isSelector(e)?Element.prototype.matches.call(s,e):isNodeList(e)?[...e].includes(s):isElement$1(e)?e===s:isFunction$2(e)?e(s):!1}let r=t;do{if(r=r.correspondingUseElement||r.correspondingElement||r,n(r))return r;r=(r==null?void 0:r.parentNode)||null}while(r!=null&&r!==document.body&&r!==document);return null}function isSelector(t){return typeof t=="string"}function isNodeList(t){return t instanceof NodeList||t instanceof Array}function isElement$1(t){return t instanceof Node}function isFunction$2(t){return typeof t=="function"}function distance(t,e,n,r){return Math.sqrt((n-t)**2+(r-e)**2)}class SensorEvent extends AbstractEvent{get originalEvent(){return this.data.originalEvent}get clientX(){return this.data.clientX}get clientY(){return this.data.clientY}get target(){return this.data.target}get container(){return this.data.container}get originalSource(){return this.data.originalSource}get pressure(){return this.data.pressure}}class DragStartSensorEvent extends SensorEvent{}DragStartSensorEvent.type="drag:start";class DragMoveSensorEvent extends SensorEvent{}DragMoveSensorEvent.type="drag:move";class DragStopSensorEvent extends SensorEvent{}DragStopSensorEvent.type="drag:stop";class DragPressureSensorEvent extends SensorEvent{}DragPressureSensorEvent.type="drag:pressure";const onContextMenuWhileDragging=Symbol("onContextMenuWhileDragging"),onMouseDown=Symbol("onMouseDown"),onMouseMove=Symbol("onMouseMove"),onMouseUp=Symbol("onMouseUp"),startDrag$1=Symbol("startDrag"),onDistanceChange$1=Symbol("onDistanceChange");class MouseSensor extends Sensor{constructor(e=[],n={}){super(e,n),this.mouseDownTimeout=null,this.pageX=null,this.pageY=null,this[onContextMenuWhileDragging]=this[onContextMenuWhileDragging].bind(this),this[onMouseDown]=this[onMouseDown].bind(this),this[onMouseMove]=this[onMouseMove].bind(this),this[onMouseUp]=this[onMouseUp].bind(this),this[startDrag$1]=this[startDrag$1].bind(this),this[onDistanceChange$1]=this[onDistanceChange$1].bind(this)}attach(){document.addEventListener("mousedown",this[onMouseDown],!0)}detach(){document.removeEventListener("mousedown",this[onMouseDown],!0)}[onMouseDown](e){if(e.button!==0||e.ctrlKey||e.metaKey)return;const n=closest(e.target,this.containers);if(!n||this.options.handle&&e.target&&!closest(e.target,this.options.handle))return;const r=closest(e.target,this.options.draggable);if(!r)return;const{delay:s}=this,{pageX:o,pageY:a}=e;Object.assign(this,{pageX:o,pageY:a}),this.onMouseDownAt=Date.now(),this.startEvent=e,this.currentContainer=n,this.originalSource=r,document.addEventListener("mouseup",this[onMouseUp]),document.addEventListener("dragstart",preventNativeDragStart),document.addEventListener("mousemove",this[onDistanceChange$1]),this.mouseDownTimeout=window.setTimeout(()=>{this[onDistanceChange$1]({pageX:this.pageX,pageY:this.pageY})},s.mouse)}[startDrag$1](){const e=this.startEvent,n=this.currentContainer,r=this.originalSource,s=new DragStartSensorEvent({clientX:e.clientX,clientY:e.clientY,target:e.target,container:n,originalSource:r,originalEvent:e});this.trigger(this.currentContainer,s),this.dragging=!s.canceled(),this.dragging&&(document.addEventListener("contextmenu",this[onContextMenuWhileDragging],!0),document.addEventListener("mousemove",this[onMouseMove]))}[onDistanceChange$1](e){const{pageX:n,pageY:r}=e,{distance:s}=this.options,{startEvent:o,delay:a}=this;if(Object.assign(this,{pageX:n,pageY:r}),!this.currentContainer)return;const l=Date.now()-this.onMouseDownAt,c=distance(o.pageX,o.pageY,n,r)||0;clearTimeout(this.mouseDownTimeout),l<a.mouse?document.removeEventListener("mousemove",this[onDistanceChange$1]):c>=s&&(document.removeEventListener("mousemove",this[onDistanceChange$1]),this[startDrag$1]())}[onMouseMove](e){if(!this.dragging)return;const n=document.elementFromPoint(e.clientX,e.clientY),r=new DragMoveSensorEvent({clientX:e.clientX,clientY:e.clientY,target:n,container:this.currentContainer,originalEvent:e});this.trigger(this.currentContainer,r)}[onMouseUp](e){if(clearTimeout(this.mouseDownTimeout),e.button!==0||(document.removeEventListener("mouseup",this[onMouseUp]),document.removeEventListener("dragstart",preventNativeDragStart),document.removeEventListener("mousemove",this[onDistanceChange$1]),!this.dragging))return;const n=document.elementFromPoint(e.clientX,e.clientY),r=new DragStopSensorEvent({clientX:e.clientX,clientY:e.clientY,target:n,container:this.currentContainer,originalEvent:e});this.trigger(this.currentContainer,r),document.removeEventListener("contextmenu",this[onContextMenuWhileDragging],!0),document.removeEventListener("mousemove",this[onMouseMove]),this.currentContainer=null,this.dragging=!1,this.startEvent=null}[onContextMenuWhileDragging](e){e.preventDefault()}}function preventNativeDragStart(t){t.preventDefault()}function touchCoords(t){const{touches:e,changedTouches:n}=t;return e&&e[0]||n&&n[0]}const onTouchStart=Symbol("onTouchStart"),onTouchEnd=Symbol("onTouchEnd"),onTouchMove=Symbol("onTouchMove"),startDrag=Symbol("startDrag"),onDistanceChange=Symbol("onDistanceChange");let preventScrolling=!1;window.addEventListener("touchmove",t=>{preventScrolling&&t.preventDefault()},{passive:!1});class TouchSensor extends Sensor{constructor(e=[],n={}){super(e,n),this.currentScrollableParent=null,this.tapTimeout=null,this.touchMoved=!1,this.pageX=null,this.pageY=null,this[onTouchStart]=this[onTouchStart].bind(this),this[onTouchEnd]=this[onTouchEnd].bind(this),this[onTouchMove]=this[onTouchMove].bind(this),this[startDrag]=this[startDrag].bind(this),this[onDistanceChange]=this[onDistanceChange].bind(this)}attach(){document.addEventListener("touchstart",this[onTouchStart])}detach(){document.removeEventListener("touchstart",this[onTouchStart])}[onTouchStart](e){const n=closest(e.target,this.containers);if(!n||this.options.handle&&e.target&&!closest(e.target,this.options.handle))return;const r=closest(e.target,this.options.draggable);if(!r)return;const{distance:s=0}=this.options,{delay:o}=this,{pageX:a,pageY:l}=touchCoords(e);Object.assign(this,{pageX:a,pageY:l}),this.onTouchStartAt=Date.now(),this.startEvent=e,this.currentContainer=n,this.originalSource=r,document.addEventListener("touchend",this[onTouchEnd]),document.addEventListener("touchcancel",this[onTouchEnd]),document.addEventListener("touchmove",this[onDistanceChange]),n.addEventListener("contextmenu",onContextMenu),s&&(preventScrolling=!0),this.tapTimeout=window.setTimeout(()=>{this[onDistanceChange]({touches:[{pageX:this.pageX,pageY:this.pageY}]})},o.touch)}[startDrag](){const e=this.startEvent,n=this.currentContainer,r=touchCoords(e),s=this.originalSource,o=new DragStartSensorEvent({clientX:r.pageX,clientY:r.pageY,target:e.target,container:n,originalSource:s,originalEvent:e});this.trigger(this.currentContainer,o),this.dragging=!o.canceled(),this.dragging&&document.addEventListener("touchmove",this[onTouchMove]),preventScrolling=this.dragging}[onDistanceChange](e){const{distance:n}=this.options,{startEvent:r,delay:s}=this,o=touchCoords(r),a=touchCoords(e),l=Date.now()-this.onTouchStartAt,c=distance(o.pageX,o.pageY,a.pageX,a.pageY);Object.assign(this,a),clearTimeout(this.tapTimeout),l<s.touch?document.removeEventListener("touchmove",this[onDistanceChange]):c>=n&&(document.removeEventListener("touchmove",this[onDistanceChange]),this[startDrag]())}[onTouchMove](e){if(!this.dragging)return;const{pageX:n,pageY:r}=touchCoords(e),s=document.elementFromPoint(n-window.scrollX,r-window.scrollY),o=new DragMoveSensorEvent({clientX:n,clientY:r,target:s,container:this.currentContainer,originalEvent:e});this.trigger(this.currentContainer,o)}[onTouchEnd](e){if(clearTimeout(this.tapTimeout),preventScrolling=!1,document.removeEventListener("touchend",this[onTouchEnd]),document.removeEventListener("touchcancel",this[onTouchEnd]),document.removeEventListener("touchmove",this[onDistanceChange]),this.currentContainer&&this.currentContainer.removeEventListener("contextmenu",onContextMenu),!this.dragging)return;document.removeEventListener("touchmove",this[onTouchMove]);const{pageX:n,pageY:r}=touchCoords(e),s=document.elementFromPoint(n-window.scrollX,r-window.scrollY);e.preventDefault();const o=new DragStopSensorEvent({clientX:n,clientY:r,target:s,container:this.currentContainer,originalEvent:e});this.trigger(this.currentContainer,o),this.currentContainer=null,this.dragging=!1,this.startEvent=null}}function onContextMenu(t){t.preventDefault(),t.stopPropagation()}class CollidableEvent extends AbstractEvent{constructor(e){super(e),this.data=e}get dragEvent(){return this.data.dragEvent}}CollidableEvent.type="collidable";class CollidableInEvent extends CollidableEvent{get collidingElement(){return this.data.collidingElement}}CollidableInEvent.type="collidable:in";class CollidableOutEvent extends CollidableEvent{get collidingElement(){return this.data.collidingElement}}CollidableOutEvent.type="collidable:out";function createAddInitializerMethod(t,e){return function(n){assertNotFinished(e,"addInitializer"),assertCallable(n,"An initializer"),t.push(n)}}function assertInstanceIfPrivate(t,e){if(!t(e))throw new TypeError("Attempted to access private element on non-instance")}function memberDec(t,e,n,r,s,o,a,l,c,u,f){var p;switch(o){case 1:p="accessor";break;case 2:p="method";break;case 3:p="getter";break;case 4:p="setter";break;default:p="field"}var d,h,g={kind:p,name:l?"#"+n:n,static:a,private:l,metadata:f},v={v:!1};if(o!==0&&(g.addInitializer=createAddInitializerMethod(s,v)),l||o!==0&&o!==2)if(o===2)d=function(y){return assertInstanceIfPrivate(u,y),r.value};else{var b=o===0||o===1;(b||o===3)&&(d=l?function(y){return assertInstanceIfPrivate(u,y),r.get.call(y)}:function(y){return r.get.call(y)}),(b||o===4)&&(h=l?function(y,S){assertInstanceIfPrivate(u,y),r.set.call(y,S)}:function(y,S){r.set.call(y,S)})}else d=function(y){return y[n]},o===0&&(h=function(y,S){y[n]=S});var m=l?u.bind():function(y){return n in y};g.access=d&&h?{get:d,set:h,has:m}:d?{get:d,has:m}:{set:h,has:m};try{return t.call(e,c,g)}finally{v.v=!0}}function assertNotFinished(t,e){if(t.v)throw new Error("attempted to call "+e+" after decoration was finished")}function assertCallable(t,e){if(typeof t!="function")throw new TypeError(e+" must be a function")}function assertValidReturnValue(t,e){var n=typeof e;if(t===1){if(n!=="object"||e===null)throw new TypeError("accessor decorators must return an object with get, set, or init properties or void 0");e.get!==void 0&&assertCallable(e.get,"accessor.get"),e.set!==void 0&&assertCallable(e.set,"accessor.set"),e.init!==void 0&&assertCallable(e.init,"accessor.init")}else if(n!=="function"){var r;throw r=t===0?"field":t===5?"class":"method",new TypeError(r+" decorators must return a function or void 0")}}function curryThis1(t){return function(){return t(this)}}function curryThis2(t){return function(e){t(this,e)}}function applyMemberDec(t,e,n,r,s,o,a,l,c,u,f){var p,d,h,g,v,b,m=n[0];r||Array.isArray(m)||(m=[m]),l?p=o===0||o===1?{get:curryThis1(n[3]),set:curryThis2(n[4])}:o===3?{get:n[3]}:o===4?{set:n[3]}:{value:n[3]}:o!==0&&(p=Object.getOwnPropertyDescriptor(e,s)),o===1?h={get:p.get,set:p.set}:o===2?h=p.value:o===3?h=p.get:o===4&&(h=p.set);for(var y=r?2:1,S=m.length-1;S>=0;S-=y){var w;(g=memberDec(m[S],r?m[S-1]:void 0,s,p,c,o,a,l,h,u,f))!==void 0&&(assertValidReturnValue(o,g),o===0?w=g:o===1?(w=g.init,v=g.get||h.get,b=g.set||h.set,h={get:v,set:b}):h=g,w!==void 0&&(d===void 0?d=w:typeof d=="function"?d=[d,w]:d.push(w)))}if(o===0||o===1){if(d===void 0)d=function(x,C){return C};else if(typeof d!="function"){var $=d;d=function(x,C){for(var O=C,A=$.length-1;A>=0;A--)O=$[A].call(x,O);return O}}else{var E=d;d=function(x,C){return E.call(x,C)}}t.push(d)}o!==0&&(o===1?(p.get=h.get,p.set=h.set):o===2?p.value=h:o===3?p.get=h:o===4&&(p.set=h),l?o===1?(t.push(function(x,C){return h.get.call(x,C)}),t.push(function(x,C){return h.set.call(x,C)})):o===2?t.push(h):t.push(function(x,C){return h.call(x,C)}):Object.defineProperty(e,s,p))}function applyMemberDecs(t,e,n,r){for(var s,o,a,l=[],c=new Map,u=new Map,f=0;f<e.length;f++){var p=e[f];if(Array.isArray(p)){var d,h,g=p[1],v=p[2],b=p.length>3,m=16&g,y=!!(8&g),S=n;if(g&=7,y?(d=t,g!==0&&(h=o=o||[]),b&&!a&&(a=function(E){return _checkInRHS(E)===t}),S=a):(d=t.prototype,g!==0&&(h=s=s||[])),g!==0&&!b){var w=y?u:c,$=w.get(v)||0;if($===!0||$===3&&g!==4||$===4&&g!==3)throw new Error("Attempted to decorate a public method/accessor that has the same name as a previously decorated public method/accessor. This is not currently supported by the decorators plugin. Property name was: "+v);w.set(v,!(!$&&g>2)||g)}applyMemberDec(l,d,p,m,v,g,y,b,h,S,r)}}return pushInitializers(l,s),pushInitializers(l,o),l}function pushInitializers(t,e){e&&t.push(function(n){for(var r=0;r<e.length;r++)e[r].call(n);return n})}function applyClassDecs(t,e,n,r){if(e.length){for(var s=[],o=t,a=t.name,l=n?2:1,c=e.length-1;c>=0;c-=l){var u={v:!1};try{var f=e[c].call(n?e[c-1]:void 0,o,{kind:"class",name:a,addInitializer:createAddInitializerMethod(s,u),metadata:r})}finally{u.v=!0}f!==void 0&&(assertValidReturnValue(5,f),o=f)}return[defineMetadata(o,r),function(){for(var p=0;p<s.length;p++)s[p].call(o)}]}}function defineMetadata(t,e){return Object.defineProperty(t,Symbol.metadata||Symbol.for("Symbol.metadata"),{configurable:!0,enumerable:!0,value:e})}function _applyDecs2305(t,e,n,r,s,o){if(arguments.length>=6)var a=o[Symbol.metadata||Symbol.for("Symbol.metadata")];var l=Object.create(a===void 0?null:a),c=applyMemberDecs(t,e,s,l);return n.length||defineMetadata(t,l),{e:c,get c(){return applyClassDecs(t,n,r,l)}}}function _checkInRHS(t){if(Object(t)!==t)throw TypeError("right-hand side of 'in' should be an object, got "+(t!==null?typeof t:"null"));return t}function AutoBind(t,{name:e,addInitializer:n}){n(function(){this[e]=t.bind(this)})}function requestNextAnimationFrame(t){return requestAnimationFrame(()=>{requestAnimationFrame(t)})}class DragEvent extends AbstractEvent{constructor(e){super(e),this.data=e}get source(){return this.data.source}get originalSource(){return this.data.originalSource}get mirror(){return this.data.mirror}get sourceContainer(){return this.data.sourceContainer}get sensorEvent(){return this.data.sensorEvent}get originalEvent(){return this.sensorEvent?this.sensorEvent.originalEvent:null}}DragEvent.type="drag";class DragStartEvent extends DragEvent{}DragStartEvent.type="drag:start";DragStartEvent.cancelable=!0;class DragMoveEvent extends DragEvent{}DragMoveEvent.type="drag:move";class DragOverEvent extends DragEvent{get overContainer(){return this.data.overContainer}get over(){return this.data.over}}DragOverEvent.type="drag:over";DragOverEvent.cancelable=!0;function isDragOverEvent(t){return t.type===DragOverEvent.type}class DragOutEvent extends DragEvent{get overContainer(){return this.data.overContainer}get over(){return this.data.over}}DragOutEvent.type="drag:out";class DragOverContainerEvent extends DragEvent{get overContainer(){return this.data.overContainer}}DragOverContainerEvent.type="drag:over:container";class DragOutContainerEvent extends DragEvent{get overContainer(){return this.data.overContainer}}DragOutContainerEvent.type="drag:out:container";class DragPressureEvent extends DragEvent{get pressure(){return this.data.pressure}}DragPressureEvent.type="drag:pressure";class DragStopEvent extends DragEvent{}DragStopEvent.type="drag:stop";DragStopEvent.cancelable=!0;class DragStoppedEvent extends DragEvent{}DragStoppedEvent.type="drag:stopped";var _initProto$1,_class$1;class ResizeMirror extends AbstractPlugin{constructor(e){_initProto$1(super(e)),this.lastWidth=0,this.lastHeight=0,this.mirror=null}attach(){this.draggable.on("mirror:created",this.onMirrorCreated).on("drag:over",this.onDragOver).on("drag:over:container",this.onDragOver)}detach(){this.draggable.off("mirror:created",this.onMirrorCreated).off("mirror:destroy",this.onMirrorDestroy).off("drag:over",this.onDragOver).off("drag:over:container",this.onDragOver)}getOptions(){return this.draggable.options.resizeMirror||{}}onMirrorCreated({mirror:e}){this.mirror=e}onMirrorDestroy(){this.mirror=null}onDragOver(e){this.resize(e)}resize(e){requestAnimationFrame(()=>{let n=null;const{overContainer:r}=e;if(this.mirror==null||this.mirror.parentNode==null)return;this.mirror.parentNode!==r&&r.appendChild(this.mirror),isDragOverEvent(e)&&(n=e.over);const s=n||this.draggable.getDraggableElementsForContainer(r)[0];s&&requestNextAnimationFrame(()=>{const o=s.getBoundingClientRect();this.mirror==null||this.lastHeight===o.height&&this.lastWidth===o.width||(this.mirror.style.width=`${o.width}px`,this.mirror.style.height=`${o.height}px`,this.lastWidth=o.width,this.lastHeight=o.height)})})}}_class$1=ResizeMirror;[_initProto$1]=_applyDecs2305(_class$1,[[AutoBind,2,"onMirrorCreated"],[AutoBind,2,"onMirrorDestroy"],[AutoBind,2,"onDragOver"]],[],0,void 0,AbstractPlugin).e;class SnapEvent extends AbstractEvent{get dragEvent(){return this.data.dragEvent}get snappable(){return this.data.snappable}}SnapEvent.type="snap";class SnapInEvent extends SnapEvent{}SnapInEvent.type="snap:in";SnapInEvent.cancelable=!0;class SnapOutEvent extends SnapEvent{}SnapOutEvent.type="snap:out";SnapOutEvent.cancelable=!0;var _initProto,_class;const defaultOptions$5={duration:150,easingFunction:"ease-in-out",horizontal:!1};class SwapAnimation extends AbstractPlugin{constructor(e){_initProto(super(e)),this.options={...defaultOptions$5,...this.getOptions()},this.lastAnimationFrame=null}attach(){this.draggable.on("sortable:sorted",this.onSortableSorted)}detach(){this.draggable.off("sortable:sorted",this.onSortableSorted)}getOptions(){return this.draggable.options.swapAnimation||{}}onSortableSorted({oldIndex:e,newIndex:n,dragEvent:r}){const{source:s,over:o}=r;this.lastAnimationFrame&&cancelAnimationFrame(this.lastAnimationFrame),this.lastAnimationFrame=requestAnimationFrame(()=>{e>=n?animate(s,o,this.options):animate(o,s,this.options)})}}_class=SwapAnimation;[_initProto]=_applyDecs2305(_class,[[AutoBind,2,"onSortableSorted"]],[],0,void 0,AbstractPlugin).e;function animate(t,e,{duration:n,easingFunction:r,horizontal:s}){for(const o of[t,e])o.style.pointerEvents="none";if(s){const o=t.offsetWidth;t.style.transform=`translate3d(${o}px, 0, 0)`,e.style.transform=`translate3d(-${o}px, 0, 0)`}else{const o=t.offsetHeight;t.style.transform=`translate3d(0, ${o}px, 0)`,e.style.transform=`translate3d(0, -${o}px, 0)`}requestAnimationFrame(()=>{for(const o of[t,e])o.addEventListener("transitionend",resetElementOnTransitionEnd),o.style.transition=`transform ${n}ms ${r}`,o.style.transform=""})}function resetElementOnTransitionEnd(t){t.target==null||!isHTMLElement$1(t.target)||(t.target.style.transition="",t.target.style.pointerEvents="",t.target.removeEventListener("transitionend",resetElementOnTransitionEnd))}function isHTMLElement$1(t){return"style"in t}const onInitialize$1=Symbol("onInitialize"),onDestroy$1=Symbol("onDestroy"),announceEvent=Symbol("announceEvent"),announceMessage=Symbol("announceMessage"),ARIA_RELEVANT="aria-relevant",ARIA_ATOMIC="aria-atomic",ARIA_LIVE="aria-live",ROLE="role",defaultOptions$4={expire:7e3};class Announcement extends AbstractPlugin{constructor(e){super(e),this.options={...defaultOptions$4,...this.getOptions()},this.originalTriggerMethod=this.draggable.trigger,this[onInitialize$1]=this[onInitialize$1].bind(this),this[onDestroy$1]=this[onDestroy$1].bind(this)}attach(){this.draggable.on("draggable:initialize",this[onInitialize$1])}detach(){this.draggable.off("draggable:destroy",this[onDestroy$1])}getOptions(){return this.draggable.options.announcements||{}}[announceEvent](e){const n=this.options[e.type];n&&typeof n=="string"&&this[announceMessage](n),n&&typeof n=="function"&&this[announceMessage](n(e))}[announceMessage](e){announce(e,{expire:this.options.expire})}[onInitialize$1](){this.draggable.trigger=e=>{try{this[announceEvent](e)}finally{this.originalTriggerMethod.call(this.draggable,e)}}}[onDestroy$1](){this.draggable.trigger=this.originalTriggerMethod}}const liveRegion=createRegion();function announce(t,{expire:e}){const n=document.createElement("div");return n.textContent=t,liveRegion.appendChild(n),setTimeout(()=>{liveRegion.removeChild(n)},e)}function createRegion(){const t=document.createElement("div");return t.setAttribute("id","draggable-live-region"),t.setAttribute(ARIA_RELEVANT,"additions"),t.setAttribute(ARIA_ATOMIC,"true"),t.setAttribute(ARIA_LIVE,"assertive"),t.setAttribute(ROLE,"log"),t.style.position="fixed",t.style.width="1px",t.style.height="1px",t.style.top="-1px",t.style.overflow="hidden",t}document.addEventListener("DOMContentLoaded",()=>{document.body.appendChild(liveRegion)});const onInitialize=Symbol("onInitialize"),onDestroy=Symbol("onDestroy"),defaultOptions$3={};class Focusable extends AbstractPlugin{constructor(e){super(e),this.options={...defaultOptions$3,...this.getOptions()},this[onInitialize]=this[onInitialize].bind(this),this[onDestroy]=this[onDestroy].bind(this)}attach(){this.draggable.on("draggable:initialize",this[onInitialize]).on("draggable:destroy",this[onDestroy])}detach(){this.draggable.off("draggable:initialize",this[onInitialize]).off("draggable:destroy",this[onDestroy]),this[onDestroy]()}getOptions(){return this.draggable.options.focusable||{}}getElements(){return[...this.draggable.containers,...this.draggable.getDraggableElements()]}[onInitialize](){requestAnimationFrame(()=>{this.getElements().forEach(e=>decorateElement(e))})}[onDestroy](){requestAnimationFrame(()=>{this.getElements().forEach(e=>stripElement(e))})}}const elementsWithMissingTabIndex=[];function decorateElement(t){!t.getAttribute("tabindex")&&t.tabIndex===-1&&(elementsWithMissingTabIndex.push(t),t.tabIndex=0)}function stripElement(t){const e=elementsWithMissingTabIndex.indexOf(t);e!==-1&&(t.tabIndex=-1,elementsWithMissingTabIndex.splice(e,1))}class MirrorEvent extends AbstractEvent{constructor(e){super(e),this.data=e}get source(){return this.data.source}get originalSource(){return this.data.originalSource}get sourceContainer(){return this.data.sourceContainer}get sensorEvent(){return this.data.sensorEvent}get dragEvent(){return this.data.dragEvent}get originalEvent(){return this.sensorEvent?this.sensorEvent.originalEvent:null}}class MirrorCreateEvent extends MirrorEvent{}MirrorCreateEvent.type="mirror:create";class MirrorCreatedEvent extends MirrorEvent{get mirror(){return this.data.mirror}}MirrorCreatedEvent.type="mirror:created";class MirrorAttachedEvent extends MirrorEvent{get mirror(){return this.data.mirror}}MirrorAttachedEvent.type="mirror:attached";class MirrorMoveEvent extends MirrorEvent{get mirror(){return this.data.mirror}get passedThreshX(){return this.data.passedThreshX}get passedThreshY(){return this.data.passedThreshY}}MirrorMoveEvent.type="mirror:move";MirrorMoveEvent.cancelable=!0;class MirrorMovedEvent extends MirrorEvent{get mirror(){return this.data.mirror}get passedThreshX(){return this.data.passedThreshX}get passedThreshY(){return this.data.passedThreshY}}MirrorMovedEvent.type="mirror:moved";class MirrorDestroyEvent extends MirrorEvent{get mirror(){return this.data.mirror}}MirrorDestroyEvent.type="mirror:destroy";MirrorDestroyEvent.cancelable=!0;const onDragStart$3=Symbol("onDragStart"),onDragMove$2=Symbol("onDragMove"),onDragStop$3=Symbol("onDragStop"),onMirrorCreated=Symbol("onMirrorCreated"),onMirrorMove=Symbol("onMirrorMove"),onScroll=Symbol("onScroll"),getAppendableContainer=Symbol("getAppendableContainer"),defaultOptions$2={constrainDimensions:!1,xAxis:!0,yAxis:!0,cursorOffsetX:null,cursorOffsetY:null,thresholdX:null,thresholdY:null};class Mirror extends AbstractPlugin{constructor(e){super(e),this.options={...defaultOptions$2,...this.getOptions()},this.scrollOffset={x:0,y:0},this.initialScrollOffset={x:window.scrollX,y:window.scrollY},this[onDragStart$3]=this[onDragStart$3].bind(this),this[onDragMove$2]=this[onDragMove$2].bind(this),this[onDragStop$3]=this[onDragStop$3].bind(this),this[onMirrorCreated]=this[onMirrorCreated].bind(this),this[onMirrorMove]=this[onMirrorMove].bind(this),this[onScroll]=this[onScroll].bind(this)}attach(){this.draggable.on("drag:start",this[onDragStart$3]).on("drag:move",this[onDragMove$2]).on("drag:stop",this[onDragStop$3]).on("mirror:created",this[onMirrorCreated]).on("mirror:move",this[onMirrorMove])}detach(){this.draggable.off("drag:start",this[onDragStart$3]).off("drag:move",this[onDragMove$2]).off("drag:stop",this[onDragStop$3]).off("mirror:created",this[onMirrorCreated]).off("mirror:move",this[onMirrorMove])}getOptions(){return this.draggable.options.mirror||{}}[onDragStart$3](e){if(e.canceled())return;"ontouchstart"in window&&document.addEventListener("scroll",this[onScroll],!0),this.initialScrollOffset={x:window.scrollX,y:window.scrollY};const{source:n,originalSource:r,sourceContainer:s,sensorEvent:o}=e;this.lastMirrorMovedClient={x:o.clientX,y:o.clientY};const a=new MirrorCreateEvent({source:n,originalSource:r,sourceContainer:s,sensorEvent:o,dragEvent:e});if(this.draggable.trigger(a),isNativeDragEvent(o)||a.canceled())return;const l=this[getAppendableContainer](n)||s;this.mirror=n.cloneNode(!0);const c=new MirrorCreatedEvent({source:n,originalSource:r,sourceContainer:s,sensorEvent:o,dragEvent:e,mirror:this.mirror}),u=new MirrorAttachedEvent({source:n,originalSource:r,sourceContainer:s,sensorEvent:o,dragEvent:e,mirror:this.mirror});this.draggable.trigger(c),l.appendChild(this.mirror),this.draggable.trigger(u)}[onDragMove$2](e){if(!this.mirror||e.canceled())return;const{source:n,originalSource:r,sourceContainer:s,sensorEvent:o}=e;let a=!0,l=!0;if(this.options.thresholdX||this.options.thresholdY){const{x:u,y:f}=this.lastMirrorMovedClient;if(Math.abs(u-o.clientX)<this.options.thresholdX?a=!1:this.lastMirrorMovedClient.x=o.clientX,Math.abs(f-o.clientY)<this.options.thresholdY?l=!1:this.lastMirrorMovedClient.y=o.clientY,!a&&!l)return}const c=new MirrorMoveEvent({source:n,originalSource:r,sourceContainer:s,sensorEvent:o,dragEvent:e,mirror:this.mirror,passedThreshX:a,passedThreshY:l});this.draggable.trigger(c)}[onDragStop$3](e){if("ontouchstart"in window&&document.removeEventListener("scroll",this[onScroll],!0),this.initialScrollOffset={x:0,y:0},this.scrollOffset={x:0,y:0},!this.mirror)return;const{source:n,sourceContainer:r,sensorEvent:s}=e,o=new MirrorDestroyEvent({source:n,mirror:this.mirror,sourceContainer:r,sensorEvent:s,dragEvent:e});this.draggable.trigger(o),o.canceled()||this.mirror.remove()}[onScroll](){this.scrollOffset={x:window.scrollX-this.initialScrollOffset.x,y:window.scrollY-this.initialScrollOffset.y}}[onMirrorCreated]({mirror:e,source:n,sensorEvent:r}){const s=this.draggable.getClassNamesFor("mirror"),o=({mirrorOffset:l,initialX:c,initialY:u,...f})=>(this.mirrorOffset=l,this.initialX=c,this.initialY=u,this.lastMovedX=c,this.lastMovedY=u,{mirrorOffset:l,initialX:c,initialY:u,...f});e.style.display="none";const a={mirror:e,source:n,sensorEvent:r,mirrorClasses:s,scrollOffset:this.scrollOffset,options:this.options,passedThreshX:!0,passedThreshY:!0};return Promise.resolve(a).then(computeMirrorDimensions).then(calculateMirrorOffset).then(resetMirror).then(addMirrorClasses).then(positionMirror({initial:!0})).then(removeMirrorID).then(o)}[onMirrorMove](e){if(e.canceled())return null;const n=({lastMovedX:o,lastMovedY:a,...l})=>(this.lastMovedX=o,this.lastMovedY=a,{lastMovedX:o,lastMovedY:a,...l}),r=o=>{const a=new MirrorMovedEvent({source:e.source,originalSource:e.originalSource,sourceContainer:e.sourceContainer,sensorEvent:e.sensorEvent,dragEvent:e.dragEvent,mirror:this.mirror,passedThreshX:e.passedThreshX,passedThreshY:e.passedThreshY});return this.draggable.trigger(a),o},s={mirror:e.mirror,sensorEvent:e.sensorEvent,mirrorOffset:this.mirrorOffset,options:this.options,initialX:this.initialX,initialY:this.initialY,scrollOffset:this.scrollOffset,passedThreshX:e.passedThreshX,passedThreshY:e.passedThreshY,lastMovedX:this.lastMovedX,lastMovedY:this.lastMovedY};return Promise.resolve(s).then(positionMirror({raf:!0})).then(n).then(r)}[getAppendableContainer](e){const n=this.options.appendTo;return typeof n=="string"?document.querySelector(n):n instanceof HTMLElement?n:typeof n=="function"?n(e):e.parentNode}}function computeMirrorDimensions({source:t,...e}){return withPromise(n=>{const r=t.getBoundingClientRect();n({source:t,sourceRect:r,...e})})}function calculateMirrorOffset({sensorEvent:t,sourceRect:e,options:n,...r}){return withPromise(s=>{const o=n.cursorOffsetY===null?t.clientY-e.top:n.cursorOffsetY,a=n.cursorOffsetX===null?t.clientX-e.left:n.cursorOffsetX;s({sensorEvent:t,sourceRect:e,mirrorOffset:{top:o,left:a},options:n,...r})})}function resetMirror({mirror:t,source:e,options:n,...r}){return withPromise(s=>{let o,a;if(n.constrainDimensions){const l=getComputedStyle(e);o=l.getPropertyValue("height"),a=l.getPropertyValue("width")}t.style.display=null,t.style.position="fixed",t.style.pointerEvents="none",t.style.top=0,t.style.left=0,t.style.margin=0,n.constrainDimensions&&(t.style.height=o,t.style.width=a),s({mirror:t,source:e,options:n,...r})})}function addMirrorClasses({mirror:t,mirrorClasses:e,...n}){return withPromise(r=>{t.classList.add(...e),r({mirror:t,mirrorClasses:e,...n})})}function removeMirrorID({mirror:t,...e}){return withPromise(n=>{t.removeAttribute("id"),delete t.id,n({mirror:t,...e})})}function positionMirror({withFrame:t=!1,initial:e=!1}={}){return({mirror:n,sensorEvent:r,mirrorOffset:s,initialY:o,initialX:a,scrollOffset:l,options:c,passedThreshX:u,passedThreshY:f,lastMovedX:p,lastMovedY:d,...h})=>withPromise(g=>{const v={mirror:n,sensorEvent:r,mirrorOffset:s,options:c,...h};if(s){const b=u?Math.round((r.clientX-s.left-l.x)/(c.thresholdX||1))*(c.thresholdX||1):Math.round(p),m=f?Math.round((r.clientY-s.top-l.y)/(c.thresholdY||1))*(c.thresholdY||1):Math.round(d);c.xAxis&&c.yAxis||e?n.style.transform=`translate3d(${b}px, ${m}px, 0)`:c.xAxis&&!c.yAxis?n.style.transform=`translate3d(${b}px, ${o}px, 0)`:c.yAxis&&!c.xAxis&&(n.style.transform=`translate3d(${a}px, ${m}px, 0)`),e&&(v.initialX=b,v.initialY=m),v.lastMovedX=b,v.lastMovedY=m}g(v)},{frame:t})}function withPromise(t,{raf:e=!1}={}){return new Promise((n,r)=>{e?requestAnimationFrame(()=>{t(n,r)}):t(n,r)})}function isNativeDragEvent(t){return/^drag/.test(t.originalEvent.type)}const onDragStart$2=Symbol("onDragStart"),onDragMove$1=Symbol("onDragMove"),onDragStop$2=Symbol("onDragStop"),scroll=Symbol("scroll"),defaultOptions$1={speed:6,sensitivity:50,scrollableElements:[]};class Scrollable extends AbstractPlugin{constructor(e){super(e),this.options={...defaultOptions$1,...this.getOptions()},this.currentMousePosition=null,this.scrollAnimationFrame=null,this.scrollableElement=null,this.findScrollableElementFrame=null,this[onDragStart$2]=this[onDragStart$2].bind(this),this[onDragMove$1]=this[onDragMove$1].bind(this),this[onDragStop$2]=this[onDragStop$2].bind(this),this[scroll]=this[scroll].bind(this)}attach(){this.draggable.on("drag:start",this[onDragStart$2]).on("drag:move",this[onDragMove$1]).on("drag:stop",this[onDragStop$2])}detach(){this.draggable.off("drag:start",this[onDragStart$2]).off("drag:move",this[onDragMove$1]).off("drag:stop",this[onDragStop$2])}getOptions(){return this.draggable.options.scrollable||{}}getScrollableElement(e){return this.hasDefinedScrollableElements()?closest(e,this.options.scrollableElements)||document.documentElement:closestScrollableElement(e)}hasDefinedScrollableElements(){return this.options.scrollableElements.length!==0}[onDragStart$2](e){this.findScrollableElementFrame=requestAnimationFrame(()=>{this.scrollableElement=this.getScrollableElement(e.source)})}[onDragMove$1](e){if(this.findScrollableElementFrame=requestAnimationFrame(()=>{this.scrollableElement=this.getScrollableElement(e.sensorEvent.target)}),!this.scrollableElement)return;const n=e.sensorEvent,r={x:0,y:0};"ontouchstart"in window&&(r.y=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,r.x=window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0),this.currentMousePosition={clientX:n.clientX-r.x,clientY:n.clientY-r.y},this.scrollAnimationFrame=requestAnimationFrame(this[scroll])}[onDragStop$2](){cancelAnimationFrame(this.scrollAnimationFrame),cancelAnimationFrame(this.findScrollableElementFrame),this.scrollableElement=null,this.scrollAnimationFrame=null,this.findScrollableElementFrame=null,this.currentMousePosition=null}[scroll](){if(!this.scrollableElement||!this.currentMousePosition)return;cancelAnimationFrame(this.scrollAnimationFrame);const{speed:e,sensitivity:n}=this.options,r=this.scrollableElement.getBoundingClientRect(),s=r.bottom>window.innerHeight,a=r.top<0||s,l=getDocumentScrollingElement(),c=this.scrollableElement,u=this.currentMousePosition.clientX,f=this.currentMousePosition.clientY;if(c!==document.body&&c!==document.documentElement&&!a){const{offsetHeight:p,offsetWidth:d}=c;r.top+p-f<n?c.scrollTop+=e:f-r.top<n&&(c.scrollTop-=e),r.left+d-u<n?c.scrollLeft+=e:u-r.left<n&&(c.scrollLeft-=e)}else{const{innerHeight:p,innerWidth:d}=window;f<n?l.scrollTop-=e:p-f<n&&(l.scrollTop+=e),u<n?l.scrollLeft-=e:d-u<n&&(l.scrollLeft+=e)}this.scrollAnimationFrame=requestAnimationFrame(this[scroll])}}function hasOverflow(t){const e=/(auto|scroll)/,n=getComputedStyle(t,null),r=n.getPropertyValue("overflow")+n.getPropertyValue("overflow-y")+n.getPropertyValue("overflow-x");return e.test(r)}function isStaticallyPositioned(t){return getComputedStyle(t).getPropertyValue("position")==="static"}function closestScrollableElement(t){if(!t)return getDocumentScrollingElement();const e=getComputedStyle(t).getPropertyValue("position"),n=e==="absolute",r=closest(t,s=>n&&isStaticallyPositioned(s)?!1:hasOverflow(s));return e==="fixed"||!r?getDocumentScrollingElement():r}function getDocumentScrollingElement(){return document.scrollingElement||document.documentElement}class Emitter{constructor(){this.callbacks={}}on(e,...n){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(...n),this}off(e,n){if(!this.callbacks[e])return null;const r=this.callbacks[e].slice(0);for(let s=0;s<r.length;s++)n===r[s]&&this.callbacks[e].splice(s,1);return this}trigger(e){if(!this.callbacks[e.type])return null;const n=[...this.callbacks[e.type]],r=[];for(let s=n.length-1;s>=0;s--){const o=n[s];try{o(e)}catch(a){r.push(a)}}return r.length&&console.error(`Draggable caught errors while triggering '${e.type}'`,r),this}}class DraggableEvent extends AbstractEvent{get draggable(){return this.data.draggable}}DraggableEvent.type="draggable";class DraggableInitializedEvent extends DraggableEvent{}DraggableInitializedEvent.type="draggable:initialize";class DraggableDestroyEvent extends DraggableEvent{}DraggableDestroyEvent.type="draggable:destroy";const onDragStart$1=Symbol("onDragStart"),onDragMove=Symbol("onDragMove"),onDragStop$1=Symbol("onDragStop"),onDragPressure=Symbol("onDragPressure"),dragStop=Symbol("dragStop"),defaultAnnouncements$1={"drag:start":t=>`Picked up ${t.source.textContent.trim()||t.source.id||"draggable element"}`,"drag:stop":t=>`Released ${t.source.textContent.trim()||t.source.id||"draggable element"}`},defaultClasses={"container:dragging":"draggable-container--is-dragging","source:dragging":"draggable-source--is-dragging","source:placed":"draggable-source--placed","container:placed":"draggable-container--placed","body:dragging":"draggable--is-dragging","draggable:over":"draggable--over","container:over":"draggable-container--over","source:original":"draggable--original",mirror:"draggable-mirror"},defaultOptions={draggable:".draggable-source",handle:null,delay:{},distance:0,placedTimeout:800,plugins:[],sensors:[],exclude:{plugins:[],sensors:[]}};class Draggable{constructor(e=[document.body],n={}){if(e instanceof NodeList||e instanceof Array)this.containers=[...e];else if(e instanceof HTMLElement)this.containers=[e];else throw new Error("Draggable containers are expected to be of type `NodeList`, `HTMLElement[]` or `HTMLElement`");this.options={...defaultOptions,...n,classes:{...defaultClasses,...n.classes||{}},announcements:{...defaultAnnouncements$1,...n.announcements||{}},exclude:{plugins:n.exclude&&n.exclude.plugins||[],sensors:n.exclude&&n.exclude.sensors||[]}},this.emitter=new Emitter,this.dragging=!1,this.plugins=[],this.sensors=[],this[onDragStart$1]=this[onDragStart$1].bind(this),this[onDragMove]=this[onDragMove].bind(this),this[onDragStop$1]=this[onDragStop$1].bind(this),this[onDragPressure]=this[onDragPressure].bind(this),this[dragStop]=this[dragStop].bind(this),document.addEventListener("drag:start",this[onDragStart$1],!0),document.addEventListener("drag:move",this[onDragMove],!0),document.addEventListener("drag:stop",this[onDragStop$1],!0),document.addEventListener("drag:pressure",this[onDragPressure],!0);const r=Object.values(Draggable.Plugins).filter(a=>!this.options.exclude.plugins.includes(a)),s=Object.values(Draggable.Sensors).filter(a=>!this.options.exclude.sensors.includes(a));this.addPlugin(...r,...this.options.plugins),this.addSensor(...s,...this.options.sensors);const o=new DraggableInitializedEvent({draggable:this});this.on("mirror:created",({mirror:a})=>this.mirror=a),this.on("mirror:destroy",()=>this.mirror=null),this.trigger(o)}destroy(){document.removeEventListener("drag:start",this[onDragStart$1],!0),document.removeEventListener("drag:move",this[onDragMove],!0),document.removeEventListener("drag:stop",this[onDragStop$1],!0),document.removeEventListener("drag:pressure",this[onDragPressure],!0);const e=new DraggableDestroyEvent({draggable:this});this.trigger(e),this.removePlugin(...this.plugins.map(n=>n.constructor)),this.removeSensor(...this.sensors.map(n=>n.constructor))}addPlugin(...e){const n=e.map(r=>new r(this));return n.forEach(r=>r.attach()),this.plugins=[...this.plugins,...n],this}removePlugin(...e){return this.plugins.filter(r=>e.includes(r.constructor)).forEach(r=>r.detach()),this.plugins=this.plugins.filter(r=>!e.includes(r.constructor)),this}addSensor(...e){const n=e.map(r=>new r(this.containers,this.options));return n.forEach(r=>r.attach()),this.sensors=[...this.sensors,...n],this}removeSensor(...e){return this.sensors.filter(r=>e.includes(r.constructor)).forEach(r=>r.detach()),this.sensors=this.sensors.filter(r=>!e.includes(r.constructor)),this}addContainer(...e){return this.containers=[...this.containers,...e],this.sensors.forEach(n=>n.addContainer(...e)),this}removeContainer(...e){return this.containers=this.containers.filter(n=>!e.includes(n)),this.sensors.forEach(n=>n.removeContainer(...e)),this}on(e,...n){return this.emitter.on(e,...n),this}off(e,n){return this.emitter.off(e,n),this}trigger(e){return this.emitter.trigger(e),this}getClassNameFor(e){return this.getClassNamesFor(e)[0]}getClassNamesFor(e){const n=this.options.classes[e];return n instanceof Array?n:typeof n=="string"||n instanceof String?[n]:[]}isDragging(){return!!this.dragging}getDraggableElements(){return this.containers.reduce((e,n)=>[...e,...this.getDraggableElementsForContainer(n)],[])}getDraggableElementsForContainer(e){return[...e.querySelectorAll(this.options.draggable)].filter(r=>r!==this.originalSource&&r!==this.mirror)}cancel(){this[dragStop]()}[onDragStart$1](e){const n=getSensorEvent(e),{target:r,container:s,originalSource:o}=n;if(!this.containers.includes(s))return;if(this.options.handle&&r&&!closest(r,this.options.handle)){n.cancel();return}this.originalSource=o,this.sourceContainer=s,this.lastPlacedSource&&this.lastPlacedContainer&&(clearTimeout(this.placedTimeoutID),this.lastPlacedSource.classList.remove(...this.getClassNamesFor("source:placed")),this.lastPlacedContainer.classList.remove(...this.getClassNamesFor("container:placed"))),this.source=this.originalSource.cloneNode(!0),this.originalSource.parentNode.insertBefore(this.source,this.originalSource),this.originalSource.style.display="none";const a=new DragStartEvent({source:this.source,originalSource:this.originalSource,sourceContainer:s,sensorEvent:n});if(this.trigger(a),this.dragging=!a.canceled(),a.canceled()){this.source.remove(),this.originalSource.style.display=null;return}this.originalSource.classList.add(...this.getClassNamesFor("source:original")),this.source.classList.add(...this.getClassNamesFor("source:dragging")),this.sourceContainer.classList.add(...this.getClassNamesFor("container:dragging")),document.body.classList.add(...this.getClassNamesFor("body:dragging")),applyUserSelect(document.body,"none"),requestAnimationFrame(()=>{const c=getSensorEvent(e).clone({target:this.source});this[onDragMove]({...e,detail:c})})}[onDragMove](e){if(!this.dragging)return;const n=getSensorEvent(e),{container:r}=n;let s=n.target;const o=new DragMoveEvent({source:this.source,originalSource:this.originalSource,sourceContainer:r,sensorEvent:n});this.trigger(o),o.canceled()&&n.cancel(),s=closest(s,this.options.draggable);const a=closest(n.target,this.containers),l=n.overContainer||a,c=this.currentOverContainer&&l!==this.currentOverContainer,u=this.currentOver&&s!==this.currentOver,f=l&&this.currentOverContainer!==l,p=a&&s&&this.currentOver!==s;if(u){const d=new DragOutEvent({source:this.source,originalSource:this.originalSource,sourceContainer:r,sensorEvent:n,over:this.currentOver,overContainer:this.currentOverContainer});this.currentOver.classList.remove(...this.getClassNamesFor("draggable:over")),this.currentOver=null,this.trigger(d)}if(c){const d=new DragOutContainerEvent({source:this.source,originalSource:this.originalSource,sourceContainer:r,sensorEvent:n,overContainer:this.currentOverContainer});this.currentOverContainer.classList.remove(...this.getClassNamesFor("container:over")),this.currentOverContainer=null,this.trigger(d)}if(f){l.classList.add(...this.getClassNamesFor("container:over"));const d=new DragOverContainerEvent({source:this.source,originalSource:this.originalSource,sourceContainer:r,sensorEvent:n,overContainer:l});this.currentOverContainer=l,this.trigger(d)}if(p){s.classList.add(...this.getClassNamesFor("draggable:over"));const d=new DragOverEvent({source:this.source,originalSource:this.originalSource,sourceContainer:r,sensorEvent:n,overContainer:l,over:s});this.currentOver=s,this.trigger(d)}}[dragStop](e){if(!this.dragging)return;this.dragging=!1;const n=new DragStopEvent({source:this.source,originalSource:this.originalSource,sensorEvent:e?e.sensorEvent:null,sourceContainer:this.sourceContainer});this.trigger(n),n.canceled()||this.source.parentNode.insertBefore(this.originalSource,this.source),this.source.remove(),this.originalSource.style.display="",this.source.classList.remove(...this.getClassNamesFor("source:dragging")),this.originalSource.classList.remove(...this.getClassNamesFor("source:original")),this.originalSource.classList.add(...this.getClassNamesFor("source:placed")),this.sourceContainer.classList.add(...this.getClassNamesFor("container:placed")),this.sourceContainer.classList.remove(...this.getClassNamesFor("container:dragging")),document.body.classList.remove(...this.getClassNamesFor("body:dragging")),applyUserSelect(document.body,""),this.currentOver&&this.currentOver.classList.remove(...this.getClassNamesFor("draggable:over")),this.currentOverContainer&&this.currentOverContainer.classList.remove(...this.getClassNamesFor("container:over")),this.lastPlacedSource=this.originalSource,this.lastPlacedContainer=this.sourceContainer,this.placedTimeoutID=setTimeout(()=>{this.lastPlacedSource&&this.lastPlacedSource.classList.remove(...this.getClassNamesFor("source:placed")),this.lastPlacedContainer&&this.lastPlacedContainer.classList.remove(...this.getClassNamesFor("container:placed")),this.lastPlacedSource=null,this.lastPlacedContainer=null},this.options.placedTimeout);const r=new DragStoppedEvent({source:this.source,originalSource:this.originalSource,sensorEvent:e?e.sensorEvent:null,sourceContainer:this.sourceContainer});this.trigger(r),this.source=null,this.originalSource=null,this.currentOverContainer=null,this.currentOver=null,this.sourceContainer=null}[onDragStop$1](e){this[dragStop](e)}[onDragPressure](e){if(!this.dragging)return;const n=getSensorEvent(e),r=this.source||closest(n.originalEvent.target,this.options.draggable),s=new DragPressureEvent({sensorEvent:n,source:r,pressure:n.pressure});this.trigger(s)}}Draggable.Plugins={Announcement,Focusable,Mirror,Scrollable};Draggable.Sensors={MouseSensor,TouchSensor};function getSensorEvent(t){return t.detail}function applyUserSelect(t,e){t.style.webkitUserSelect=e,t.style.mozUserSelect=e,t.style.msUserSelect=e,t.style.oUserSelect=e,t.style.userSelect=e}class DroppableEvent extends AbstractEvent{constructor(e){super(e),this.data=e}get dragEvent(){return this.data.dragEvent}}DroppableEvent.type="droppable";class DroppableStartEvent extends DroppableEvent{get dropzone(){return this.data.dropzone}}DroppableStartEvent.type="droppable:start";DroppableStartEvent.cancelable=!0;class DroppableDroppedEvent extends DroppableEvent{get dropzone(){return this.data.dropzone}}DroppableDroppedEvent.type="droppable:dropped";DroppableDroppedEvent.cancelable=!0;class DroppableReturnedEvent extends DroppableEvent{get dropzone(){return this.data.dropzone}}DroppableReturnedEvent.type="droppable:returned";DroppableReturnedEvent.cancelable=!0;class DroppableStopEvent extends DroppableEvent{get dropzone(){return this.data.dropzone}}DroppableStopEvent.type="droppable:stop";DroppableStopEvent.cancelable=!0;class SwappableEvent extends AbstractEvent{constructor(e){super(e),this.data=e}get dragEvent(){return this.data.dragEvent}}SwappableEvent.type="swappable";class SwappableStartEvent extends SwappableEvent{}SwappableStartEvent.type="swappable:start";SwappableStartEvent.cancelable=!0;class SwappableSwapEvent extends SwappableEvent{get over(){return this.data.over}get overContainer(){return this.data.overContainer}}SwappableSwapEvent.type="swappable:swap";SwappableSwapEvent.cancelable=!0;class SwappableSwappedEvent extends SwappableEvent{get swappedElement(){return this.data.swappedElement}}SwappableSwappedEvent.type="swappable:swapped";class SwappableStopEvent extends SwappableEvent{}SwappableStopEvent.type="swappable:stop";class SortableEvent extends AbstractEvent{constructor(e){super(e),this.data=e}get dragEvent(){return this.data.dragEvent}}SortableEvent.type="sortable";class SortableStartEvent extends SortableEvent{get startIndex(){return this.data.startIndex}get startContainer(){return this.data.startContainer}}SortableStartEvent.type="sortable:start";SortableStartEvent.cancelable=!0;class SortableSortEvent extends SortableEvent{get currentIndex(){return this.data.currentIndex}get over(){return this.data.over}get overContainer(){return this.data.dragEvent.overContainer}}SortableSortEvent.type="sortable:sort";SortableSortEvent.cancelable=!0;class SortableSortedEvent extends SortableEvent{get oldIndex(){return this.data.oldIndex}get newIndex(){return this.data.newIndex}get oldContainer(){return this.data.oldContainer}get newContainer(){return this.data.newContainer}}SortableSortedEvent.type="sortable:sorted";class SortableStopEvent extends SortableEvent{get oldIndex(){return this.data.oldIndex}get newIndex(){return this.data.newIndex}get oldContainer(){return this.data.oldContainer}get newContainer(){return this.data.newContainer}}SortableStopEvent.type="sortable:stop";const onDragStart=Symbol("onDragStart"),onDragOverContainer=Symbol("onDragOverContainer"),onDragOver=Symbol("onDragOver"),onDragStop=Symbol("onDragStop");function onSortableSortedDefaultAnnouncement({dragEvent:t}){const e=t.source.textContent.trim()||t.source.id||"sortable element";if(t.over){const n=t.over.textContent.trim()||t.over.id||"sortable element";return t.source.compareDocumentPosition(t.over)&Node.DOCUMENT_POSITION_FOLLOWING?`Placed ${e} after ${n}`:`Placed ${e} before ${n}`}else return`Placed ${e} into a different container`}const defaultAnnouncements={"sortable:sorted":onSortableSortedDefaultAnnouncement};class Sortable extends Draggable{constructor(e=[],n={}){super(e,{...n,announcements:{...defaultAnnouncements,...n.announcements||{}}}),this.startIndex=null,this.startContainer=null,this[onDragStart]=this[onDragStart].bind(this),this[onDragOverContainer]=this[onDragOverContainer].bind(this),this[onDragOver]=this[onDragOver].bind(this),this[onDragStop]=this[onDragStop].bind(this),this.on("drag:start",this[onDragStart]).on("drag:over:container",this[onDragOverContainer]).on("drag:over",this[onDragOver]).on("drag:stop",this[onDragStop])}destroy(){super.destroy(),this.off("drag:start",this[onDragStart]).off("drag:over:container",this[onDragOverContainer]).off("drag:over",this[onDragOver]).off("drag:stop",this[onDragStop])}index(e){return this.getSortableElementsForContainer(e.parentNode).indexOf(e)}getSortableElementsForContainer(e){return[...e.querySelectorAll(this.options.draggable)].filter(r=>r!==this.originalSource&&r!==this.mirror&&r.parentNode===e)}[onDragStart](e){this.startContainer=e.source.parentNode,this.startIndex=this.index(e.source);const n=new SortableStartEvent({dragEvent:e,startIndex:this.startIndex,startContainer:this.startContainer});this.trigger(n),n.canceled()&&e.cancel()}[onDragOverContainer](e){if(e.canceled())return;const{source:n,over:r,overContainer:s}=e,o=this.index(n),a=new SortableSortEvent({dragEvent:e,currentIndex:o,source:n,over:r});if(this.trigger(a),a.canceled())return;const l=this.getSortableElementsForContainer(s),c=move$1({source:n,over:r,overContainer:s,children:l});if(!c)return;const{oldContainer:u,newContainer:f}=c,p=this.index(e.source),d=new SortableSortedEvent({dragEvent:e,oldIndex:o,newIndex:p,oldContainer:u,newContainer:f});this.trigger(d)}[onDragOver](e){if(e.over===e.originalSource||e.over===e.source)return;const{source:n,over:r,overContainer:s}=e,o=this.index(n),a=new SortableSortEvent({dragEvent:e,currentIndex:o,source:n,over:r});if(this.trigger(a),a.canceled())return;const l=this.getDraggableElementsForContainer(s),c=move$1({source:n,over:r,overContainer:s,children:l});if(!c)return;const{oldContainer:u,newContainer:f}=c,p=this.index(n),d=new SortableSortedEvent({dragEvent:e,oldIndex:o,newIndex:p,oldContainer:u,newContainer:f});this.trigger(d)}[onDragStop](e){const n=new SortableStopEvent({dragEvent:e,oldIndex:this.startIndex,newIndex:this.index(e.source),oldContainer:this.startContainer,newContainer:e.source.parentNode});this.trigger(n),this.startIndex=null,this.startContainer=null}}function index(t){return Array.prototype.indexOf.call(t.parentNode.children,t)}function move$1({source:t,over:e,overContainer:n,children:r}){const s=!r.length,o=t.parentNode!==n,a=e&&t.parentNode===e.parentNode;return s?moveInsideEmptyContainer(t,n):a?moveWithinContainer(t,e):o?moveOutsideContainer(t,e,n):null}function moveInsideEmptyContainer(t,e){const n=t.parentNode;return e.appendChild(t),{oldContainer:n,newContainer:e}}function moveWithinContainer(t,e){const n=index(t),r=index(e);return n<r?t.parentNode.insertBefore(t,e.nextElementSibling):t.parentNode.insertBefore(t,e),{oldContainer:t.parentNode,newContainer:t.parentNode}}function moveOutsideContainer(t,e,n){const r=t.parentNode;return e?e.parentNode.insertBefore(t,e):n.appendChild(t),{oldContainer:r,newContainer:t.parentNode}}const min=Math.min,max=Math.max,round=Math.round,floor=Math.floor,createCoords=t=>({x:t,y:t}),oppositeSideMap={left:"right",right:"left",bottom:"top",top:"bottom"},oppositeAlignmentMap={start:"end",end:"start"};function evaluate(t,e){return typeof t=="function"?t(e):t}function getSide(t){return t.split("-")[0]}function getAlignment(t){return t.split("-")[1]}function getOppositeAxis(t){return t==="x"?"y":"x"}function getAxisLength(t){return t==="y"?"height":"width"}function getSideAxis(t){return["top","bottom"].includes(getSide(t))?"y":"x"}function getAlignmentAxis(t){return getOppositeAxis(getSideAxis(t))}function getAlignmentSides(t,e,n){n===void 0&&(n=!1);const r=getAlignment(t),s=getAlignmentAxis(t),o=getAxisLength(s);let a=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[o]>e.floating[o]&&(a=getOppositePlacement(a)),[a,getOppositePlacement(a)]}function getExpandedPlacements(t){const e=getOppositePlacement(t);return[getOppositeAlignmentPlacement(t),e,getOppositeAlignmentPlacement(e)]}function getOppositeAlignmentPlacement(t){return t.replace(/start|end/g,e=>oppositeAlignmentMap[e])}function getSideList(t,e,n){const r=["left","right"],s=["right","left"],o=["top","bottom"],a=["bottom","top"];switch(t){case"top":case"bottom":return n?e?s:r:e?r:s;case"left":case"right":return e?o:a;default:return[]}}function getOppositeAxisPlacements(t,e,n,r){const s=getAlignment(t);let o=getSideList(getSide(t),n==="start",r);return s&&(o=o.map(a=>a+"-"+s),e&&(o=o.concat(o.map(getOppositeAlignmentPlacement)))),o}function getOppositePlacement(t){return t.replace(/left|right|bottom|top/g,e=>oppositeSideMap[e])}function expandPaddingObject(t){return{top:0,right:0,bottom:0,left:0,...t}}function getPaddingObject(t){return typeof t!="number"?expandPaddingObject(t):{top:t,right:t,bottom:t,left:t}}function rectToClientRect(t){return{...t,top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height}}function computeCoordsFromPlacement(t,e,n){let{reference:r,floating:s}=t;const o=getSideAxis(e),a=getAlignmentAxis(e),l=getAxisLength(a),c=getSide(e),u=o==="y",f=r.x+r.width/2-s.width/2,p=r.y+r.height/2-s.height/2,d=r[l]/2-s[l]/2;let h;switch(c){case"top":h={x:f,y:r.y-s.height};break;case"bottom":h={x:f,y:r.y+r.height};break;case"right":h={x:r.x+r.width,y:p};break;case"left":h={x:r.x-s.width,y:p};break;default:h={x:r.x,y:r.y}}switch(getAlignment(e)){case"start":h[a]-=d*(n&&u?-1:1);break;case"end":h[a]+=d*(n&&u?-1:1);break}return h}const computePosition$1=async(t,e,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:o=[],platform:a}=n,l=o.filter(Boolean),c=await(a.isRTL==null?void 0:a.isRTL(e));let u=await a.getElementRects({reference:t,floating:e,strategy:s}),{x:f,y:p}=computeCoordsFromPlacement(u,r,c),d=r,h={},g=0;for(let v=0;v<l.length;v++){const{name:b,fn:m}=l[v],{x:y,y:S,data:w,reset:$}=await m({x:f,y:p,initialPlacement:r,placement:d,strategy:s,middlewareData:h,rects:u,platform:a,elements:{reference:t,floating:e}});if(f=y??f,p=S??p,h={...h,[b]:{...h[b],...w}},$&&g<=50){g++,typeof $=="object"&&($.placement&&(d=$.placement),$.rects&&(u=$.rects===!0?await a.getElementRects({reference:t,floating:e,strategy:s}):$.rects),{x:f,y:p}=computeCoordsFromPlacement(u,d,c)),v=-1;continue}}return{x:f,y:p,placement:d,strategy:s,middlewareData:h}};async function detectOverflow(t,e){var n;e===void 0&&(e={});const{x:r,y:s,platform:o,rects:a,elements:l,strategy:c}=t,{boundary:u="clippingAncestors",rootBoundary:f="viewport",elementContext:p="floating",altBoundary:d=!1,padding:h=0}=evaluate(e,t),g=getPaddingObject(h),b=l[d?p==="floating"?"reference":"floating":p],m=rectToClientRect(await o.getClippingRect({element:(n=await(o.isElement==null?void 0:o.isElement(b)))==null||n?b:b.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(l.floating)),boundary:u,rootBoundary:f,strategy:c})),y=p==="floating"?{...a.floating,x:r,y:s}:a.reference,S=await(o.getOffsetParent==null?void 0:o.getOffsetParent(l.floating)),w=await(o.isElement==null?void 0:o.isElement(S))?await(o.getScale==null?void 0:o.getScale(S))||{x:1,y:1}:{x:1,y:1},$=rectToClientRect(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({rect:y,offsetParent:S,strategy:c}):y);return{top:(m.top-$.top+g.top)/w.y,bottom:($.bottom-m.bottom+g.bottom)/w.y,left:(m.left-$.left+g.left)/w.x,right:($.right-m.right+g.right)/w.x}}const flip=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:s,middlewareData:o,rects:a,initialPlacement:l,platform:c,elements:u}=e,{mainAxis:f=!0,crossAxis:p=!0,fallbackPlacements:d,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:v=!0,...b}=evaluate(t,e);if((n=o.arrow)!=null&&n.alignmentOffset)return{};const m=getSide(s),y=getSide(l)===l,S=await(c.isRTL==null?void 0:c.isRTL(u.floating)),w=d||(y||!v?[getOppositePlacement(l)]:getExpandedPlacements(l));!d&&g!=="none"&&w.push(...getOppositeAxisPlacements(l,v,g,S));const $=[l,...w],E=await detectOverflow(e,b),x=[];let C=((r=o.flip)==null?void 0:r.overflows)||[];if(f&&x.push(E[m]),p){const k=getAlignmentSides(s,a,S);x.push(E[k[0]],E[k[1]])}if(C=[...C,{placement:s,overflows:x}],!x.every(k=>k<=0)){var O,A;const k=(((O=o.flip)==null?void 0:O.index)||0)+1,F=$[k];if(F)return{data:{index:k,overflows:C},reset:{placement:F}};let R=(A=C.filter(T=>T.overflows[0]<=0).sort((T,D)=>T.overflows[1]-D.overflows[1])[0])==null?void 0:A.placement;if(!R)switch(h){case"bestFit":{var I;const T=(I=C.map(D=>[D.placement,D.overflows.filter(M=>M>0).reduce((M,q)=>M+q,0)]).sort((D,M)=>D[1]-M[1])[0])==null?void 0:I[0];T&&(R=T);break}case"initialPlacement":R=l;break}if(s!==R)return{reset:{placement:R}}}return{}}}};async function convertValueToCoords(t,e){const{placement:n,platform:r,elements:s}=t,o=await(r.isRTL==null?void 0:r.isRTL(s.floating)),a=getSide(n),l=getAlignment(n),c=getSideAxis(n)==="y",u=["left","top"].includes(a)?-1:1,f=o&&c?-1:1,p=evaluate(e,t);let{mainAxis:d,crossAxis:h,alignmentAxis:g}=typeof p=="number"?{mainAxis:p,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...p};return l&&typeof g=="number"&&(h=l==="end"?g*-1:g),c?{x:h*f,y:d*u}:{x:d*u,y:h*f}}const offset=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){const{x:n,y:r}=e,s=await convertValueToCoords(e,t);return{x:n+s.x,y:r+s.y,data:s}}}};function getNodeName(t){return isNode(t)?(t.nodeName||"").toLowerCase():"#document"}function getWindow(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function getDocumentElement(t){var e;return(e=(isNode(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function isNode(t){return t instanceof Node||t instanceof getWindow(t).Node}function isElement(t){return t instanceof Element||t instanceof getWindow(t).Element}function isHTMLElement(t){return t instanceof HTMLElement||t instanceof getWindow(t).HTMLElement}function isShadowRoot(t){return typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof getWindow(t).ShadowRoot}function isOverflowElement(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=getComputedStyle$1(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(s)}function isTableElement(t){return["table","td","th"].includes(getNodeName(t))}function isContainingBlock(t){const e=isWebKit(),n=getComputedStyle$1(t);return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function getContainingBlock(t){let e=getParentNode(t);for(;isHTMLElement(e)&&!isLastTraversableNode(e);){if(isContainingBlock(e))return e;e=getParentNode(e)}return null}function isWebKit(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function isLastTraversableNode(t){return["html","body","#document"].includes(getNodeName(t))}function getComputedStyle$1(t){return getWindow(t).getComputedStyle(t)}function getNodeScroll(t){return isElement(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function getParentNode(t){if(getNodeName(t)==="html")return t;const e=t.assignedSlot||t.parentNode||isShadowRoot(t)&&t.host||getDocumentElement(t);return isShadowRoot(e)?e.host:e}function getNearestOverflowAncestor(t){const e=getParentNode(t);return isLastTraversableNode(e)?t.ownerDocument?t.ownerDocument.body:t.body:isHTMLElement(e)&&isOverflowElement(e)?e:getNearestOverflowAncestor(e)}function getOverflowAncestors(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const s=getNearestOverflowAncestor(t),o=s===((r=t.ownerDocument)==null?void 0:r.body),a=getWindow(s);return o?e.concat(a,a.visualViewport||[],isOverflowElement(s)?s:[],a.frameElement&&n?getOverflowAncestors(a.frameElement):[]):e.concat(s,getOverflowAncestors(s,[],n))}function getCssDimensions(t){const e=getComputedStyle$1(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=isHTMLElement(t),o=s?t.offsetWidth:n,a=s?t.offsetHeight:r,l=round(n)!==o||round(r)!==a;return l&&(n=o,r=a),{width:n,height:r,$:l}}function unwrapElement(t){return isElement(t)?t:t.contextElement}function getScale(t){const e=unwrapElement(t);if(!isHTMLElement(e))return createCoords(1);const n=e.getBoundingClientRect(),{width:r,height:s,$:o}=getCssDimensions(e);let a=(o?round(n.width):n.width)/r,l=(o?round(n.height):n.height)/s;return(!a||!Number.isFinite(a))&&(a=1),(!l||!Number.isFinite(l))&&(l=1),{x:a,y:l}}const noOffsets=createCoords(0);function getVisualOffsets(t){const e=getWindow(t);return!isWebKit()||!e.visualViewport?noOffsets:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function shouldAddVisualOffsets(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==getWindow(t)?!1:e}function getBoundingClientRect(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect(),o=unwrapElement(t);let a=createCoords(1);e&&(r?isElement(r)&&(a=getScale(r)):a=getScale(t));const l=shouldAddVisualOffsets(o,n,r)?getVisualOffsets(o):createCoords(0);let c=(s.left+l.x)/a.x,u=(s.top+l.y)/a.y,f=s.width/a.x,p=s.height/a.y;if(o){const d=getWindow(o),h=r&&isElement(r)?getWindow(r):r;let g=d.frameElement;for(;g&&r&&h!==d;){const v=getScale(g),b=g.getBoundingClientRect(),m=getComputedStyle$1(g),y=b.left+(g.clientLeft+parseFloat(m.paddingLeft))*v.x,S=b.top+(g.clientTop+parseFloat(m.paddingTop))*v.y;c*=v.x,u*=v.y,f*=v.x,p*=v.y,c+=y,u+=S,g=getWindow(g).frameElement}}return rectToClientRect({width:f,height:p,x:c,y:u})}function convertOffsetParentRelativeRectToViewportRelativeRect(t){let{rect:e,offsetParent:n,strategy:r}=t;const s=isHTMLElement(n),o=getDocumentElement(n);if(n===o)return e;let a={scrollLeft:0,scrollTop:0},l=createCoords(1);const c=createCoords(0);if((s||!s&&r!=="fixed")&&((getNodeName(n)!=="body"||isOverflowElement(o))&&(a=getNodeScroll(n)),isHTMLElement(n))){const u=getBoundingClientRect(n);l=getScale(n),c.x=u.x+n.clientLeft,c.y=u.y+n.clientTop}return{width:e.width*l.x,height:e.height*l.y,x:e.x*l.x-a.scrollLeft*l.x+c.x,y:e.y*l.y-a.scrollTop*l.y+c.y}}function getClientRects(t){return Array.from(t.getClientRects())}function getWindowScrollBarX(t){return getBoundingClientRect(getDocumentElement(t)).left+getNodeScroll(t).scrollLeft}function getDocumentRect(t){const e=getDocumentElement(t),n=getNodeScroll(t),r=t.ownerDocument.body,s=max(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),o=max(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let a=-n.scrollLeft+getWindowScrollBarX(t);const l=-n.scrollTop;return getComputedStyle$1(r).direction==="rtl"&&(a+=max(e.clientWidth,r.clientWidth)-s),{width:s,height:o,x:a,y:l}}function getViewportRect(t,e){const n=getWindow(t),r=getDocumentElement(t),s=n.visualViewport;let o=r.clientWidth,a=r.clientHeight,l=0,c=0;if(s){o=s.width,a=s.height;const u=isWebKit();(!u||u&&e==="fixed")&&(l=s.offsetLeft,c=s.offsetTop)}return{width:o,height:a,x:l,y:c}}function getInnerBoundingClientRect(t,e){const n=getBoundingClientRect(t,!0,e==="fixed"),r=n.top+t.clientTop,s=n.left+t.clientLeft,o=isHTMLElement(t)?getScale(t):createCoords(1),a=t.clientWidth*o.x,l=t.clientHeight*o.y,c=s*o.x,u=r*o.y;return{width:a,height:l,x:c,y:u}}function getClientRectFromClippingAncestor(t,e,n){let r;if(e==="viewport")r=getViewportRect(t,n);else if(e==="document")r=getDocumentRect(getDocumentElement(t));else if(isElement(e))r=getInnerBoundingClientRect(e,n);else{const s=getVisualOffsets(t);r={...e,x:e.x-s.x,y:e.y-s.y}}return rectToClientRect(r)}function hasFixedPositionAncestor(t,e){const n=getParentNode(t);return n===e||!isElement(n)||isLastTraversableNode(n)?!1:getComputedStyle$1(n).position==="fixed"||hasFixedPositionAncestor(n,e)}function getClippingElementAncestors(t,e){const n=e.get(t);if(n)return n;let r=getOverflowAncestors(t,[],!1).filter(l=>isElement(l)&&getNodeName(l)!=="body"),s=null;const o=getComputedStyle$1(t).position==="fixed";let a=o?getParentNode(t):t;for(;isElement(a)&&!isLastTraversableNode(a);){const l=getComputedStyle$1(a),c=isContainingBlock(a);!c&&l.position==="fixed"&&(s=null),(o?!c&&!s:!c&&l.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||isOverflowElement(a)&&!c&&hasFixedPositionAncestor(t,a))?r=r.filter(f=>f!==a):s=l,a=getParentNode(a)}return e.set(t,r),r}function getClippingRect(t){let{element:e,boundary:n,rootBoundary:r,strategy:s}=t;const a=[...n==="clippingAncestors"?getClippingElementAncestors(e,this._c):[].concat(n),r],l=a[0],c=a.reduce((u,f)=>{const p=getClientRectFromClippingAncestor(e,f,s);return u.top=max(p.top,u.top),u.right=min(p.right,u.right),u.bottom=min(p.bottom,u.bottom),u.left=max(p.left,u.left),u},getClientRectFromClippingAncestor(e,l,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function getDimensions(t){return getCssDimensions(t)}function getRectRelativeToOffsetParent(t,e,n){const r=isHTMLElement(e),s=getDocumentElement(e),o=n==="fixed",a=getBoundingClientRect(t,!0,o,e);let l={scrollLeft:0,scrollTop:0};const c=createCoords(0);if(r||!r&&!o)if((getNodeName(e)!=="body"||isOverflowElement(s))&&(l=getNodeScroll(e)),r){const u=getBoundingClientRect(e,!0,o,e);c.x=u.x+e.clientLeft,c.y=u.y+e.clientTop}else s&&(c.x=getWindowScrollBarX(s));return{x:a.left+l.scrollLeft-c.x,y:a.top+l.scrollTop-c.y,width:a.width,height:a.height}}function getTrueOffsetParent(t,e){return!isHTMLElement(t)||getComputedStyle$1(t).position==="fixed"?null:e?e(t):t.offsetParent}function getOffsetParent(t,e){const n=getWindow(t);if(!isHTMLElement(t))return n;let r=getTrueOffsetParent(t,e);for(;r&&isTableElement(r)&&getComputedStyle$1(r).position==="static";)r=getTrueOffsetParent(r,e);return r&&(getNodeName(r)==="html"||getNodeName(r)==="body"&&getComputedStyle$1(r).position==="static"&&!isContainingBlock(r))?n:r||getContainingBlock(t)||n}const getElementRects=async function(t){let{reference:e,floating:n,strategy:r}=t;const s=this.getOffsetParent||getOffsetParent,o=this.getDimensions;return{reference:getRectRelativeToOffsetParent(e,await s(n),r),floating:{x:0,y:0,...await o(n)}}};function isRTL(t){return getComputedStyle$1(t).direction==="rtl"}const platform={convertOffsetParentRelativeRectToViewportRelativeRect,getDocumentElement,getClippingRect,getOffsetParent,getElementRects,getClientRects,getDimensions,getScale,isElement,isRTL};function observeMove(t,e){let n=null,r;const s=getDocumentElement(t);function o(){clearTimeout(r),n&&n.disconnect(),n=null}function a(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),o();const{left:u,top:f,width:p,height:d}=t.getBoundingClientRect();if(l||e(),!p||!d)return;const h=floor(f),g=floor(s.clientWidth-(u+p)),v=floor(s.clientHeight-(f+d)),b=floor(u),y={rootMargin:-h+"px "+-g+"px "+-v+"px "+-b+"px",threshold:max(0,min(1,c))||1};let S=!0;function w($){const E=$[0].intersectionRatio;if(E!==c){if(!S)return a();E?a(!1,E):r=setTimeout(()=>{a(!1,1e-7)},100)}S=!1}try{n=new IntersectionObserver(w,{...y,root:s.ownerDocument})}catch{n=new IntersectionObserver(w,y)}n.observe(t)}return a(!0),o}function autoUpdate(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:o=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,u=unwrapElement(t),f=s||o?[...u?getOverflowAncestors(u):[],...getOverflowAncestors(e)]:[];f.forEach(m=>{s&&m.addEventListener("scroll",n,{passive:!0}),o&&m.addEventListener("resize",n)});const p=u&&l?observeMove(u,n):null;let d=-1,h=null;a&&(h=new ResizeObserver(m=>{let[y]=m;y&&y.target===u&&h&&(h.unobserve(e),cancelAnimationFrame(d),d=requestAnimationFrame(()=>{h&&h.observe(e)})),n()}),u&&!c&&h.observe(u),h.observe(e));let g,v=c?getBoundingClientRect(t):null;c&&b();function b(){const m=getBoundingClientRect(t);v&&(m.x!==v.x||m.y!==v.y||m.width!==v.width||m.height!==v.height)&&n(),v=m,g=requestAnimationFrame(b)}return n(),()=>{f.forEach(m=>{s&&m.removeEventListener("scroll",n),o&&m.removeEventListener("resize",n)}),p&&p(),h&&h.disconnect(),h=null,c&&cancelAnimationFrame(g)}}const computePosition=(t,e,n)=>{const r=new Map,s={platform,...n},o={...s.platform,_c:r};return computePosition$1(t,e,{...s,platform:o})},PositionsSelectOptions={methods:{positionOptions(t,e,{width:n}){t.style.width=n;function r(){computePosition(e.$refs.toggle,t,{placement:"bottom",middleware:[offset({mainAxis:0,crossAxis:-1}),flip()]}).then(({x:o,y:a})=>{Object.assign(t.style,{left:`${Math.round(o)}px`,top:`${Math.round(a)}px`})})}const s=autoUpdate(e.$refs.toggle,t,r);this.$once("hook:destroyed",s)}}};function move(t,e,n){const r=[...t.slice(0,e),...t.slice(e+1,t.length)];return[...r.slice(0,n),t[e],...r.slice(n,r.length)]}const _sfc_main$e={props:{value:{required:!0},itemClass:{default:"sortable-item"},handleClass:{default:"sortable-handle"},mirror:{type:Boolean,default:!0},appendTo:{default:null},options:{default:()=>{}},vertical:{type:Boolean},constrainDimensions:{type:Boolean},delay:{type:Number,default:0},distance:{type:Number,default:0},disabled:{type:Boolean,default:!1},animate:{type:Boolean,default:!0}},computed:{computedOptions(){let t=[];this.animate&&t.push(SwapAnimation);let e=Object.assign({},{draggable:`.${CSS.escape(this.itemClass)}`,handle:`.${CSS.escape(this.handleClass)}`,delay:this.delay,distance:this.distance,swapAnimation:{vertical:this.vertical,horizontal:!this.vertical},plugins:t,mirror:{constrainDimensions:this.constrainDimensions}},this.options);return this.vertical&&(e.mirror.xAxis=!1),this.appendTo&&(e.mirror.appendTo=this.appendTo),e}},provide(){return{itemClass:this.itemClass,handleClass:this.handleClass}},render(){return this.$scopedSlots.default({items:this.value})},mounted(){if(this.disabled)return;const t=new Sortable(this.$el,this.computedOptions);t.on("drag:start",()=>this.$emit("dragstart")),t.on("drag:stop",()=>this.$emit("dragend")),t.on("sortable:stop",({oldIndex:e,newIndex:n})=>{this.$emit("input",move(this.value,e,n))}),this.$on("hook:destroyed",()=>{t.destroy()}),this.mirror===!1&&t.on("mirror:create",e=>e.cancel())}},_sfc_render$e=null,_sfc_staticRenderFns$e=null;var __component__$e=normalizeComponent(_sfc_main$e,_sfc_render$e,_sfc_staticRenderFns$e,!1,null,null,null,null);const SortableList=__component__$e.exports,_sfc_main$d={render(){return this.$slots.default[0]},inject:["itemClass"],mounted(){this.$el.classList.add(this.itemClass)}},_sfc_render$d=null,_sfc_staticRenderFns$d=null;var __component__$d=normalizeComponent(_sfc_main$d,_sfc_render$d,_sfc_staticRenderFns$d,!1,null,null,null,null);const SortableItem=__component__$d.exports;function commonjsRequire(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var uniqid={exports:{}},pid=typeof process<"u"&&process.pid?process.pid.toString(36):"",address="";if(typeof __webpack_require__!="function"&&typeof commonjsRequire<"u"){var mac="",os=require$$0;if(os.networkInterfaces)var networkInterfaces=os.networkInterfaces();if(networkInterfaces){e:for(let t in networkInterfaces){const e=networkInterfaces[t],n=e.length;for(var i=0;i<n;i++)if(e[i]!==void 0&&e[i].mac&&e[i].mac!="00:00:00:00:00:00"){mac=e[i].mac;break e}}address=mac?parseInt(mac.replace(/\:|\D+/gi,"")).toString(36):""}}uniqid.exports=uniqid.exports.default=function(t,e){return(t||"")+address+pid+now().toString(36)+(e||"")};uniqid.exports.process=function(t,e){return(t||"")+pid+now().toString(36)+(e||"")};uniqid.exports.time=function(t,e){return(t||"")+now().toString(36)+(e||"")};function now(){var t=Date.now(),e=now.last||t;return now.last=t>e?t:e+1}const SelectField_vue_vue_type_style_index_0_scoped_452636eb_lang="",_sfc_main$c={mixins:[PositionsSelectOptions],components:{SortableList,SortableItem},props:{items:Array,url:String,typeahead:Boolean,multiple:Boolean,taggable:Boolean,config:Object,readOnly:Boolean,site:String},data(){return{options:[]}},computed:{isTaggable(){return data_get(this.config,"create")===!1?!1:this.taggable},parameters(){return{site:this.site,paginate:!1,columns:"title,id"}}},created(){this.typeahead||this.request()},watch:{parameters(t){this.typeahead||this.request()}},methods:{request(t={}){return t={...this.parameters,...t},this.$axios.get(this.url,{params:t}).then(e=>(this.options=e.data.data,Promise.resolve(e)))},search(t,e){this.typeahead&&(e(!0),this.request({search:t}).then(n=>e(!1)))},input(t){this.multiple||(t=t===null?[]:[t]),this.$emit("input",t)}}};var _sfc_render$c=function(){var e=this,n=e._self._c;return n("div",[n("v-select",{ref:"input",attrs:{label:"title","append-to-body":"","calculate-position":e.positionOptions,"close-on-select":!0,disabled:e.readOnly,multiple:e.multiple,options:e.options,"get-option-key":r=>r.id,"get-option-label":r=>r.title,"create-option":r=>({title:r,id:r}),placeholder:e.__(e.config.placeholder)||e.__("Choose..."),searchable:!0,taggable:e.isTaggable,value:e.items},on:{input:e.input,search:e.search,"search:focus":function(r){return e.$emit("focus")},"search:blur":function(r){return e.$emit("blur")}},scopedSlots:e._u([e.multiple?{key:"selected-option-container",fn:function(){return[n("i",{staticClass:"hidden"})]},proxy:!0}:null,e.multiple?{key:"search",fn:function({events:r,attributes:s}){return[n("input",e._g(e._b({staticClass:"vs__search",attrs:{placeholder:e.__(e.config.placeholder)||e.__("Choose..."),type:"search"}},"input",s,!1),r))]}}:null,{key:"no-options",fn:function(){return[n("div",{staticClass:"text-sm text-gray-700 text-left py-2 px-4",domProps:{textContent:e._s(e.__("No options to choose from."))}})]},proxy:!0},e.multiple?{key:"footer",fn:function({deselect:r}){return[n("sortable-list",{attrs:{"item-class":"sortable-item","handle-class":"sortable-item",value:e.items,distance:5,mirror:!1},on:{input:e.input}},[n("div",{staticClass:"vs__selected-options-outside flex flex-wrap"},e._l(e.items,function(s){return n("span",{key:s.id,staticClass:"vs__selected mt-2",class:{"sortable-item":!e.readOnly}},[e._v(" "+e._s(s.title)+" "),e.readOnly?n("button",{staticClass:"vs__deselect",attrs:{type:"button"}},[n("span",{staticClass:"opacity-50"},[e._v("×")])]):n("button",{staticClass:"vs__deselect",attrs:{type:"button","aria-label":e.__("Deselect option")},on:{click:function(o){return r(s)}}},[n("span",[e._v("×")])])])}),0)])]}}:null],null,!0)})],1)},_sfc_staticRenderFns$c=[],__component__$c=normalizeComponent(_sfc_main$c,_sfc_render$c,_sfc_staticRenderFns$c,!1,null,"452636eb",null,null);const RelationshipSelectField=__component__$c.exports,_sfc_main$b={props:{name:String,value:{required:!0},config:Object,data:Array,maxItems:Number,itemComponent:{type:String,default:"RelatedItem"},itemDataUrl:String,filtersUrl:String,selectionsUrl:String,statusIcons:Boolean,site:String,search:Boolean,canEdit:Boolean,canCreate:Boolean,canReorder:Boolean,readOnly:Boolean,exclusions:Array,creatables:Array,formComponent:String,formComponentProps:Object,mode:{type:String,default:"default"},taggable:Boolean,columns:{type:Array,default:()=>[]},actionUrl:{type:String}},components:{ItemSelector,RelatedItem,CreateButton,RelationshipSelectField,InlineEditForm},data(){let t="";return this.columns.length&&(t=this.columns[0].field),{isSelecting:!1,isCreating:!1,isEditing:!1,itemData:[],initializing:!0,loading:!0,inline:!1,primaryColumn:`cell-${t}`,currentItem:null,sortColumn:null,sortDirection:null}},computed:{items(){return this.value.map(t=>{const e=_.find(this.data,n=>n.id==t);return e||{id:t,title:t}})},maxItemsReached(){return this.value.length>=this.maxItems},canSelectOrCreate(){return!this.readOnly&&!this.maxItemsReached}},mounted(){this.initializeData().then(()=>{this.initializing=!1,this.$nextTick(()=>this.makeSortable())})},beforeDestroy(){this.setLoadingProgress(!1)},watch:{loading:{immediate:!0,handler(t){this.$emit("loading",t),this.setLoadingProgress(t)}},isSelecting(t){this.$emit(t?"focus":"blur")},itemData(t,e){this.initializing||this.$emit("item-data-updated",t)}},methods:{canViewRow(t){return t.viewable&&t.permalink},canEditRow(t){return t.editable},edit(t){this.canEditRow(t)&&(this.isEditing=!0,this.currentItem=t)},itemUpdated(t){this.isEditing=!1,this.currentItem=null,this.initializing=!0;let e=this.data.map(n=>n.id==t.id?{...n,...t}:n);this.$emit("item-data-updated",e),this.initializing=!1},sorted(t,e){this.sortColumn=t,this.sortDirection=e},reordered(t){this.$emit("input",t.map(e=>e.id))},update(t){JSON.stringify(t)!=JSON.stringify(this.value)&&this.$emit("input",t)},remove(t){this.update([...this.value.slice(0,t),...this.value.slice(t+1)])},selectionsUpdated(t){this.getDataForSelections(t).then(()=>{this.update(t)})},initializeData(){return this.data?(this.loading=!1,Promise.resolve()):this.getDataForSelections(this.selections)},getDataForSelections(t){return this.loading=!0,this.$axios.post(this.itemDataUrl,{site:this.site,selections:t}).then(e=>{this.$emit("item-data-updated",e.data.data)}).finally(()=>{this.loading=!1})},makeSortable(){new Sortable(this.$refs.items,{draggable:".item",handle:".item-move",mirror:{constrainDimensions:!0,xAxis:!1},swapAnimation:{vertical:!0},plugins:[SwapAnimation],delay:200}).on("drag:start",t=>{this.value.length===1?t.cancel():this.$emit("focus")}).on("drag:stop",t=>{this.$emit("blur")}).on("sortable:stop",t=>{const e=[...this.value];e.splice(t.newIndex,0,e.splice(t.oldIndex,1)[0]),this.update(e)})},itemCreated(t){this.$emit("item-data-updated",[...this.data,t]),this.update([...this.value,t.id])},selectFieldSelected(t){this.$emit("item-data-updated",t.map(e=>({id:e.id,title:e.title}))),this.update(t.map(e=>e.id))},setLoadingProgress(t){this.$progress.loading(`relationship-fieldtype-${this._uid}`,t)},actionStarted(){this.loading=!0},actionCompleted(t=null,e){this.loading=!1,t!==!1&&(this.$events.$emit("clear-selections"),this.$events.$emit("reset-action-modals"),this.$toast.success(e.message||__("Action completed")))}}};var _sfc_render$b=function(){var e=this,n=e._self._c;return n("div",{staticClass:"relationship-input",class:{"relationship-input-empty":e.items.length==0}},[e.initializing?n("loading-graphic",{attrs:{inline:!0}}):e._e(),e.initializing?e._e():[n("data-list",{staticClass:"mb-2",attrs:{rows:e.items,columns:e.columns,sort:!e.canReorder,sortColumm:e.sortColumn,sortDirection:e.sortDirection}},[n("div",[n("data-list-bulk-actions",{attrs:{url:e.actionUrl},on:{started:e.actionStarted,completed:e.actionCompleted}}),n("data-list-table",{staticClass:"card p-1",attrs:{loading:e.loading,reorderable:e.canReorder,sortable:!e.canReorder},on:{sorted:e.sorted,reordered:e.reordered},scopedSlots:e._u([{key:e.primaryColumn,fn:function({row:r,value:s}){return[n("a",{on:{click:function(o){return e.edit(r)}}},[e._v(e._s(s))])]}},{key:"actions",fn:function({row:r,index:s}){return[e.canViewRow(r)||e.canEditRow(r)?n("dropdown-list",[e.canViewRow(r)?n("dropdown-item",{attrs:{text:e.__("View"),redirect:r.permalink}}):e._e(),e.canEditRow(r)?n("dropdown-item",{attrs:{text:e.__("Edit")},on:{click:function(o){return e.edit(r)}}}):e._e(),e.readOnly?e._e():n("dropdown-item",{staticClass:"warning",attrs:{text:e.__("Unlink")},on:{click:function(o){return e.remove(s)}}}),(e.canViewRow(r)||e.canEditRow(r))&&r.actions.length?n("div",{staticClass:"divider"}):e._e(),n("data-list-inline-actions",{attrs:{item:r.id,url:e.actionUrl,actions:r.actions},on:{started:e.actionStarted,completed:e.actionCompleted}})],1):n("div",{staticClass:"w-10 block"})]}}],null,!0)},[e.items.length===0?n("template",{slot:"tbody-start"},[n("div",{staticClass:"p-2 text-grey-70",domProps:{textContent:e._s(e.__("No results"))}})]):e._e()],2)],1)]),e.isEditing?n("inline-edit-form",{attrs:{item:e.currentItem,component:e.formComponent,"component-props":e.formComponentProps},on:{updated:e.itemUpdated,closed:function(r){e.isEditing=!1,e.currentItem=null}}}):e._e(),e.maxItemsReached&&e.maxItems!=1?n("div",{staticClass:"py-1 text-xs text-grey"},[n("span",[e._v(e._s(e.__("Maximum items selected:")))]),n("span",[e._v(e._s(e.maxItems)+"/"+e._s(e.maxItems))])]):e._e(),e.canSelectOrCreate?n("div",{staticClass:"relationship-input-buttons relative",class:{"mt-2":e.items.length>0}},[n("div",{staticClass:"flex flex-wrap items-center text-sm -mb-1"},[n("div",{staticClass:"relative mb-1"},[e.canCreate&&e.creatables.length?n("create-button",{attrs:{creatables:e.creatables,site:e.site,component:e.formComponent,"component-props":e.formComponentProps},on:{created:e.itemCreated}}):e._e()],1),n("button",{ref:"existing",staticClass:"text-blue hover:text-grey-80 flex mb-1 outline-none",on:{click:function(r){r.preventDefault(),e.isSelecting=!0}}},[n("svg-icon",{staticClass:"mr-sm h-4 w-4 flex items-center",attrs:{name:"hyperlink"}}),e._v(" "+e._s(e.__("Link Existing Item"))+" ")],1)])]):e._e(),e.isSelecting?n("stack",{attrs:{name:"item-selector"},on:{closed:function(r){e.isSelecting=!1}},scopedSlots:e._u([{key:"default",fn:function({close:r}){return n("item-selector",{attrs:{"filters-url":e.filtersUrl,"selections-url":e.selectionsUrl,site:e.site,"initial-columns":e.columns,"initial-sort-column":"title","initial-sort-direction":"asc","initial-selections":e.value,"max-selections":e.maxItems,search:e.search,exclusions:e.exclusions},on:{selected:e.selectionsUpdated,closed:r}})}}],null,!1,2548607770)}):e._e(),e.name?n("input",{attrs:{type:"hidden",name:e.name},domProps:{value:JSON.stringify(e.value)}}):e._e()]],2)},_sfc_staticRenderFns$b=[],__component__$b=normalizeComponent(_sfc_main$b,_sfc_render$b,_sfc_staticRenderFns$b,!1,null,null,null,null);const RelationshipTableMode=__component__$b.exports,_sfc_main$a={components:{InlineEditForm},props:{item:Object,config:Object,statusIcon:Boolean,editable:Boolean,sortable:Boolean,readOnly:Boolean,formComponent:String,formComponentProps:Object},data(){return{isEditing:!1}},methods:{edit(){this.editable&&(this.item.invalid||(this.isEditing=!0))},itemUpdated(t){this.item.title=t.title,this.item.published=t.published,this.item.private=t.private,this.item.status=t.status}}};var _sfc_render$a=function(){var e=this,n=e._self._c;return n(e.config.mode=="table"?"tr":"div",{tag:"div",class:{"sortable-row outline-none":e.config.mode==="table"}},[e.config.mode=="table"?[n("td",[n("a",{on:{click:e.edit}},[e._v(e._s(e.item.title))])]),e.readOnly?e._e():n("td",{staticClass:"actions-column"},[n("dropdown-list",[e.editable?n("dropdown-item",{attrs:{text:e.__("Edit")},on:{click:e.edit}}):e._e(),n("dropdown-item",{staticClass:"warning",attrs:{text:e.__("Delete")},on:{click:function(r){return e.$emit("removed")}}})],1)],1),e.isEditing?n("inline-edit-form",{attrs:{item:e.item,component:e.formComponent,"component-props":e.formComponentProps},on:{updated:e.itemUpdated,closed:function(r){e.isEditing=!1}}}):e._e()]:[e.sortable?n("div",{staticClass:"item-move"},[e._v(" ")]):e._e(),n("div",{staticClass:"item-inner"},[e.statusIcon?n("div",{staticClass:"little-dot mr-1",class:e.item.status}):e._e(),e.item.invalid?n("div",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:e.__("An item with this ID could not be found"),expression:`
                    __('An item with this ID could not be found')
                `,modifiers:{top:!0}}],domProps:{textContent:e._s(e.item.title)}}):e._e(),!e.item.invalid&&e.editable?n("a",{domProps:{textContent:e._s(e.item.title)},on:{click:e.edit}}):e._e(),!e.item.invalid&&!e.editable?n("div",{domProps:{textContent:e._s(e.item.title)}}):e._e(),e.isEditing?n("inline-edit-form",{attrs:{item:e.item,component:e.formComponent,"component-props":e.formComponentProps},on:{updated:e.itemUpdated,closed:function(r){e.isEditing=!1}}}):e._e()],1),e.item.collection?n("div",{staticClass:"text-4xs text-grey-60 uppercase whitespace-no-wrap mr-1",domProps:{textContent:e._s(e.item.collection.title)}}):e._e(),e.readOnly?e._e():n("div",{staticClass:"pr-1 flex items-center"},[n("dropdown-list",[e.editable?n("dropdown-item",{attrs:{text:e.__("Edit")},on:{click:e.edit}}):e._e(),n("dropdown-item",{staticClass:"warning",attrs:{text:e.__("Delete")},on:{click:function(r){return e.$emit("removed")}}})],1)],1)]],2)},_sfc_staticRenderFns$a=[],__component__$a=normalizeComponent(_sfc_main$a,_sfc_render$a,_sfc_staticRenderFns$a,!1,null,null,null,null);const HasManyRelatedItem=__component__$a.exports,SaveButtonOptions_vue_vue_type_style_index_0_lang="",_sfc_main$9={props:{showOptions:{type:Boolean,default:!0},buttonClass:{default:"btn-primary"},preferencesPrefix:{type:String,required:!0}},data(){return{currentOption:null}},computed:{options(){return{options:{listing:__("Go To Listing"),continue_editing:__("Continue Editing"),create_another:__("Create Another")}}},buttonIcon(){switch(!0){case this.currentOption==="listing":return{name:"micro/arrow-go-back",class:"w-3"};case this.currentOption==="continue_editing":return{name:"micro/chevron-down-xs",class:"w-2"};case this.currentOption==="create_another":return{name:"micro/add-circle",class:"w-3"}}},preferencesKey(){return`${this.preferencesPrefix}.after_save`}},mounted(){this.setInitialValue(),this.$watch("currentOption",t=>this.setPreference(t))},methods:{setInitialValue(){this.currentOption=this.$preferences.get(this.preferencesKey)||"listing"},setPreference(t){t!==this.$preferences.get(this.preferencesKey)&&(t==="listing"?this.$preferences.remove(this.preferencesKey):this.$preferences.set(this.preferencesKey,t))}}};var _sfc_render$9=function(){var e=this,n=e._self._c;return n("div",{class:{"btn-group":e.showOptions}},[e._t("default"),e.showOptions?n("dropdown-list",{staticClass:"text-left",scopedSlots:e._u([{key:"trigger",fn:function(){return[n("button",{staticClass:"rounded-l-none",class:e.buttonClass},[e.buttonIcon?n("svg-icon",{class:e.buttonIcon.class,attrs:{name:e.buttonIcon.name}}):e._e()],1)]},proxy:!0}],null,!1,3123076947)},[n("h6",{staticClass:"p-2",domProps:{textContent:e._s(e.__("After Saving"))}}),n("div",{staticClass:"publish-fields px-2"},[n("div",{staticClass:"publish-field save-and-continue-options"},[n("radio-fieldtype",{attrs:{handle:"save_and_continue_options",config:e.options},model:{value:e.currentOption,callback:function(r){e.currentOption=r},expression:"currentOption"}})],1)])]):e._e()],2)},_sfc_staticRenderFns$9=[],__component__$9=normalizeComponent(_sfc_main$9,_sfc_render$9,_sfc_staticRenderFns$9,!1,null,null,null,null);const SaveButtonOptions=__component__$9.exports,HasPreferences$1={data(){return{preferencesPrefix:null}},computed:{hasPreferences(){return this.preferencesPrefix!==null}},methods:{preferencesKey(t){return`${this.preferencesPrefix}.${t}`},getPreference(t){return this.$preferences.get(this.preferencesKey(t))},setPreference(t,e){return this.$preferences.set(this.preferencesKey(t),e)},removePreference(t,e=null){return this.$preferences.remove(this.preferencesKey(t),e)}}},_sfc_main$8={components:{SaveButtonOptions},mixins:[HasPreferences$1],props:{breadcrumbs:Array,initialBlueprint:Object,initialValues:Object,initialMeta:Object,initialTitle:String,action:String,method:String,resourceHasRoutes:Boolean,permalink:String,isCreating:{type:Boolean,default:!1},isInline:{type:Boolean,default:!1},publishContainer:String,readOnly:Boolean,resource:{type:Object,required:!0},createAnotherUrl:String,listingUrl:String},data(){return{blueprint:this.initialBlueprint,values:this.initialValues,meta:this.initialMeta,title:this.initialTitle,preferencesPrefix:`runway.${this.resource.handle}`,errors:{},saving:!1,containerWidth:null,saveKeyBinding:null,quickSave:!1}},computed:{enableSidebar(){return this.blueprint.tabs.map(t=>t.handle).includes("sidebar")},shouldShowSidebar(){return this.enableSidebar},afterSaveOption(){return this.getPreference("after_save")}},mounted(){this.saveKeyBinding=this.$keys.bindGlobal(["mod+s","mod+return"],t=>{t.preventDefault(),this.quickSave=!0,this.save()})},created(){this.publishContainer.includes("relate-fieldtype-inline")&&(this.values.from_inline_publish_form=!0,this.initialBlueprint.tabs.forEach(t=>{t.fields.forEach(e=>{e.type==="belongs_to"&&e.resource===window.Runway.currentResource&&(this.values[e.handle].includes(window.Runway.currentRecord.id)||(this.values[e.handle].push(window.Runway.currentRecord.id),this.meta[e.handle].data=[window.Runway.currentRecord]))})}))},methods:{save(){this.saving=!0,this.clearErrors(),this.$axios({method:this.method,url:this.action,data:this.values}).then(t=>{this.saving=!1,this.$refs.container.saved(),this.$emit("saved",t);let e=this.quickSave?"continue_editing":this.afterSaveOption;if(!this.isInline&&e==="create_another"){this.$nextTick(()=>{window.location=this.createAnotherUrl});return}if(!this.isInline&&e===null){this.$nextTick(()=>{window.location=this.listingUrl});return}this.isCreating&&this.publishContainer==="base"?this.$nextTick(()=>{window.location.href=t.data.redirect}):(this.quickSave=!1,this.$toast.success(__("Saved")))}).catch(t=>this.handleAxiosError(t))},clearErrors(){this.error=null,this.errors={}},handleAxiosError(t){if(this.saving=!1,t.response&&t.response.status===422){const{message:e,errors:n}=t.response.data;this.error=e,this.errors=n,this.$toast.error(e)}else t.response?this.$toast.error(t.response.data.message):this.$toast.error(t||"Something went wrong")},setFieldValue(t,e){this.$refs.container.setFieldValue(t,e)},setFieldMeta(t,e){this.$store.dispatch(`publish/${this.publishContainer}/setFieldMeta`,{handle:t,value:e,user:Statamic.user.id})}},watch:{saving(t){this.$progress.loading("runway-publish-form",t)}},destroyed(){this.saveKeyBinding.destroy()}};var _sfc_render$8=function(){var e=this,n=e._self._c;return n("div",[e.breadcrumbs?n("breadcrumb",{attrs:{url:e.breadcrumbs[0].url,title:e.breadcrumbs[0].text}}):e._e(),n("div",{staticClass:"flex items-center mb-3"},[n("h1",{staticClass:"flex-1"},[n("div",{staticClass:"flex items-center"},[n("span",{domProps:{innerHTML:e._s(e.title)}})])]),e.readOnly?e._e():n("div",{staticClass:"hidden md:flex items-center"},[e.readOnly?e._e():n("save-button-options",{attrs:{"preferences-prefix":e.preferencesPrefix}},[n("button",{staticClass:"btn-primary",attrs:{disabled:e.isSaving},on:{click:function(r){return r.preventDefault(),e.save.apply(null,arguments)}}},[e._v(" "+e._s(e.__("Save"))+" ")])])],1)]),n("publish-container",{ref:"container",attrs:{name:e.publishContainer,blueprint:e.blueprint,values:e.values,meta:e.meta,errors:e.errors},on:{updated:function(r){e.values=r}}},[n("div",[e._l(e.components,function(r){return n(r.name,e._g(e._b({key:r.id,tag:"component",attrs:{container:e.container}},"component",r.props,!1),r.events))}),n("publish-tabs",{attrs:{"read-only":e.readOnly,"enable-sidebar":e.shouldShowSidebar},on:{updated:e.setFieldValue,"meta-updated":e.setFieldMeta,focus:function(r){return e.$refs.container.$emit("focus",r)},blur:function(r){return e.$refs.container.$emit("blur",r)}},scopedSlots:e._u([{key:"actions",fn:function({shouldShowSidebar:r}){return[n("div",{staticClass:"card p-0",class:{"mb-5":e.resourceHasRoutes&&e.permalink}},[e.resourceHasRoutes&&e.permalink?n("div",{class:{hi:!r}},[n("div",{staticClass:"p-2 flex items-center -mx-1"},[e.permalink?n("a",{staticClass:"flex items-center justify-center btn-flat w-full mx-1 px-1",attrs:{href:e.permalink,target:"_blank"}},[n("svg-icon",{staticClass:"w-5 h-5 mr-1",attrs:{name:"external-link"}}),n("span",[e._v(e._s(e.__("Visit URL")))])],1):e._e()])]):e._e()])]}}])})],2)]),n("div",{staticClass:"md:hidden mt-3 flex items-center"},[e.readOnly?e._e():n("button",{staticClass:"btn-lg btn-primary w-full",attrs:{disabled:e.isSaving},on:{click:function(r){return r.preventDefault(),e.save.apply(null,arguments)}}},[e._v(" "+e._s(e.__("Save"))+" ")])])],1)},_sfc_staticRenderFns$8=[],__component__$8=normalizeComponent(_sfc_main$8,_sfc_render$8,_sfc_staticRenderFns$8,!1,null,null,null,null);const PublishForm=__component__$8.exports,HasActions={methods:{actionStarted(){this.loading=!0},actionCompleted(t=null,e={}){this.loading=!1,t!==!1&&(this.$events.$emit("clear-selections"),this.$events.$emit("reset-action-modals"),e.message!==!1&&this.$toast.success(e.message||__("Action completed")),this.afterActionSuccessfullyCompleted())},afterActionSuccessfullyCompleted(){this.request()}}},HasPagination={props:{initialPerPage:{type:Number,default(){return Statamic.$config.get("paginationSize")}}},data(){return{perPage:this.initialPerPage,page:1}},mounted(){this.setInitialPerPage()},methods:{setInitialPerPage(){this.hasPreferences&&(this.perPage=this.getPreference("per_page")||this.initialPerPage)},changePerPage(t){t=parseInt(t),(this.hasPreferences?this.setPreference("per_page",t!=this.initialPerPage?t:null):Promise.resolve()).then(n=>{this.perPage=t,this.resetPage()})},selectPage(t){this.page=t},resetPage(){this.page=1}}},HasPreferences={data(){return{preferencesPrefix:null}},computed:{hasPreferences(){return this.preferencesPrefix!==null}},methods:{preferencesKey(t){return`${this.preferencesPrefix}.${t}`},getPreference(t){return this.$preferences.get(this.preferencesKey(t))},setPreference(t,e){return this.$preferences.set(this.preferencesKey(t),e)},removePreference(t,e=null){return this.$preferences.remove(this.preferencesKey(t),e)}}},_sfc_main$7={mixins:[HasActions,HasFilters,HasPagination,HasPreferences],props:{initialSortColumn:String,initialSortDirection:String,initialColumns:{type:Array,default:()=>[]},filters:Array,actionUrl:String},data(){return{source:null,initializing:!0,loading:!0,items:[],columns:this.initialColumns,visibleColumns:this.initialColumns.filter(t=>t.visible),sortColumn:this.initialSortColumn,sortDirection:this.initialSortDirection,meta:null}},computed:{parameters(){return Object.assign({sort:this.sortColumn,order:this.sortDirection,page:this.page,perPage:this.perPage,search:this.searchQuery,filters:this.activeFilterParameters,columns:this.visibleColumns.map(t=>t.field).join(",")},this.additionalParameters)},activeFilterParameters(){return utf8btoa(JSON.stringify(this.activeFilters))},additionalParameters(){return{}},shouldRequestFirstPage(){return this.page>1&&this.items.length===0?(this.page=1,!0):!1}},created(){this.autoApplyFilters(this.filters),this.request()},watch:{parameters:{deep:!0,handler(t,e){e.search===t.search&&JSON.stringify(e)!==JSON.stringify(t)&&this.request()}},loading:{immediate:!0,handler(t){this.$progress.loading(this.listingKey,t)}},searchQuery(t){this.sortColumn=null,this.sortDirection=null,this.resetPage(),this.request()}},methods:{request(){if(!this.requestUrl){this.loading=!1;return}this.loading=!0,this.source&&this.source.cancel(),this.source=this.$axios.CancelToken.source(),this.$axios.get(this.requestUrl,{params:this.parameters,cancelToken:this.source.token}).then(t=>{if(this.columns=t.data.meta.columns,this.activeFilterBadges={...t.data.meta.activeFilterBadges},this.items=Object.values(t.data.data),this.meta=t.data.meta,this.shouldRequestFirstPage)return this.request();this.loading=!1,this.initializing=!1,this.afterRequestCompleted(t)}).catch(t=>{this.$axios.isCancel(t)||(this.loading=!1,this.initializing=!1,this.$toast.error(t.response?t.response.data.message:__("Something went wrong"),{duration:null}))})},afterRequestCompleted(t){},sorted(t,e){this.sortColumn=t,this.sortDirection=e},removeRow(t){let e=t.id,n=_.indexOf(this.rows,_.findWhere(this.rows,{id:e}));this.rows.splice(n,1),this.rows.length===0&&location.reload()}}},_sfc_render$7=null,_sfc_staticRenderFns$7=null;var __component__$7=normalizeComponent(_sfc_main$7,_sfc_render$7,_sfc_staticRenderFns$7,!1,null,null,null,null);const Listing=__component__$7.exports;function getDefaults(){return{async:!1,baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,hooks:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}let defaults=getDefaults();function changeDefaults(t){defaults=t}const escapeTest=/[&<>"']/,escapeReplace=new RegExp(escapeTest.source,"g"),escapeTestNoEncode=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode=new RegExp(escapeTestNoEncode.source,"g"),escapeReplacements={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},getEscapeReplacement=t=>escapeReplacements[t];function escape$1(t,e){if(e){if(escapeTest.test(t))return t.replace(escapeReplace,getEscapeReplacement)}else if(escapeTestNoEncode.test(t))return t.replace(escapeReplaceNoEncode,getEscapeReplacement);return t}const unescapeTest=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function unescape$1(t){return t.replace(unescapeTest,(e,n)=>(n=n.toLowerCase(),n==="colon"?":":n.charAt(0)==="#"?n.charAt(1)==="x"?String.fromCharCode(parseInt(n.substring(2),16)):String.fromCharCode(+n.substring(1)):""))}const caret=/(^|[^\[])\^/g;function edit(t,e){t=typeof t=="string"?t:t.source,e=e||"";const n={replace:(r,s)=>(s=s.source||s,s=s.replace(caret,"$1"),t=t.replace(r,s),n),getRegex:()=>new RegExp(t,e)};return n}const nonWordAndColonTest=/[^\w:]/g,originIndependentUrl=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function cleanUrl(t,e,n){if(t){let r;try{r=decodeURIComponent(unescape$1(n)).replace(nonWordAndColonTest,"").toLowerCase()}catch{return null}if(r.indexOf("javascript:")===0||r.indexOf("vbscript:")===0||r.indexOf("data:")===0)return null}e&&!originIndependentUrl.test(n)&&(n=resolveUrl(e,n));try{n=encodeURI(n).replace(/%25/g,"%")}catch{return null}return n}const baseUrls={},justDomain=/^[^:]+:\/*[^/]*$/,protocol=/^([^:]+:)[\s\S]*$/,domain=/^([^:]+:\/*[^/]*)[\s\S]*$/;function resolveUrl(t,e){baseUrls[" "+t]||(justDomain.test(t)?baseUrls[" "+t]=t+"/":baseUrls[" "+t]=rtrim(t,"/",!0)),t=baseUrls[" "+t];const n=t.indexOf(":")===-1;return e.substring(0,2)==="//"?n?e:t.replace(protocol,"$1")+e:e.charAt(0)==="/"?n?e:t.replace(domain,"$1")+e:t+e}const noopTest={exec:function(){}};function splitCells(t,e){const n=t.replace(/\|/g,(o,a,l)=>{let c=!1,u=a;for(;--u>=0&&l[u]==="\\";)c=!c;return c?"|":" |"}),r=n.split(/ \|/);let s=0;if(r[0].trim()||r.shift(),r.length>0&&!r[r.length-1].trim()&&r.pop(),r.length>e)r.splice(e);else for(;r.length<e;)r.push("");for(;s<r.length;s++)r[s]=r[s].trim().replace(/\\\|/g,"|");return r}function rtrim(t,e,n){const r=t.length;if(r===0)return"";let s=0;for(;s<r;){const o=t.charAt(r-s-1);if(o===e&&!n)s++;else if(o!==e&&n)s++;else break}return t.slice(0,r-s)}function findClosingBracket(t,e){if(t.indexOf(e[1])===-1)return-1;const n=t.length;let r=0,s=0;for(;s<n;s++)if(t[s]==="\\")s++;else if(t[s]===e[0])r++;else if(t[s]===e[1]&&(r--,r<0))return s;return-1}function checkDeprecations(t,e){!t||t.silent||(e&&console.warn("marked(): callback is deprecated since version 5.0.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/using_pro#async"),(t.sanitize||t.sanitizer)&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options"),(t.highlight||t.langPrefix!=="language-")&&console.warn("marked(): highlight and langPrefix parameters are deprecated since version 5.0.0, should not be used and will be removed in the future. Instead use https://www.npmjs.com/package/marked-highlight."),t.mangle&&console.warn("marked(): mangle parameter is enabled by default, but is deprecated since version 5.0.0, and will be removed in the future. To clear this warning, install https://www.npmjs.com/package/marked-mangle, or disable by setting `{mangle: false}`."),t.baseUrl&&console.warn("marked(): baseUrl parameter is deprecated since version 5.0.0, should not be used and will be removed in the future. Instead use https://www.npmjs.com/package/marked-base-url."),t.smartypants&&console.warn("marked(): smartypants parameter is deprecated since version 5.0.0, should not be used and will be removed in the future. Instead use https://www.npmjs.com/package/marked-smartypants."),t.xhtml&&console.warn("marked(): xhtml parameter is deprecated since version 5.0.0, should not be used and will be removed in the future. Instead use https://www.npmjs.com/package/marked-xhtml."),(t.headerIds||t.headerPrefix)&&console.warn("marked(): headerIds and headerPrefix parameters enabled by default, but are deprecated since version 5.0.0, and will be removed in the future. To clear this warning, install  https://www.npmjs.com/package/marked-gfm-heading-id, or disable by setting `{headerIds: false}`."))}function outputLink(t,e,n,r){const s=e.href,o=e.title?escape$1(e.title):null,a=t[1].replace(/\\([\[\]])/g,"$1");if(t[0].charAt(0)!=="!"){r.state.inLink=!0;const l={type:"link",raw:n,href:s,title:o,text:a,tokens:r.inlineTokens(a)};return r.state.inLink=!1,l}return{type:"image",raw:n,href:s,title:o,text:escape$1(a)}}function indentCodeCompensation(t,e){const n=t.match(/^(\s+)(?:```)/);if(n===null)return e;const r=n[1];return e.split(`
`).map(s=>{const o=s.match(/^\s+/);if(o===null)return s;const[a]=o;return a.length>=r.length?s.slice(r.length):s}).join(`
`)}class Tokenizer{constructor(e){this.options=e||defaults}space(e){const n=this.rules.block.newline.exec(e);if(n&&n[0].length>0)return{type:"space",raw:n[0]}}code(e){const n=this.rules.block.code.exec(e);if(n){const r=n[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:n[0],codeBlockStyle:"indented",text:this.options.pedantic?r:rtrim(r,`
`)}}}fences(e){const n=this.rules.block.fences.exec(e);if(n){const r=n[0],s=indentCodeCompensation(r,n[3]||"");return{type:"code",raw:r,lang:n[2]?n[2].trim().replace(this.rules.inline._escapes,"$1"):n[2],text:s}}}heading(e){const n=this.rules.block.heading.exec(e);if(n){let r=n[2].trim();if(/#$/.test(r)){const s=rtrim(r,"#");(this.options.pedantic||!s||/ $/.test(s))&&(r=s.trim())}return{type:"heading",raw:n[0],depth:n[1].length,text:r,tokens:this.lexer.inline(r)}}}hr(e){const n=this.rules.block.hr.exec(e);if(n)return{type:"hr",raw:n[0]}}blockquote(e){const n=this.rules.block.blockquote.exec(e);if(n){const r=n[0].replace(/^ *>[ \t]?/gm,""),s=this.lexer.state.top;this.lexer.state.top=!0;const o=this.lexer.blockTokens(r);return this.lexer.state.top=s,{type:"blockquote",raw:n[0],tokens:o,text:r}}}list(e){let n=this.rules.block.list.exec(e);if(n){let r,s,o,a,l,c,u,f,p,d,h,g,v=n[1].trim();const b=v.length>1,m={type:"list",raw:"",ordered:b,start:b?+v.slice(0,-1):"",loose:!1,items:[]};v=b?`\\d{1,9}\\${v.slice(-1)}`:`\\${v}`,this.options.pedantic&&(v=b?v:"[*+-]");const y=new RegExp(`^( {0,3}${v})((?:[	 ][^\\n]*)?(?:\\n|$))`);for(;e&&(g=!1,!(!(n=y.exec(e))||this.rules.block.hr.test(e)));){if(r=n[0],e=e.substring(r.length),f=n[2].split(`
`,1)[0].replace(/^\t+/,w=>" ".repeat(3*w.length)),p=e.split(`
`,1)[0],this.options.pedantic?(a=2,h=f.trimLeft()):(a=n[2].search(/[^ ]/),a=a>4?1:a,h=f.slice(a),a+=n[1].length),c=!1,!f&&/^ *$/.test(p)&&(r+=p+`
`,e=e.substring(p.length+1),g=!0),!g){const w=new RegExp(`^ {0,${Math.min(3,a-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),$=new RegExp(`^ {0,${Math.min(3,a-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),E=new RegExp(`^ {0,${Math.min(3,a-1)}}(?:\`\`\`|~~~)`),x=new RegExp(`^ {0,${Math.min(3,a-1)}}#`);for(;e&&(d=e.split(`
`,1)[0],p=d,this.options.pedantic&&(p=p.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),!(E.test(p)||x.test(p)||w.test(p)||$.test(e)));){if(p.search(/[^ ]/)>=a||!p.trim())h+=`
`+p.slice(a);else{if(c||f.search(/[^ ]/)>=4||E.test(f)||x.test(f)||$.test(f))break;h+=`
`+p}!c&&!p.trim()&&(c=!0),r+=d+`
`,e=e.substring(d.length+1),f=p.slice(a)}}m.loose||(u?m.loose=!0:/\n *\n *$/.test(r)&&(u=!0)),this.options.gfm&&(s=/^\[[ xX]\] /.exec(h),s&&(o=s[0]!=="[ ] ",h=h.replace(/^\[[ xX]\] +/,""))),m.items.push({type:"list_item",raw:r,task:!!s,checked:o,loose:!1,text:h}),m.raw+=r}m.items[m.items.length-1].raw=r.trimRight(),m.items[m.items.length-1].text=h.trimRight(),m.raw=m.raw.trimRight();const S=m.items.length;for(l=0;l<S;l++)if(this.lexer.state.top=!1,m.items[l].tokens=this.lexer.blockTokens(m.items[l].text,[]),!m.loose){const w=m.items[l].tokens.filter(E=>E.type==="space"),$=w.length>0&&w.some(E=>/\n.*\n/.test(E.raw));m.loose=$}if(m.loose)for(l=0;l<S;l++)m.items[l].loose=!0;return m}}html(e){const n=this.rules.block.html.exec(e);if(n){const r={type:"html",block:!0,raw:n[0],pre:!this.options.sanitizer&&(n[1]==="pre"||n[1]==="script"||n[1]==="style"),text:n[0]};if(this.options.sanitize){const s=this.options.sanitizer?this.options.sanitizer(n[0]):escape$1(n[0]);r.type="paragraph",r.text=s,r.tokens=this.lexer.inline(s)}return r}}def(e){const n=this.rules.block.def.exec(e);if(n){const r=n[1].toLowerCase().replace(/\s+/g," "),s=n[2]?n[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline._escapes,"$1"):"",o=n[3]?n[3].substring(1,n[3].length-1).replace(this.rules.inline._escapes,"$1"):n[3];return{type:"def",tag:r,raw:n[0],href:s,title:o}}}table(e){const n=this.rules.block.table.exec(e);if(n){const r={type:"table",header:splitCells(n[1]).map(s=>({text:s})),align:n[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:n[3]&&n[3].trim()?n[3].replace(/\n[ \t]*$/,"").split(`
`):[]};if(r.header.length===r.align.length){r.raw=n[0];let s=r.align.length,o,a,l,c;for(o=0;o<s;o++)/^ *-+: *$/.test(r.align[o])?r.align[o]="right":/^ *:-+: *$/.test(r.align[o])?r.align[o]="center":/^ *:-+ *$/.test(r.align[o])?r.align[o]="left":r.align[o]=null;for(s=r.rows.length,o=0;o<s;o++)r.rows[o]=splitCells(r.rows[o],r.header.length).map(u=>({text:u}));for(s=r.header.length,a=0;a<s;a++)r.header[a].tokens=this.lexer.inline(r.header[a].text);for(s=r.rows.length,a=0;a<s;a++)for(c=r.rows[a],l=0;l<c.length;l++)c[l].tokens=this.lexer.inline(c[l].text);return r}}}lheading(e){const n=this.rules.block.lheading.exec(e);if(n)return{type:"heading",raw:n[0],depth:n[2].charAt(0)==="="?1:2,text:n[1],tokens:this.lexer.inline(n[1])}}paragraph(e){const n=this.rules.block.paragraph.exec(e);if(n){const r=n[1].charAt(n[1].length-1)===`
`?n[1].slice(0,-1):n[1];return{type:"paragraph",raw:n[0],text:r,tokens:this.lexer.inline(r)}}}text(e){const n=this.rules.block.text.exec(e);if(n)return{type:"text",raw:n[0],text:n[0],tokens:this.lexer.inline(n[0])}}escape(e){const n=this.rules.inline.escape.exec(e);if(n)return{type:"escape",raw:n[0],text:escape$1(n[1])}}tag(e){const n=this.rules.inline.tag.exec(e);if(n)return!this.lexer.state.inLink&&/^<a /i.test(n[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(n[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(n[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(n[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:n[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(n[0]):escape$1(n[0]):n[0]}}link(e){const n=this.rules.inline.link.exec(e);if(n){const r=n[2].trim();if(!this.options.pedantic&&/^</.test(r)){if(!/>$/.test(r))return;const a=rtrim(r.slice(0,-1),"\\");if((r.length-a.length)%2===0)return}else{const a=findClosingBracket(n[2],"()");if(a>-1){const c=(n[0].indexOf("!")===0?5:4)+n[1].length+a;n[2]=n[2].substring(0,a),n[0]=n[0].substring(0,c).trim(),n[3]=""}}let s=n[2],o="";if(this.options.pedantic){const a=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(s);a&&(s=a[1],o=a[3])}else o=n[3]?n[3].slice(1,-1):"";return s=s.trim(),/^</.test(s)&&(this.options.pedantic&&!/>$/.test(r)?s=s.slice(1):s=s.slice(1,-1)),outputLink(n,{href:s&&s.replace(this.rules.inline._escapes,"$1"),title:o&&o.replace(this.rules.inline._escapes,"$1")},n[0],this.lexer)}}reflink(e,n){let r;if((r=this.rules.inline.reflink.exec(e))||(r=this.rules.inline.nolink.exec(e))){let s=(r[2]||r[1]).replace(/\s+/g," ");if(s=n[s.toLowerCase()],!s){const o=r[0].charAt(0);return{type:"text",raw:o,text:o}}return outputLink(r,s,r[0],this.lexer)}}emStrong(e,n,r=""){let s=this.rules.inline.emStrong.lDelim.exec(e);if(!s||s[3]&&r.match(/[\p{L}\p{N}]/u))return;if(!(s[1]||s[2]||"")||!r||this.rules.inline.punctuation.exec(r)){const a=s[0].length-1;let l,c,u=a,f=0;const p=s[0][0]==="*"?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(p.lastIndex=0,n=n.slice(-1*e.length+a);(s=p.exec(n))!=null;){if(l=s[1]||s[2]||s[3]||s[4]||s[5]||s[6],!l)continue;if(c=l.length,s[3]||s[4]){u+=c;continue}else if((s[5]||s[6])&&a%3&&!((a+c)%3)){f+=c;continue}if(u-=c,u>0)continue;c=Math.min(c,c+u+f);const d=e.slice(0,a+s.index+c+1);if(Math.min(a,c)%2){const g=d.slice(1,-1);return{type:"em",raw:d,text:g,tokens:this.lexer.inlineTokens(g)}}const h=d.slice(2,-2);return{type:"strong",raw:d,text:h,tokens:this.lexer.inlineTokens(h)}}}}codespan(e){const n=this.rules.inline.code.exec(e);if(n){let r=n[2].replace(/\n/g," ");const s=/[^ ]/.test(r),o=/^ /.test(r)&&/ $/.test(r);return s&&o&&(r=r.substring(1,r.length-1)),r=escape$1(r,!0),{type:"codespan",raw:n[0],text:r}}}br(e){const n=this.rules.inline.br.exec(e);if(n)return{type:"br",raw:n[0]}}del(e){const n=this.rules.inline.del.exec(e);if(n)return{type:"del",raw:n[0],text:n[2],tokens:this.lexer.inlineTokens(n[2])}}autolink(e,n){const r=this.rules.inline.autolink.exec(e);if(r){let s,o;return r[2]==="@"?(s=escape$1(this.options.mangle?n(r[1]):r[1]),o="mailto:"+s):(s=escape$1(r[1]),o=s),{type:"link",raw:r[0],text:s,href:o,tokens:[{type:"text",raw:s,text:s}]}}}url(e,n){let r;if(r=this.rules.inline.url.exec(e)){let s,o;if(r[2]==="@")s=escape$1(this.options.mangle?n(r[0]):r[0]),o="mailto:"+s;else{let a;do a=r[0],r[0]=this.rules.inline._backpedal.exec(r[0])[0];while(a!==r[0]);s=escape$1(r[0]),r[1]==="www."?o="http://"+r[0]:o=r[0]}return{type:"link",raw:r[0],text:s,href:o,tokens:[{type:"text",raw:s,text:s}]}}}inlineText(e,n){const r=this.rules.inline.text.exec(e);if(r){let s;return this.lexer.state.inRawBlock?s=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(r[0]):escape$1(r[0]):r[0]:s=escape$1(this.options.smartypants?n(r[0]):r[0]),{type:"text",raw:r[0],text:s}}}}const block={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:noopTest,lheading:/^((?:(?!^bull ).|\n(?!\n|bull ))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/};block._label=/(?!\s*\])(?:\\.|[^\[\]\\])+/;block._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/;block.def=edit(block.def).replace("label",block._label).replace("title",block._title).getRegex();block.bullet=/(?:[*+-]|\d{1,9}[.)])/;block.listItemStart=edit(/^( *)(bull) */).replace("bull",block.bullet).getRegex();block.list=edit(block.list).replace(/bull/g,block.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+block.def.source+")").getRegex();block._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul";block._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/;block.html=edit(block.html,"i").replace("comment",block._comment).replace("tag",block._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex();block.lheading=edit(block.lheading).replace(/bull/g,block.bullet).getRegex();block.paragraph=edit(block._paragraph).replace("hr",block.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",block._tag).getRegex();block.blockquote=edit(block.blockquote).replace("paragraph",block.paragraph).getRegex();block.normal={...block};block.gfm={...block.normal,table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"};block.gfm.table=edit(block.gfm.table).replace("hr",block.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",block._tag).getRegex();block.gfm.paragraph=edit(block._paragraph).replace("hr",block.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",block.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",block._tag).getRegex();block.pedantic={...block.normal,html:edit(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",block._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:noopTest,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:edit(block.normal._paragraph).replace("hr",block.hr).replace("heading",` *#{1,6} *[^
]`).replace("lheading",block.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()};const inline={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:noopTest,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,rDelimAst:/^[^_*]*?__[^_*]*?\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\*)[punct](\*+)(?=[\s]|$)|[^punct\s](\*+)(?!\*)(?=[punct\s]|$)|(?!\*)[punct\s](\*+)(?=[^punct\s])|[\s](\*+)(?!\*)(?=[punct])|(?!\*)[punct](\*+)(?!\*)(?=[punct])|[^punct\s](\*+)(?=[^punct\s])/,rDelimUnd:/^[^_*]*?\*\*[^_*]*?_[^_*]*?(?=\*\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\s]|$)|[^punct\s](_+)(?!_)(?=[punct\s]|$)|(?!_)[punct\s](_+)(?=[^punct\s])|[\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:noopTest,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^((?![*_])[\spunctuation])/};inline._punctuation="\\p{P}$+<=>`^|~";inline.punctuation=edit(inline.punctuation,"u").replace(/punctuation/g,inline._punctuation).getRegex();inline.blockSkip=/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g;inline.anyPunctuation=/\\[punct]/g;inline._escapes=/\\([punct])/g;inline._comment=edit(block._comment).replace("(?:-->|$)","-->").getRegex();inline.emStrong.lDelim=edit(inline.emStrong.lDelim,"u").replace(/punct/g,inline._punctuation).getRegex();inline.emStrong.rDelimAst=edit(inline.emStrong.rDelimAst,"gu").replace(/punct/g,inline._punctuation).getRegex();inline.emStrong.rDelimUnd=edit(inline.emStrong.rDelimUnd,"gu").replace(/punct/g,inline._punctuation).getRegex();inline.anyPunctuation=edit(inline.anyPunctuation,"gu").replace(/punct/g,inline._punctuation).getRegex();inline._escapes=edit(inline._escapes,"gu").replace(/punct/g,inline._punctuation).getRegex();inline._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/;inline._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/;inline.autolink=edit(inline.autolink).replace("scheme",inline._scheme).replace("email",inline._email).getRegex();inline._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/;inline.tag=edit(inline.tag).replace("comment",inline._comment).replace("attribute",inline._attribute).getRegex();inline._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/;inline._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/;inline._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/;inline.link=edit(inline.link).replace("label",inline._label).replace("href",inline._href).replace("title",inline._title).getRegex();inline.reflink=edit(inline.reflink).replace("label",inline._label).replace("ref",block._label).getRegex();inline.nolink=edit(inline.nolink).replace("ref",block._label).getRegex();inline.reflinkSearch=edit(inline.reflinkSearch,"g").replace("reflink",inline.reflink).replace("nolink",inline.nolink).getRegex();inline.normal={...inline};inline.pedantic={...inline.normal,strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:edit(/^!?\[(label)\]\((.*?)\)/).replace("label",inline._label).getRegex(),reflink:edit(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",inline._label).getRegex()};inline.gfm={...inline.normal,escape:edit(inline.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/};inline.gfm.url=edit(inline.gfm.url,"i").replace("email",inline.gfm._extended_email).getRegex();inline.breaks={...inline.gfm,br:edit(inline.br).replace("{2,}","*").getRegex(),text:edit(inline.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()};function smartypants(t){return t.replace(/---/g,"—").replace(/--/g,"–").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…")}function mangle(t){let e="",n,r;const s=t.length;for(n=0;n<s;n++)r=t.charCodeAt(n),Math.random()>.5&&(r="x"+r.toString(16)),e+="&#"+r+";";return e}class Lexer{constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||defaults,this.options.tokenizer=this.options.tokenizer||new Tokenizer,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const n={block:block.normal,inline:inline.normal};this.options.pedantic?(n.block=block.pedantic,n.inline=inline.pedantic):this.options.gfm&&(n.block=block.gfm,this.options.breaks?n.inline=inline.breaks:n.inline=inline.gfm),this.tokenizer.rules=n}static get rules(){return{block,inline}}static lex(e,n){return new Lexer(n).lex(e)}static lexInline(e,n){return new Lexer(n).inlineTokens(e)}lex(e){e=e.replace(/\r\n|\r/g,`
`),this.blockTokens(e,this.tokens);let n;for(;n=this.inlineQueue.shift();)this.inlineTokens(n.src,n.tokens);return this.tokens}blockTokens(e,n=[]){this.options.pedantic?e=e.replace(/\t/g,"    ").replace(/^ +$/gm,""):e=e.replace(/^( *)(\t+)/gm,(l,c,u)=>c+"    ".repeat(u.length));let r,s,o,a;for(;e;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(l=>(r=l.call({lexer:this},e,n))?(e=e.substring(r.raw.length),n.push(r),!0):!1))){if(r=this.tokenizer.space(e)){e=e.substring(r.raw.length),r.raw.length===1&&n.length>0?n[n.length-1].raw+=`
`:n.push(r);continue}if(r=this.tokenizer.code(e)){e=e.substring(r.raw.length),s=n[n.length-1],s&&(s.type==="paragraph"||s.type==="text")?(s.raw+=`
`+r.raw,s.text+=`
`+r.text,this.inlineQueue[this.inlineQueue.length-1].src=s.text):n.push(r);continue}if(r=this.tokenizer.fences(e)){e=e.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.heading(e)){e=e.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.hr(e)){e=e.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.blockquote(e)){e=e.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.list(e)){e=e.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.html(e)){e=e.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.def(e)){e=e.substring(r.raw.length),s=n[n.length-1],s&&(s.type==="paragraph"||s.type==="text")?(s.raw+=`
`+r.raw,s.text+=`
`+r.raw,this.inlineQueue[this.inlineQueue.length-1].src=s.text):this.tokens.links[r.tag]||(this.tokens.links[r.tag]={href:r.href,title:r.title});continue}if(r=this.tokenizer.table(e)){e=e.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.lheading(e)){e=e.substring(r.raw.length),n.push(r);continue}if(o=e,this.options.extensions&&this.options.extensions.startBlock){let l=1/0;const c=e.slice(1);let u;this.options.extensions.startBlock.forEach(function(f){u=f.call({lexer:this},c),typeof u=="number"&&u>=0&&(l=Math.min(l,u))}),l<1/0&&l>=0&&(o=e.substring(0,l+1))}if(this.state.top&&(r=this.tokenizer.paragraph(o))){s=n[n.length-1],a&&s.type==="paragraph"?(s.raw+=`
`+r.raw,s.text+=`
`+r.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=s.text):n.push(r),a=o.length!==e.length,e=e.substring(r.raw.length);continue}if(r=this.tokenizer.text(e)){e=e.substring(r.raw.length),s=n[n.length-1],s&&s.type==="text"?(s.raw+=`
`+r.raw,s.text+=`
`+r.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=s.text):n.push(r);continue}if(e){const l="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(l);break}else throw new Error(l)}}return this.state.top=!0,n}inline(e,n=[]){return this.inlineQueue.push({src:e,tokens:n}),n}inlineTokens(e,n=[]){let r,s,o,a=e,l,c,u;if(this.tokens.links){const f=Object.keys(this.tokens.links);if(f.length>0)for(;(l=this.tokenizer.rules.inline.reflinkSearch.exec(a))!=null;)f.includes(l[0].slice(l[0].lastIndexOf("[")+1,-1))&&(a=a.slice(0,l.index)+"["+"a".repeat(l[0].length-2)+"]"+a.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(l=this.tokenizer.rules.inline.blockSkip.exec(a))!=null;)a=a.slice(0,l.index)+"["+"a".repeat(l[0].length-2)+"]"+a.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(l=this.tokenizer.rules.inline.anyPunctuation.exec(a))!=null;)a=a.slice(0,l.index)+"++"+a.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;e;)if(c||(u=""),c=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(f=>(r=f.call({lexer:this},e,n))?(e=e.substring(r.raw.length),n.push(r),!0):!1))){if(r=this.tokenizer.escape(e)){e=e.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.tag(e)){e=e.substring(r.raw.length),s=n[n.length-1],s&&r.type==="text"&&s.type==="text"?(s.raw+=r.raw,s.text+=r.text):n.push(r);continue}if(r=this.tokenizer.link(e)){e=e.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(r.raw.length),s=n[n.length-1],s&&r.type==="text"&&s.type==="text"?(s.raw+=r.raw,s.text+=r.text):n.push(r);continue}if(r=this.tokenizer.emStrong(e,a,u)){e=e.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.codespan(e)){e=e.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.br(e)){e=e.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.del(e)){e=e.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.autolink(e,mangle)){e=e.substring(r.raw.length),n.push(r);continue}if(!this.state.inLink&&(r=this.tokenizer.url(e,mangle))){e=e.substring(r.raw.length),n.push(r);continue}if(o=e,this.options.extensions&&this.options.extensions.startInline){let f=1/0;const p=e.slice(1);let d;this.options.extensions.startInline.forEach(function(h){d=h.call({lexer:this},p),typeof d=="number"&&d>=0&&(f=Math.min(f,d))}),f<1/0&&f>=0&&(o=e.substring(0,f+1))}if(r=this.tokenizer.inlineText(o,smartypants)){e=e.substring(r.raw.length),r.raw.slice(-1)!=="_"&&(u=r.raw.slice(-1)),c=!0,s=n[n.length-1],s&&s.type==="text"?(s.raw+=r.raw,s.text+=r.text):n.push(r);continue}if(e){const f="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(f);break}else throw new Error(f)}}return n}}class Renderer{constructor(e){this.options=e||defaults}code(e,n,r){const s=(n||"").match(/\S*/)[0];if(this.options.highlight){const o=this.options.highlight(e,s);o!=null&&o!==e&&(r=!0,e=o)}return e=e.replace(/\n$/,"")+`
`,s?'<pre><code class="'+this.options.langPrefix+escape$1(s)+'">'+(r?e:escape$1(e,!0))+`</code></pre>
`:"<pre><code>"+(r?e:escape$1(e,!0))+`</code></pre>
`}blockquote(e){return`<blockquote>
${e}</blockquote>
`}html(e,n){return e}heading(e,n,r,s){if(this.options.headerIds){const o=this.options.headerPrefix+s.slug(r);return`<h${n} id="${o}">${e}</h${n}>
`}return`<h${n}>${e}</h${n}>
`}hr(){return this.options.xhtml?`<hr/>
`:`<hr>
`}list(e,n,r){const s=n?"ol":"ul",o=n&&r!==1?' start="'+r+'"':"";return"<"+s+o+`>
`+e+"</"+s+`>
`}listitem(e){return`<li>${e}</li>
`}checkbox(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "}paragraph(e){return`<p>${e}</p>
`}table(e,n){return n&&(n=`<tbody>${n}</tbody>`),`<table>
<thead>
`+e+`</thead>
`+n+`</table>
`}tablerow(e){return`<tr>
${e}</tr>
`}tablecell(e,n){const r=n.header?"th":"td";return(n.align?`<${r} align="${n.align}">`:`<${r}>`)+e+`</${r}>
`}strong(e){return`<strong>${e}</strong>`}em(e){return`<em>${e}</em>`}codespan(e){return`<code>${e}</code>`}br(){return this.options.xhtml?"<br/>":"<br>"}del(e){return`<del>${e}</del>`}link(e,n,r){if(e=cleanUrl(this.options.sanitize,this.options.baseUrl,e),e===null)return r;let s='<a href="'+e+'"';return n&&(s+=' title="'+n+'"'),s+=">"+r+"</a>",s}image(e,n,r){if(e=cleanUrl(this.options.sanitize,this.options.baseUrl,e),e===null)return r;let s=`<img src="${e}" alt="${r}"`;return n&&(s+=` title="${n}"`),s+=this.options.xhtml?"/>":">",s}text(e){return e}}class TextRenderer{strong(e){return e}em(e){return e}codespan(e){return e}del(e){return e}html(e){return e}text(e){return e}link(e,n,r){return""+r}image(e,n,r){return""+r}br(){return""}}class Slugger{constructor(){this.seen={}}serialize(e){return e.toLowerCase().trim().replace(/<[!\/a-z].*?>/ig,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")}getNextSafeSlug(e,n){let r=e,s=0;if(this.seen.hasOwnProperty(r)){s=this.seen[e];do s++,r=e+"-"+s;while(this.seen.hasOwnProperty(r))}return n||(this.seen[e]=s,this.seen[r]=0),r}slug(e,n={}){const r=this.serialize(e);return this.getNextSafeSlug(r,n.dryrun)}}class Parser{constructor(e){this.options=e||defaults,this.options.renderer=this.options.renderer||new Renderer,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new TextRenderer,this.slugger=new Slugger}static parse(e,n){return new Parser(n).parse(e)}static parseInline(e,n){return new Parser(n).parseInline(e)}parse(e,n=!0){let r="",s,o,a,l,c,u,f,p,d,h,g,v,b,m,y,S,w,$,E;const x=e.length;for(s=0;s<x;s++){if(h=e[s],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[h.type]&&(E=this.options.extensions.renderers[h.type].call({parser:this},h),E!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(h.type))){r+=E||"";continue}switch(h.type){case"space":continue;case"hr":{r+=this.renderer.hr();continue}case"heading":{r+=this.renderer.heading(this.parseInline(h.tokens),h.depth,unescape$1(this.parseInline(h.tokens,this.textRenderer)),this.slugger);continue}case"code":{r+=this.renderer.code(h.text,h.lang,h.escaped);continue}case"table":{for(p="",f="",l=h.header.length,o=0;o<l;o++)f+=this.renderer.tablecell(this.parseInline(h.header[o].tokens),{header:!0,align:h.align[o]});for(p+=this.renderer.tablerow(f),d="",l=h.rows.length,o=0;o<l;o++){for(u=h.rows[o],f="",c=u.length,a=0;a<c;a++)f+=this.renderer.tablecell(this.parseInline(u[a].tokens),{header:!1,align:h.align[a]});d+=this.renderer.tablerow(f)}r+=this.renderer.table(p,d);continue}case"blockquote":{d=this.parse(h.tokens),r+=this.renderer.blockquote(d);continue}case"list":{for(g=h.ordered,v=h.start,b=h.loose,l=h.items.length,d="",o=0;o<l;o++)y=h.items[o],S=y.checked,w=y.task,m="",y.task&&($=this.renderer.checkbox(S),b?y.tokens.length>0&&y.tokens[0].type==="paragraph"?(y.tokens[0].text=$+" "+y.tokens[0].text,y.tokens[0].tokens&&y.tokens[0].tokens.length>0&&y.tokens[0].tokens[0].type==="text"&&(y.tokens[0].tokens[0].text=$+" "+y.tokens[0].tokens[0].text)):y.tokens.unshift({type:"text",text:$}):m+=$),m+=this.parse(y.tokens,b),d+=this.renderer.listitem(m,w,S);r+=this.renderer.list(d,g,v);continue}case"html":{r+=this.renderer.html(h.text,h.block);continue}case"paragraph":{r+=this.renderer.paragraph(this.parseInline(h.tokens));continue}case"text":{for(d=h.tokens?this.parseInline(h.tokens):h.text;s+1<x&&e[s+1].type==="text";)h=e[++s],d+=`
`+(h.tokens?this.parseInline(h.tokens):h.text);r+=n?this.renderer.paragraph(d):d;continue}default:{const C='Token with "'+h.type+'" type was not found.';if(this.options.silent){console.error(C);return}else throw new Error(C)}}}return r}parseInline(e,n){n=n||this.renderer;let r="",s,o,a;const l=e.length;for(s=0;s<l;s++){if(o=e[s],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[o.type]&&(a=this.options.extensions.renderers[o.type].call({parser:this},o),a!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(o.type))){r+=a||"";continue}switch(o.type){case"escape":{r+=n.text(o.text);break}case"html":{r+=n.html(o.text);break}case"link":{r+=n.link(o.href,o.title,this.parseInline(o.tokens,n));break}case"image":{r+=n.image(o.href,o.title,o.text);break}case"strong":{r+=n.strong(this.parseInline(o.tokens,n));break}case"em":{r+=n.em(this.parseInline(o.tokens,n));break}case"codespan":{r+=n.codespan(o.text);break}case"br":{r+=n.br();break}case"del":{r+=n.del(this.parseInline(o.tokens,n));break}case"text":{r+=n.text(o.text);break}default:{const c='Token with "'+o.type+'" type was not found.';if(this.options.silent){console.error(c);return}else throw new Error(c)}}}return r}}class Hooks{constructor(e){this.options=e||defaults}preprocess(e){return e}postprocess(e){return e}}P(Hooks,"passThroughHooks",new Set(["preprocess","postprocess"]));var N,U,z,V;class Marked{constructor(...e){B(this,N);B(this,z);P(this,"defaults",getDefaults());P(this,"options",this.setOptions);P(this,"parse",L(this,N,U).call(this,Lexer.lex,Parser.parse));P(this,"parseInline",L(this,N,U).call(this,Lexer.lexInline,Parser.parseInline));P(this,"Parser",Parser);P(this,"parser",Parser.parse);P(this,"Renderer",Renderer);P(this,"TextRenderer",TextRenderer);P(this,"Lexer",Lexer);P(this,"lexer",Lexer.lex);P(this,"Tokenizer",Tokenizer);P(this,"Slugger",Slugger);P(this,"Hooks",Hooks);this.use(...e)}walkTokens(e,n){let r=[];for(const s of e)switch(r=r.concat(n.call(this,s)),s.type){case"table":{for(const o of s.header)r=r.concat(this.walkTokens(o.tokens,n));for(const o of s.rows)for(const a of o)r=r.concat(this.walkTokens(a.tokens,n));break}case"list":{r=r.concat(this.walkTokens(s.items,n));break}default:this.defaults.extensions&&this.defaults.extensions.childTokens&&this.defaults.extensions.childTokens[s.type]?this.defaults.extensions.childTokens[s.type].forEach(o=>{r=r.concat(this.walkTokens(s[o],n))}):s.tokens&&(r=r.concat(this.walkTokens(s.tokens,n)))}return r}use(...e){const n=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(r=>{const s={...r};if(s.async=this.defaults.async||s.async||!1,r.extensions&&(r.extensions.forEach(o=>{if(!o.name)throw new Error("extension name required");if(o.renderer){const a=n.renderers[o.name];a?n.renderers[o.name]=function(...l){let c=o.renderer.apply(this,l);return c===!1&&(c=a.apply(this,l)),c}:n.renderers[o.name]=o.renderer}if(o.tokenizer){if(!o.level||o.level!=="block"&&o.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");n[o.level]?n[o.level].unshift(o.tokenizer):n[o.level]=[o.tokenizer],o.start&&(o.level==="block"?n.startBlock?n.startBlock.push(o.start):n.startBlock=[o.start]:o.level==="inline"&&(n.startInline?n.startInline.push(o.start):n.startInline=[o.start]))}o.childTokens&&(n.childTokens[o.name]=o.childTokens)}),s.extensions=n),r.renderer){const o=this.defaults.renderer||new Renderer(this.defaults);for(const a in r.renderer){const l=o[a];o[a]=(...c)=>{let u=r.renderer[a].apply(o,c);return u===!1&&(u=l.apply(o,c)),u}}s.renderer=o}if(r.tokenizer){const o=this.defaults.tokenizer||new Tokenizer(this.defaults);for(const a in r.tokenizer){const l=o[a];o[a]=(...c)=>{let u=r.tokenizer[a].apply(o,c);return u===!1&&(u=l.apply(o,c)),u}}s.tokenizer=o}if(r.hooks){const o=this.defaults.hooks||new Hooks;for(const a in r.hooks){const l=o[a];Hooks.passThroughHooks.has(a)?o[a]=c=>{if(this.defaults.async)return Promise.resolve(r.hooks[a].call(o,c)).then(f=>l.call(o,f));const u=r.hooks[a].call(o,c);return l.call(o,u)}:o[a]=(...c)=>{let u=r.hooks[a].apply(o,c);return u===!1&&(u=l.apply(o,c)),u}}s.hooks=o}if(r.walkTokens){const o=this.defaults.walkTokens;s.walkTokens=function(a){let l=[];return l.push(r.walkTokens.call(this,a)),o&&(l=l.concat(o.call(this,a))),l}}this.defaults={...this.defaults,...s}}),this}setOptions(e){return this.defaults={...this.defaults,...e},this}}N=new WeakSet,U=function(e,n){return(r,s,o)=>{typeof s=="function"&&(o=s,s=null);const a={...s};s={...this.defaults,...a};const l=L(this,z,V).call(this,s.silent,s.async,o);if(typeof r>"u"||r===null)return l(new Error("marked(): input parameter is undefined or null"));if(typeof r!="string")return l(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(r)+", string expected"));if(checkDeprecations(s,o),s.hooks&&(s.hooks.options=s),o){const c=s.highlight;let u;try{s.hooks&&(r=s.hooks.preprocess(r)),u=e(r,s)}catch(d){return l(d)}const f=d=>{let h;if(!d)try{s.walkTokens&&this.walkTokens(u,s.walkTokens),h=n(u,s),s.hooks&&(h=s.hooks.postprocess(h))}catch(g){d=g}return s.highlight=c,d?l(d):o(null,h)};if(!c||c.length<3||(delete s.highlight,!u.length))return f();let p=0;this.walkTokens(u,d=>{d.type==="code"&&(p++,setTimeout(()=>{c(d.text,d.lang,(h,g)=>{if(h)return f(h);g!=null&&g!==d.text&&(d.text=g,d.escaped=!0),p--,p===0&&f()})},0))}),p===0&&f();return}if(s.async)return Promise.resolve(s.hooks?s.hooks.preprocess(r):r).then(c=>e(c,s)).then(c=>s.walkTokens?Promise.all(this.walkTokens(c,s.walkTokens)).then(()=>c):c).then(c=>n(c,s)).then(c=>s.hooks?s.hooks.postprocess(c):c).catch(l);try{s.hooks&&(r=s.hooks.preprocess(r));const c=e(r,s);s.walkTokens&&this.walkTokens(c,s.walkTokens);let u=n(c,s);return s.hooks&&(u=s.hooks.postprocess(u)),u}catch(c){return l(c)}}},z=new WeakSet,V=function(e,n,r){return s=>{if(s.message+=`
Please report this to https://github.com/markedjs/marked.`,e){const o="<p>An error occurred:</p><pre>"+escape$1(s.message+"",!0)+"</pre>";if(n)return Promise.resolve(o);if(r){r(null,o);return}return o}if(n)return Promise.reject(s);if(r){r(s);return}throw s}};const markedInstance=new Marked(defaults);function marked(t,e,n){return markedInstance.parse(t,e,n)}marked.options=marked.setOptions=function(t){return markedInstance.setOptions(t),marked.defaults=markedInstance.defaults,changeDefaults(marked.defaults),marked};marked.getDefaults=getDefaults;marked.defaults=defaults;marked.use=function(...t){return markedInstance.use(...t),marked.defaults=markedInstance.defaults,changeDefaults(marked.defaults),marked};marked.walkTokens=function(t,e){return markedInstance.walkTokens(t,e)};marked.parseInline=markedInstance.parseInline;marked.Parser=Parser;marked.parser=Parser.parse;marked.Renderer=Renderer;marked.TextRenderer=TextRenderer;marked.Lexer=Lexer;marked.lexer=Lexer.lex;marked.Tokenizer=Tokenizer;marked.Slugger=Slugger;marked.Hooks=Hooks;marked.parse=marked;marked.options;marked.setOptions;marked.use;marked.walkTokens;marked.parseInline;Parser.parse;Lexer.lex;const _sfc_main$6={props:{config:{type:Object,required:!0},value:{required:!0},meta:{},errors:{type:Array},readOnly:Boolean,syncable:Boolean,namePrefix:String,fieldPathPrefix:String},inject:{storeName:{default:null},isInsideConfigFields:{default:!1}},computed:{fieldtypeComponent(){return`${this.config.component||this.config.type}-fieldtype`},fieldtypeComponentExists(){return Vue.options.components[this.fieldtypeComponent]!==void 0},instructions(){return this.config.instructions?this.renderMarkdownAndLinks(__(this.config.instructions)):null},hasError(){return this.errors&&this.errors.length>0},isReadOnly(){return this.storeState.isRoot===!1&&!this.config.localizable?!0:this.isLocked||this.readOnly||this.config.visibility==="read_only"||!1},isLocalizable(){return this.$config.get("sites").length>1&&this.config.localizable},isTab(){return this.config.type==="tab"},classes(){return["form-group publish-field","publish-field__"+this.config.handle,`${this.config.component||this.config.type}-fieldtype`,,this.isReadOnly?"read-only-field":"",this.isInsideConfigFields?"config-field":`${tailwind_width_class(this.config.width)}`,this.config.classes||"",this.config.full_width_setting?"full-width-setting":"",{"has-error":this.hasError||this.hasNestedError}]},fieldId(){return"field_"+this.config.handle},locks(){return this.storeState.fieldLocks||{}},isLocked(){return Object.keys(this.locks).includes(this.config.handle)},lockingUser(){if(this.isLocked){let t=this.locks[this.config.handle];if(typeof t=="object")return t}},isSynced(){if(this.syncable)return!this.storeState.localizedFields.includes(this.config.handle)},storeState(){return this.$store.state.publish[this.storeName]||{}},hasNestedError(){const t=`${this.fieldPathPrefix||this.config.handle}.`;return Object.keys(this.storeState.errors??[]).some(e=>e.startsWith(t))},labelText(){return this.config.display||Vue.$options.filters.titleize(Vue.$options.filters.deslugify(this.config.handle))},showLabelText(){return!this.config.hide_display},showLabel(){return this.showLabelText||this.isReadOnly||this.config.required||this.isLocked||this.isLocalizable||this.syncable}},methods:{focused(){this.isLocked||this.$emit("focus")},blurred(){this.isLocked||this.$emit("blur")},renderMarkdownAndLinks(t){var e=new marked.Renderer;return e.link=function(n,r,s){var o=marked.Renderer.prototype.link.call(this,n,r,s);return o.replace("<a","<a target='_blank' ")},marked.setOptions({renderer:e}),marked(t)}}};var _sfc_render$6=function(){var e=this,n=e._self._c;return n("publish-field-meta",{attrs:{config:e.config,"initial-value":e.value,"initial-meta":e.meta},scopedSlots:e._u([{key:"default",fn:function({meta:r,value:s,loading:o}){return n("div",{class:e.classes},[n("div",{staticClass:"field-inner"},[e.showLabel?n("label",{staticClass:"publish-field-label",class:{"font-bold":e.config.bold},attrs:{for:e.fieldId}},[e.showLabelText?n("span",{directives:[{name:"tooltip",rawName:"v-tooltip",value:{content:e.config.handle,delay:500,autoHide:!1},expression:"{content: config.handle, delay: 500, autoHide: false}"}],staticClass:"mr-1",class:{"text-gray-600":e.syncable&&e.isSynced},domProps:{textContent:e._s(e.__(e.labelText))}}):e._e(),e.config.required?n("i",{staticClass:"required mr-1"},[e._v("*")]):e._e(),e.isLocked?n("avatar",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.lockingUser.name,expression:"lockingUser.name"}],staticClass:"w-4 rounded-full -mt-px ml-2 mr-2",attrs:{user:e.lockingUser}}):e._e(),e.isReadOnly&&!e.isTab?n("span",{staticClass:"text-gray-500 font-normal text-2xs mr-1"},[e._v(" "+e._s(e.isLocked?e.__("Locked"):e.__("Read Only"))+" ")]):e._e(),e.isLocalizable&&!e.isTab?n("svg-icon",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:e.__("Localizable field"),expression:"__('Localizable field')",modifiers:{top:!0}}],staticClass:"h-4 mr-1 w-4 text-gray-600",attrs:{name:"translate"}}):e._e(),!e.isReadOnly&&!e.isTab?n("button",{directives:[{name:"show",rawName:"v-show",value:e.syncable&&e.isSynced,expression:"syncable && isSynced"}],staticClass:"outline-none",class:{flex:e.syncable&&e.isSynced},on:{click:function(a){return e.$emit("desynced")}}},[n("svg-icon",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:e.__("messages.field_synced_with_origin"),expression:"__('messages.field_synced_with_origin')",modifiers:{top:!0}}],staticClass:"h-4 w-4 mr-1.5 mb-1 text-gray-600",attrs:{name:"light/hyperlink"}})],1):e._e(),!e.isReadOnly&&!e.isTab?n("button",{directives:[{name:"show",rawName:"v-show",value:e.syncable&&!e.isSynced,expression:"syncable && !isSynced"}],staticClass:"outline-none",class:{flex:e.syncable&&!e.isSynced},on:{click:function(a){return e.$emit("synced")}}},[n("svg-icon",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:e.__("messages.field_desynced_from_origin"),expression:"__('messages.field_desynced_from_origin')",modifiers:{top:!0}}],staticClass:"h-4 w-4 mr-1.5 mb-1 text-gray-600",attrs:{name:"light/hyperlink-broken"}})],1):e._e()],1):e._e(),e.instructions&&e.config.instructions_position!=="below"?n("div",{staticClass:"help-block",class:{"-mt-2":e.showLabel},domProps:{innerHTML:e._s(e.instructions)}}):e._e()]),o?n("loading-graphic",{attrs:{size:16,inline:!0}}):e._e(),o?e._e():e._t("fieldtype",function(){return[e.fieldtypeComponentExists?n(e.fieldtypeComponent,{tag:"component",attrs:{config:e.config,value:s,meta:r,handle:e.config.handle,"name-prefix":e.namePrefix,"field-path-prefix":e.fieldPathPrefix,"read-only":e.isReadOnly},on:{input:function(a){return e.$emit("input",a)},"meta-updated":function(a){return e.$emit("meta-updated",a)},focus:e.focused,blur:e.blurred}}):n("div",{staticClass:"text-xs text-red-500"},[e._v("Component "),n("code",{domProps:{textContent:e._s(e.fieldtypeComponent)}}),e._v(" does not exist.")])]}),e.instructions&&e.config.instructions_position==="below"?n("div",{staticClass:"help-block mt-2",domProps:{innerHTML:e._s(e.instructions)}}):e._e(),e.hasError?n("div",e._l(e.errors,function(a,l){return n("small",{key:l,staticClass:"help-block text-red-500 mt-2 mb-0",domProps:{textContent:e._s(a)}})}),0):e._e()],2)}}],null,!0)})},_sfc_staticRenderFns$6=[],__component__$6=normalizeComponent(_sfc_main$6,_sfc_render$6,_sfc_staticRenderFns$6,!1,null,null,null,null);const PublishField=__component__$6.exports,KEYS=["if","if_any","show_when","show_when_any","unless","unless_any","hide_when","hide_when_any"],OPERATORS=["equals","not","contains","contains_any","===","!==",">",">=","<","<=","custom"],ALIASES={is:"equals","==":"equals",isnt:"not","!=":"not",includes:"contains",includes_any:"contains_any"};var VERSION="1.13.6",root=typeof self=="object"&&self.self===self&&self||typeof global=="object"&&global.global===global&&global||Function("return this")()||{},ArrayProto=Array.prototype,ObjProto=Object.prototype,push=ArrayProto.push,slice=ArrayProto.slice,toString=ObjProto.toString,hasOwnProperty=ObjProto.hasOwnProperty,nativeIsArray=Array.isArray,nativeKeys=Object.keys,_isNaN=isNaN,hasEnumBug=!{toString:null}.propertyIsEnumerable("toString"),nonEnumerableProps=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],MAX_ARRAY_INDEX=Math.pow(2,53)-1;function _$1(t){if(t instanceof _$1)return t;if(!(this instanceof _$1))return new _$1(t);this._wrapped=t}_$1.VERSION=VERSION;_$1.prototype.value=function(){return this._wrapped};_$1.prototype.valueOf=_$1.prototype.toJSON=_$1.prototype.value;_$1.prototype.toString=function(){return String(this._wrapped)};function identity(t){return t}function tagTester(t){var e="[object "+t+"]";return function(n){return toString.call(n)===e}}var isFunction=tagTester("Function"),nodelist=root.document&&root.document.childNodes;typeof/./!="function"&&typeof Int8Array!="object"&&typeof nodelist!="function"&&(isFunction=function(t){return typeof t=="function"||!1});const isFunction$1=isFunction;function isObject(t){var e=typeof t;return e==="function"||e==="object"&&!!t}const isArray=nativeIsArray||tagTester("Array");function createAssigner(t,e){return function(n){var r=arguments.length;if(e&&(n=Object(n)),r<2||n==null)return n;for(var s=1;s<r;s++)for(var o=arguments[s],a=t(o),l=a.length,c=0;c<l;c++){var u=a[c];(!e||n[u]===void 0)&&(n[u]=o[u])}return n}}function has(t,e){return t!=null&&hasOwnProperty.call(t,e)}function emulatedSet(t){for(var e={},n=t.length,r=0;r<n;++r)e[t[r]]=!0;return{contains:function(s){return e[s]===!0},push:function(s){return e[s]=!0,t.push(s)}}}function collectNonEnumProps(t,e){e=emulatedSet(e);var n=nonEnumerableProps.length,r=t.constructor,s=isFunction$1(r)&&r.prototype||ObjProto,o="constructor";for(has(t,o)&&!e.contains(o)&&e.push(o);n--;)o=nonEnumerableProps[n],o in t&&t[o]!==s[o]&&!e.contains(o)&&e.push(o)}function keys(t){if(!isObject(t))return[];if(nativeKeys)return nativeKeys(t);var e=[];for(var n in t)has(t,n)&&e.push(n);return hasEnumBug&&collectNonEnumProps(t,e),e}const extendOwn=createAssigner(keys);function isMatch(t,e){var n=keys(e),r=n.length;if(t==null)return!r;for(var s=Object(t),o=0;o<r;o++){var a=n[o];if(e[a]!==s[a]||!(a in s))return!1}return!0}function matcher(t){return t=extendOwn({},t),function(e){return isMatch(e,t)}}function deepGet(t,e){for(var n=e.length,r=0;r<n;r++){if(t==null)return;t=t[e[r]]}return n?t:void 0}function toPath$1(t){return isArray(t)?t:[t]}_$1.toPath=toPath$1;function toPath(t){return _$1.toPath(t)}function property(t){return t=toPath(t),function(e){return deepGet(e,t)}}function optimizeCb(t,e,n){if(e===void 0)return t;switch(n??3){case 1:return function(r){return t.call(e,r)};case 3:return function(r,s,o){return t.call(e,r,s,o)};case 4:return function(r,s,o,a){return t.call(e,r,s,o,a)}}return function(){return t.apply(e,arguments)}}function baseIteratee(t,e,n){return t==null?identity:isFunction$1(t)?optimizeCb(t,e,n):isObject(t)&&!isArray(t)?matcher(t):property(t)}function iteratee(t,e){return baseIteratee(t,e,1/0)}_$1.iteratee=iteratee;function cb(t,e,n){return _$1.iteratee!==iteratee?_$1.iteratee(t,e):baseIteratee(t,e,n)}function createSizePropertyCheck(t){return function(e){var n=t(e);return typeof n=="number"&&n>=0&&n<=MAX_ARRAY_INDEX}}function shallowProperty(t){return function(e){return e==null?void 0:e[t]}}const getLength=shallowProperty("length"),isArrayLike=createSizePropertyCheck(getLength);function map(t,e,n){e=cb(e,n);for(var r=!isArrayLike(t)&&keys(t),s=(r||t).length,o=Array(s),a=0;a<s;a++){var l=r?r[a]:a;o[a]=e(t[l],l,t)}return o}function each(t,e,n){e=optimizeCb(e,n);var r,s;if(isArrayLike(t))for(r=0,s=t.length;r<s;r++)e(t[r],r,t);else{var o=keys(t);for(r=0,s=o.length;r<s;r++)e(t[o[r]],o[r],t)}return t}function filter(t,e,n){var r=[];return e=cb(e,n),each(t,function(s,o,a){e(s,o,a)&&r.push(s)}),r}function chain(t){var e=_$1(t);return e._chain=!0,e}function functions(t){var e=[];for(var n in t)isFunction$1(t[n])&&e.push(n);return e.sort()}function chainResult(t,e){return t._chain?_$1(e).chain():e}function mixin(t){return each(functions(t),function(e){var n=_$1[e]=t[e];_$1.prototype[e]=function(){var r=[this._wrapped];return push.apply(r,arguments),chainResult(this,n.apply(_$1,r))}}),_$1}mixin({chain,filter,each});class Converter{fromBlueprint(e,n=null){return map(e,(r,s)=>this.splitRhs(s,r,n))}toBlueprint(e){let n={};return each(e,r=>{n[r.field]=this.combineRhs(r)}),n}splitRhs(e,n,r=null){return{field:this.getScopedFieldHandle(e,r),operator:this.getOperatorFromRhs(n),value:this.getValueFromRhs(n)}}getScopedFieldHandle(e,n){return e.startsWith("root.")||!n?e:n+e}getOperatorFromRhs(e){let n="==";return chain(this.getOperatorsAndAliases()).filter(r=>new RegExp(`^${r} [^=]`).test(this.normalizeConditionString(e))).each(r=>n=r),this.normalizeOperator(n)}normalizeOperator(e){return ALIASES[e]?ALIASES[e]:e}getValueFromRhs(e){let n=this.normalizeConditionString(e);return chain(this.getOperatorsAndAliases()).filter(r=>new RegExp(`^${r} [^=]`).test(n)).each(r=>n=n.replace(new RegExp(`^${r}[ ]*`),"")),n}combineRhs(e){let n=e.operator?e.operator.trim():"",r=e.value.trim();return`${n} ${r}`.trim()}getOperatorsAndAliases(){return OPERATORS.concat(Object.keys(ALIASES))}normalizeConditionString(e){return e===null?"null":e===""?"empty":e.toString()}}function data_get$1(t,e,n=null){var r=Array.isArray(e)?e:e.split("."),s=r.reduce((o,a)=>o&&o[a],t);return s!==void 0?s:n}const isString=tagTester("String");var isArguments=tagTester("Arguments");(function(){isArguments(arguments)||(isArguments=function(t){return has(t,"callee")})})();const isArguments$1=isArguments;function isEmpty(t){if(t==null)return!0;var e=getLength(t);return typeof e=="number"&&(isArray(t)||isString(t)||isArguments$1(t))?e===0:getLength(keys(t))===0}function values(t){for(var e=keys(t),n=e.length,r=Array(n),s=0;s<n;s++)r[s]=t[e[s]];return r}function sortedIndex(t,e,n,r){n=cb(n,r,1);for(var s=n(e),o=0,a=getLength(t);o<a;){var l=Math.floor((o+a)/2);n(t[l])<s?o=l+1:a=l}return o}function createPredicateIndexFinder(t){return function(e,n,r){n=cb(n,r);for(var s=getLength(e),o=t>0?0:s-1;o>=0&&o<s;o+=t)if(n(e[o],o,e))return o;return-1}}const findIndex=createPredicateIndexFinder(1),isNumber=tagTester("Number");function isNaN$1(t){return isNumber(t)&&_isNaN(t)}function createIndexFinder(t,e,n){return function(r,s,o){var a=0,l=getLength(r);if(typeof o=="number")t>0?a=o>=0?o:Math.max(o+l,a):l=o>=0?Math.min(o+1,l):o+l+1;else if(n&&o&&l)return o=n(r,s),r[o]===s?o:-1;if(s!==s)return o=e(slice.call(r,a,l),isNaN$1),o>=0?o+a:-1;for(o=t>0?a:l-1;o>=0&&o<l;o+=t)if(r[o]===s)return o;return-1}}const indexOf=createIndexFinder(1,findIndex,sortedIndex);function contains(t,e,n,r){return isArrayLike(t)||(t=values(t)),(typeof n!="number"||r)&&(n=0),indexOf(t,e,n)>=0}function intersection(t){for(var e=[],n=arguments.length,r=0,s=getLength(t);r<s;r++){var o=t[r];if(!contains(e,o)){var a;for(a=1;a<n&&contains(arguments[a],o);a++);a===n&&e.push(o)}}return e}function negate(t){return function(){return!t.apply(this,arguments)}}function reject(t,e,n){return filter(t,negate(cb(e)),n)}function initial(t,e,n){return slice.call(t,0,Math.max(0,t.length-(e==null||n?1:e)))}function first(t,e,n){return t==null||t.length<1?e==null||n?void 0:[]:e==null||n?t[0]:initial(t,t.length-e)}mixin({chain,map,each,filter,reject,first,isEmpty});const NUMBER_SPECIFIC_COMPARISONS=[">",">=","<","<="];class Validator{constructor(t,e,n,r){this.field=t,this.values=e,this.rootValues=n?n.state.publish[r].values:!1,this.store=n,this.storeName=r,this.passOnAny=!1,this.showOnPass=!0,this.converter=new Converter}passesConditions(t){let e=t||this.getConditions();if(e===void 0)return!0;if(this.isCustomConditionWithoutTarget(e))return this.passesCustomCondition(this.prepareCondition(e));let n=this.passOnAny?this.passesAnyConditions(e):this.passesAllConditions(e);return this.showOnPass?n:!n}getConditions(){let t=chain(KEYS).filter(n=>this.field[n]).first().value();if(!t)return;t.includes("any")&&(this.passOnAny=!0),(t.includes("unless")||t.includes("hide_when"))&&(this.showOnPass=!1);let e=this.field[t];return this.isCustomConditionWithoutTarget(e)?e:this.converter.fromBlueprint(e,this.field.prefix)}isCustomConditionWithoutTarget(t){return isString(t)}passesAllConditions(t){return chain(t).map(e=>this.prepareCondition(e)).reject(e=>this.passesCondition(e)).isEmpty().value()}passesAnyConditions(t){return!chain(t).map(e=>this.prepareCondition(e)).filter(e=>this.passesCondition(e)).isEmpty().value()}prepareCondition(t){if(isString(t)||t.operator==="custom")return this.prepareCustomCondition(t);let e=this.prepareOperator(t.operator),n=this.prepareLhs(t.field,e),r=this.prepareRhs(t.value,e);return{lhs:n,operator:e,rhs:r}}prepareOperator(t){switch(t){case null:case"":case"is":case"equals":return"==";case"isnt":case"not":case"¯\\_(ツ)_/¯":return"!=";case"includes":case"contains":return"includes";case"includes_any":case"contains_any":return"includes_any"}return t}prepareLhs(t,e){let n=this.getFieldValue(t);return NUMBER_SPECIFIC_COMPARISONS.includes(e)?Number(n):e==="includes"&&!isObject(n)?n?n.toString():"":(isString(n)&&isEmpty(n)&&(n=null),isString(n)?JSON.stringify(n.trim()):n)}prepareRhs(t,e){switch(t){case"null":return null;case"true":return!0;case"false":return!1}return NUMBER_SPECIFIC_COMPARISONS.includes(e)?Number(t):t==="empty"||e==="includes"||e==="includes_any"?t:isString(t)?JSON.stringify(t.trim()):t}prepareCustomCondition(t){let e=this.prepareFunctionName(t.value||t),n=this.prepareParams(t.value||t),r=t.field?this.getFieldValue(t.field):null;return{functionName:e,params:n,target:r}}prepareFunctionName(t){return t.replace(new RegExp("^custom "),"").split(":")[0]}prepareParams(t){let e=t.split(":")[1];return e?e.split(",").map(n=>n.trim()):[]}getFieldValue(t){return t.startsWith("root.")?data_get$1(this.rootValues,t.replace(new RegExp("^root."),"")):data_get$1(this.values,t)}passesCondition(condition){return condition.functionName?this.passesCustomCondition(condition):condition.operator==="includes"?this.passesIncludesCondition(condition):condition.operator==="includes_any"?this.passesIncludesAnyCondition(condition):(condition.rhs==="empty"&&(condition.lhs=isEmpty(condition.lhs),condition.rhs=!0),isObject(condition.lhs)?!1:eval(`${condition.lhs} ${condition.operator} ${condition.rhs}`))}passesIncludesCondition(t){return t.lhs.includes(t.rhs)}passesIncludesAnyCondition(t){let e=t.rhs.split(",").map(n=>n.trim());return Array.isArray(t.lhs)?intersection(t.lhs,e).length:new RegExp(e.join("|")).test(t.lhs)}passesCustomCondition(t){let e=data_get$1(this.store.state.statamic.conditions,t.functionName);if(typeof e!="function")return console.error(`Statamic field condition [${t.functionName}] was not properly defined.`),!1;let n=e({params:t.params,target:t.target,values:this.values,root:this.rootValues,store:this.store,storeName:this.storeName});return this.showOnPass?n:!n}passesNonRevealerConditions(t){let e=this.getConditions();if(this.isCustomConditionWithoutTarget(e))return this.passesConditions(e);let n=data_get$1(this.store.state.publish[this.storeName],"revealerFields",[]),r=chain(this.getConditions()).reject(s=>n.includes(this.relativeLhsToAbsoluteFieldPath(s.field,t))).value();return this.passesConditions(r)}relativeLhsToAbsoluteFieldPath(t,e){return e?t.startsWith("root.")?t.replace(/^root\./,""):e+"."+t:t}}const ValidatesFieldConditions={inject:{storeName:{default:"base"}},methods:{showField(t,e){let n=e||t.handle,r=e?e.replace(new RegExp("."+t.handle+"$"),""):"";if(t.visibility==="hidden"||this.shouldForceHiddenField(n))return this.$store.commit(`publish/${this.storeName}/setHiddenField`,{dottedKey:n,hidden:"force",omitValue:!1}),!1;let s=new Validator(t,this.values,this.$store,this.storeName),o=s.passesConditions();return t.always_save===!0?(this.$store.commit(`publish/${this.storeName}/setHiddenField`,{dottedKey:n,hidden:!o,omitValue:!1}),o):(this.$nextTick(()=>{this.$store.commit(`publish/${this.storeName}/setHiddenField`,{dottedKey:n,hidden:!o,omitValue:t.type==="revealer"||!s.passesNonRevealerConditions(r)})}),o)},shouldForceHiddenField(t){return data_get$1(this.$store.state.publish[this.storeName].hiddenFields[t],"hidden")==="force"}}},_sfc_main$5={components:{PublishField},mixins:[ValidatesFieldConditions],inject:["storeName"],props:{fields:{type:Array,required:!0},readOnly:Boolean,syncable:Boolean,syncableFields:Array,namePrefix:String},computed:{state(){return this.$store.state.publish[this.storeName]},values(){return this.state.values},meta(){return this.state.meta},errors(){return this.state.errors}},methods:{isSyncableField(t){return this.syncable?this.syncableFields?this.syncableFields.includes(t.handle):!0:!1}}};var _sfc_render$5=function t(){var e=this,n=e._self._c;return n("div",{staticClass:"publish-fields @container"},e._l(e.fields,function(r){return n("publish-field",{directives:[{name:"show",rawName:"v-show",value:e.showField(r),expression:"showField(field)"}],key:r.handle,attrs:{config:r,value:e.values[r.handle],meta:e.meta[r.handle],errors:e.errors[r.handle],"read-only":e.readOnly,syncable:e.isSyncableField(r),"name-prefix":e.namePrefix},on:{input:function(s){return e.$emit("updated",r.handle,s)},"meta-updated":function(s){return e.$emit("meta-updated",r.handle,s)},synced:function(s){return e.$emit("synced",r.handle)},desynced:function(s){return e.$emit("desynced",r.handle)},focus:function(s){return e.$emit("focus",r.handle)},blur:function(s){return e.$emit("blur",r.handle)}}})}),1)},_sfc_staticRenderFns$5=[],__component__$5=normalizeComponent(_sfc_main$5,_sfc_render$5,_sfc_staticRenderFns$5,!1,null,null,null,null);const PublishFields=__component__$5.exports,_sfc_main$4={components:{PublishFields},props:{filter:Object,values:Object},computed:{defaultValues(){return this.filter.values||{}},containerValues(){return clone(this.values||this.defaultValues)}},methods:{updateValues(t){let e=clone(t);Object.keys(t).forEach(n=>{_.isEmpty(t[n])&&delete e[n]}),this.$emit("changed",e)},resetAll(){this.$emit("changed",null),this.$emit("cleared")},close(){this.$emit("closed")}}};var _sfc_render$4=function t(){var e=this,n=e._self._c;return n("div",{staticClass:"w-full no-label"},[e.filter.fields.length?n("publish-container",{staticClass:"p-3",attrs:{name:`filter-${e.filter.handle}`,meta:{},values:e.containerValues,"track-dirty-state":!1},on:{updated:e.updateValues},scopedSlots:e._u([{key:"default",fn:function({setFieldValue:r}){return n("publish-fields",{attrs:{fields:e.filter.fields,"name-prefix":`filter-${e.filter.handle}`},on:{updated:r}})}}],null,!1,1948012401)}):e._e(),n("div",{staticClass:"flex border-t"},[n("button",{staticClass:"p-2 hover:bg-gray-100 rounded-bl text-xs flex-1",domProps:{textContent:e._s(e.__("Clear"))},on:{click:e.resetAll}}),n("button",{staticClass:"p-2 hover:bg-gray-100 flex-1 rounded-br border-l text-xs",domProps:{textContent:e._s(e.__("Close"))},on:{click:function(r){return e.$emit("closed")}}})])],1)},_sfc_staticRenderFns$4=[],__component__$4=normalizeComponent(_sfc_main$4,_sfc_render$4,_sfc_staticRenderFns$4,!1,null,null,null,null);const DataListFilter=__component__$4.exports,_sfc_main$3={components:{PublishField},props:{config:Object,values:Object,badges:Object},data(){return{initialValues:this.values,containerValues:{},filter:null,field:null,fieldValues:null}},computed:{availableFieldFilters(){return this.config?this.config.extra.filter(t=>!this.initialValues[t.handle]):[]},hasAvailableFieldFilters(){return!!this.availableFieldFilters.length},fieldOptions(){let t=this.availableFieldFilters.map(e=>({value:e.handle,label:e.display}));return _.sortBy(t,e=>e.label)},showFieldFilter(){return this.field},isFilterComplete(){if(!this.filter)return!1;let t=_.chain(this.filter.fields).filter(function(n){return new Validator(n,this.fieldValues).passesConditions()},this).mapObject(n=>n.handle).values().value(),e=_.chain(this.fieldValues).filter((n,r)=>t.includes(r)&&n).values().value().length===t.length;return this.field!==null&&e},newValues(){let t=clone(this.values);return delete t[this.field],t[this.field]=this.isFilterComplete?this.fieldValues:null,t}},watch:{field:"update",fieldValues:{deep:!0,handler(){this.update()}}},mounted(){this.hasAvailableFieldFilters&&(this.reset(),this.$refs.fieldSelect.$refs.search.focus())},methods:{popoverClosed(){this.badges[this.field]||this.resetAll()},reset(){this.field&&this.$emit("changed",this.initialValues),this.containerValues={},this.filter=null,this.field=null,this.fieldValues=null},resetAll(){this.reset(),this.$emit("cleared")},resetInitialValues(){this.initialValues=this.values,this.reset()},createFilter(t){this.field&&this.$emit("changed",this.initialValues),this.reset(),this.setFilter(t),this.setDefaultValues(),this.field=t},setFilter(t){this.filter=_.find(this.availableFieldFilters,e=>e.handle===t)},setDefaultValues(){if(!this.filter)return;let t={};this.filter.fields.filter(e=>e.default).forEach(e=>t[e.handle]=e.default),this.updateValues(t)},updateValues(t){this.updateContainerValues(t),this.updateFieldValues(t)},updateContainerValues(t){this.containerValues=clone(t)},updateFieldValues:_.debounce(function(t){this.fieldValues=clone(t)},300),update(){this.$emit("changed",this.newValues)}}};var _sfc_render$3=function t(){var e=this,n=e._self._c;return n("div",[e.hasAvailableFieldFilters?n("div",[n("div",{staticClass:"flex flex-col p-3"},[n("v-select",{ref:"fieldSelect",attrs:{placeholder:e.__("Field"),options:e.fieldOptions,reduce:r=>r.value,value:e.field},on:{input:e.createFilter}}),e.showFieldFilter?n("publish-container",{staticClass:"filter-fields mt-2",attrs:{name:"filter-field",meta:{},values:e.containerValues,"track-dirty-state":!1},on:{updated:e.updateValues},scopedSlots:e._u([{key:"default",fn:function({setFieldValue:r,setFieldMeta:s}){return n("publish-fields",{staticClass:"w-full no-label",attrs:{fields:e.filter.fields,"name-prefix":"filter-field"},on:{updated:r,"meta-updated":s}})}}],null,!1,2555427817)}):e._e()],1),n("div",{staticClass:"flex border-t text-gray-800"},[n("button",{staticClass:"p-2 hover:bg-gray-100 rounded-bl text-xs flex-1",domProps:{textContent:e._s(e.__("Clear"))},on:{click:e.resetAll}}),n("button",{staticClass:"p-2 hover:bg-gray-100 flex-1 rounded-br border-l text-xs",domProps:{textContent:e._s(e.__("Close"))},on:{click:function(r){return e.$emit("closed")}}})])]):n("v-select",{attrs:{disabled:!0,placeholder:e.__("No available filters")}})],1)},_sfc_staticRenderFns$3=[],__component__$3=normalizeComponent(_sfc_main$3,_sfc_render$3,_sfc_staticRenderFns$3,!1,null,null,null,null);const FieldFilter=__component__$3.exports,_sfc_main$2={components:{DataListFilter,FieldFilter},props:{filters:{type:Array,default:()=>[]},activePreset:String,activePresetPayload:Object,activeFilters:Object,activeFilterBadges:Object,activeCount:Number,searchQuery:String,savesPresets:Boolean,preferencesPrefix:String,isSearching:Boolean},data(){return{filtering:!1,creating:!1,saving:!1,deleting:!1,savingPresetName:null,presets:[]}},inject:["sharedState"],watch:{activePresetPayload:{deep:!0,handler(t){this.savingPresetName=t.display||null}}},computed:{fieldFilter(){return this.filters.find(t=>t.handle==="runway-fields")},standardFilters(){return this.filters.filter(t=>t.handle!=="runway-fields")},pinnedFilters(){return this.standardFilters.filter(t=>t.pinned)},unpinnedFilters(){return this.standardFilters.filter(t=>!t.pinned)},creatingFilter(){return _.find(this.unpinnedFilters,t=>t.handle===this.creating)},creatingFilterHeader(){let t=data_get(this.creatingFilter,"title","Filter where");return __(t)+":"},showUnpinnedFilterSelection(){return!this.creating},fieldFilterBadges(){return data_get(this.activeFilterBadges,"runway-fields",{})},standardBadges(){return _.omit(this.activeFilterBadges,"runway-fields")},isFiltering(){return!_.isEmpty(this.activeFilters)||this.searchQuery||this.activePreset},isDirty(){return this.isFiltering?this.activePreset?this.activePresetPayload.query!=this.searchQuery||!_.isEqual(this.activePresetPayload.filters||{},this.activeFilters):!0:!1},canSave(){return this.savesPresets&&this.isDirty&&this.preferencesPrefix},savingPresetHandle(){return this.$slugify(this.savingPresetName,"_")},isUpdatingPreset(){return this.savingPresetHandle===this.activePreset},preferencesKey(){let t=this.savingPresetHandle||this.activePreset;return!this.preferencesPrefix||!t?null:`${this.preferencesPrefix}.filters.${t}`},preferencesPayload(){if(!this.savingPresetName)return null;let t={display:this.savingPresetName};return this.searchQuery&&(t.query=this.searchQuery),this.activeCount&&(t.filters=clone(this.activeFilters)),t}},methods:{resetFilterPopover(){this.creating=!1,setTimeout(()=>{var t;return(t=this.$refs.fieldFilter)==null?void 0:t.resetInitialValues()},100)},fieldFilterClosed(){this.$refs.fieldFilter.popoverClosed()},removeFieldFilter(t){let e=clone(this.activeFilters.fields);delete e[t],this.$emit("changed",{handle:"runway-fields",values:e})},removeStandardFilter(t){this.$emit("changed",{handle:t,values:null})},save(){!this.canSave||!this.preferencesPayload||(this.saving=!0,this.$preferences.set(this.preferencesKey,this.preferencesPayload).then(t=>{this.$refs.savePopover.close(),this.$emit("saved",this.savingPresetHandle),this.$toast.success(this.isUpdatingPreset?__("Filter preset updated"):__("Filter preset saved")),this.savingPresetName=null,this.saving=!1}).catch(t=>{this.$toast.error(this.isUpdatingPreset?__("Unable to update filter preset"):__("Unable to save filter preset")),this.saving=!1}))},remove(){this.$preferences.remove(this.preferencesKey).then(t=>{this.$emit("deleted",this.activePreset),this.$toast.success(__("Filter preset deleted")),this.deleting=!1}).catch(t=>{this.$toast.error(__("Unable to delete filter preset")),this.deleting=!1})}}};var _sfc_render$2=function t(){var e=this,n=e._self._c;return n("div",{staticClass:"shadow-inner bg-gray-300"},[n("div",{staticClass:"flex items-center flex-wrap px-3 border-b pt-2"},[e.fieldFilter?n("popover",{attrs:{placement:"bottom-start"},on:{closed:e.fieldFilterClosed},scopedSlots:e._u([{key:"default",fn:function({close:r}){return[n("div",{staticClass:"flex flex-col text-left min-w-[18rem]"},[n("div",{staticClass:"filter-fields text-sm"},[n("field-filter",{ref:"fieldFilter",attrs:{config:e.fieldFilter,values:e.activeFilters.fields||{},badges:e.fieldFilterBadges},on:{changed:function(s){return e.$emit("changed",{handle:"runway-fields",values:s})},cleared:function(s){e.creating=!1},closed:r}})],1)])]}}],null,!1,1951453130)},[n("template",{slot:"trigger"},[n("button",{staticClass:"filter-badge filter-badge-control mr-2 mb-2",on:{click:e.resetFilterPopover}},[e._v(" "+e._s(e.fieldFilter.title)+" "),n("svg-icon",{staticClass:"w-2 h-2 mx-2",attrs:{name:"micro/chevron-down-xs"}})],1)])],2):e._e(),e._l(e.pinnedFilters,function(r){return e.pinnedFilters.length?n("popover",{key:r.handle,attrs:{placement:"bottom-start","stop-propagation":!1},scopedSlots:e._u([{key:"default",fn:function({close:s}){return[n("div",{staticClass:"filter-fields w-64"},[n("data-list-filter",{key:r.handle,attrs:{filter:r,values:e.activeFilters[r.handle]},on:{changed:function(o){return e.$emit("changed",{handle:r.handle,values:o})},closed:s}})],1)]}}],null,!0)},[n("template",{slot:"trigger"},[n("button",{staticClass:"filter-badge filter-badge-control mr-2 mb-2"},[e._v(" "+e._s(r.title)+" "),n("svg-icon",{staticClass:"w-2 h-2 mx-2",attrs:{name:"micro/chevron-down-xs"}})],1)])],2):e._e()}),e.unpinnedFilters.length?n("popover",{attrs:{placement:"bottom-start","stop-propagation":!1},scopedSlots:e._u([{key:"default",fn:function({close:r}){return[n("div",{staticClass:"filter-fields w-64"},[n("h6",{staticClass:"p-3 pb-0",domProps:{textContent:e._s(e.creatingFilterHeader)}}),e.showUnpinnedFilterSelection?n("div",{staticClass:"p-3 pt-1"},e._l(e.unpinnedFilters,function(s){return n("button",{key:s.handle,staticClass:"btn w-full mt-1",domProps:{textContent:e._s(s.title)},on:{click:function(o){e.creating=s.handle}}})}),0):n("div",e._l(e.unpinnedFilters,function(s){return e.creating===s.handle?n("data-list-filter",{key:s.handle,attrs:{filter:s,values:e.activeFilters[s.handle]},on:{changed:function(o){return e.$emit("changed",{handle:s.handle,values:o})},cleared:function(o){e.creating=!1},closed:r}}):e._e()}),1)])]}}],null,!1,1858792327)},[n("template",{slot:"trigger"},[n("button",{staticClass:"filter-badge filter-badge-control mr-2 mb-2",on:{click:e.resetFilterPopover}},[e._v(" "+e._s(e.__("Filter"))+" "),n("svg-icon",{staticClass:"w-2 h-2 mx-2",attrs:{name:"micro/chevron-down-xs"}})],1)])],2):e._e(),e._l(e.fieldFilterBadges,function(r,s){return n("div",{staticClass:"filter-badge mr-2 mb-2"},[n("span",[e._v(e._s(r))]),n("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.__("Remove Filter"),expression:"__('Remove Filter')"}],on:{click:function(o){return e.removeFieldFilter(s)}}},[e._v("×")])])}),e._l(e.standardBadges,function(r,s){return n("div",{staticClass:"filter-badge mr-2 mb-2"},[n("span",[e._v(e._s(r))]),n("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.__("Remove Filter"),expression:"__('Remove Filter')"}],on:{click:function(o){return e.removeStandardFilter(s)}}},[e._v("×")])])})],2)])},_sfc_staticRenderFns$2=[],__component__$2=normalizeComponent(_sfc_main$2,_sfc_render$2,_sfc_staticRenderFns$2,!1,null,null,null,null);const DataListFilters=__component__$2.exports,_sfc_main$1={mixins:[Listing],components:{DataListFilters},props:{listingConfig:Object,initialColumns:Array,actionUrl:String,initialPrimaryColumn:String},data(){return{listingKey:"id",preferencesPrefix:this.listingConfig.preferencesPrefix??"runway",requestUrl:this.listingConfig.requestUrl,columns:this.initialColumns,meta:{},primaryColumn:`cell-${this.initialPrimaryColumn}`,deletingRow:!1}},methods:{canViewRow(t){return t.viewable&&t.permalink},canEditRow(t){return t.editable},confirmDeleteRow(t,e,n){this.visibleColumns=this.columns.filter(r=>r.visible),this.deletingRow={id:t,index:e,deleteUrl:n}},deleteRow(t){const e=this.deletingRow.id;t=t||__("Deleted"),this.$axios.delete(this.deletingRow.deleteUrl).then(()=>{let n=_.indexOf(this.items,_.findWhere(this.rows,{id:e}));this.items.splice(n,1),this.deletingRow=!1,this.$toast.success(t)}).catch(n=>{this.$toast.error(n.response?n.response.data.message:__("Something went wrong"))})},cancelDeleteRow(){this.deletingRow=!1,setTimeout(()=>{this.visibleColumns=this.columns.filter(t=>t.visible)},50)}}};var _sfc_render$1=function t(){var e=this,n=e._self._c;return n("div",[e.initializing?n("div",{staticClass:"card loading"},[n("loading-graphic")],1):e._e(),e.initializing?e._e():n("data-list",{attrs:{rows:e.items,columns:e.columns,sort:!1,"sort-column":e.sortColumn,"sort-direction":e.sortDirection},on:{"visible-columns-updated":function(r){e.visibleColumns=r}},scopedSlots:e._u([{key:"default",fn:function({hasSelections:r}){return n("div",{},[n("div",{staticClass:"card overflow-hidden p-0 relative"},[n("div",{staticClass:"flex flex-wrap items-center justify-between px-2 pb-2 text-sm border-b"},[n("data-list-filter-presets",{directives:[{name:"show",rawName:"v-show",value:e.alwaysShowFilters||!e.showFilters,expression:"alwaysShowFilters || !showFilters"}],ref:"presets",attrs:{"active-preset":e.activePreset,"active-preset-payload":e.activePresetPayload,"active-filters":e.activeFilters,"has-active-filters":e.hasActiveFilters,"preferences-prefix":e.preferencesPrefix,"search-query":e.searchQuery},on:{selected:e.selectPreset,reset:e.filtersReset,"hide-filters":e.filtersHide,"show-filters":e.filtersShow}}),n("data-list-search",{ref:"search",staticClass:"h-8 mt-2 min-w-[240px] w-full",attrs:{placeholder:e.searchPlaceholder},model:{value:e.searchQuery,callback:function(s){e.searchQuery=s},expression:"searchQuery"}}),n("div",{staticClass:"flex space-x-2 mt-2"},[n("button",{directives:[{name:"show",rawName:"v-show",value:e.isDirty,expression:"isDirty"}],staticClass:"btn btn-sm ml-2",domProps:{textContent:e._s(e.__("Reset"))},on:{click:function(s){return e.$refs.presets.refreshPreset()}}}),n("button",{directives:[{name:"show",rawName:"v-show",value:e.isDirty,expression:"isDirty"}],staticClass:"btn btn-sm ml-2",domProps:{textContent:e._s(e.__("Save"))},on:{click:function(s){return e.$refs.presets.savePreset()}}}),n("data-list-column-picker",{attrs:{"preferences-key":e.preferencesKey("columns")}})],1)],1),n("div",[n("data-list-filters",{attrs:{filters:e.filters,"active-preset":e.activePreset,"active-preset-payload":e.activePresetPayload,"active-filters":e.activeFilters,"active-filter-badges":e.activeFilterBadges,"active-count":e.activeFilterCount,"search-query":e.searchQuery,"is-searching":!0,"saves-presets":!0,"preferences-prefix":e.preferencesPrefix},on:{changed:e.filterChanged,saved:function(s){return e.$refs.presets.setPreset(s)},deleted:function(s){return e.$refs.presets.refreshPresets()}}})],1),n("div",{directives:[{name:"show",rawName:"v-show",value:e.items.length===0,expression:"items.length === 0"}],staticClass:"p-6 text-center text-gray-500",domProps:{textContent:e._s(e.__("No results"))}}),n("data-list-bulk-actions",{attrs:{url:e.actionUrl},on:{started:e.actionStarted,completed:e.actionCompleted}}),n("div",{staticClass:"overflow-x-auto overflow-y-hidden"},[n("data-list-table",{directives:[{name:"show",rawName:"v-show",value:e.items.length,expression:"items.length"}],attrs:{"allow-bulk-actions":!0,loading:e.loading,reorderable:!1,sortable:!0,"toggle-selection-on-row-click":!0,"allow-column-picker":!0,"column-preferences-key":e.preferencesKey("columns")},on:{sorted:e.sorted},scopedSlots:e._u([{key:e.primaryColumn,fn:function({row:s,value:o}){return[n("a",{attrs:{href:s.edit_url},on:{click:function(a){a.stopPropagation()}}},[e._v(e._s(o))])]}},{key:"actions",fn:function({row:s,index:o}){return[e.canViewRow(s)||e.canEditRow(s)||s.actions.length?n("dropdown-list",[e.canViewRow(s)?n("dropdown-item",{attrs:{text:e.__("View"),redirect:s.permalink}}):e._e(),e.canEditRow(s)?n("dropdown-item",{attrs:{text:e.__("Edit"),redirect:s.edit_url}}):e._e(),(e.canViewRow(s)||e.canEditRow(s))&&s.actions.length?n("div",{staticClass:"divider"}):e._e(),n("data-list-inline-actions",{attrs:{item:s.id,url:e.actionUrl,actions:s.actions},on:{started:e.actionStarted,completed:e.actionCompleted}})],1):n("div",{staticClass:"w-10 block"})]}}],null,!0)})],1),e.deletingRow!==!1?n("confirmation-modal",{attrs:{title:e.__("Delete"),bodyText:e.__("Are you sure you want to delete this item?"),buttonText:e.__("Delete"),danger:!0},on:{confirm:function(s){return e.deleteRow()},cancel:e.cancelDeleteRow}}):e._e()],1),n("data-list-pagination",{staticClass:"mt-3",attrs:{"resource-meta":e.meta,"per-page":e.perPage},on:{"page-selected":e.selectPage,"per-page-changed":e.changePerPage}})],1)}}],null,!1,3040510442)})],1)},_sfc_staticRenderFns$1=[],__component__$1=normalizeComponent(_sfc_main$1,_sfc_render$1,_sfc_staticRenderFns$1,!1,null,null,null,null);const RunwayListing=__component__$1.exports,_sfc_main={mixins:[IndexFieldtype],data(){return{showingAll:!1}},computed:{items(){return this.showingAll?this.value:this.value.slice(0,2)},hasMore(){return this.value.length>2}},methods:{showAll(){this.showingAll=!0},hideExtra(){this.showingAll=!1}}};var _sfc_render=function t(){var e=this,n=e._self._c;return n("div",[n("div",{staticClass:"flex flex-wrap"},e._l(e.items,function(r,s){return n("div",{key:r.id,staticClass:"relationship-index-field-item h-5",class:{"mb-1.5":s<e.items.length-1}},[n("div",{staticClass:"flex items-center shrink"},[r.hasOwnProperty("published")&&r.published!==null?n("div",{staticClass:"little-dot h-1 w-1 mr-1",class:[r.published?"bg-green-600":"bg-gray-400"]}):e._e(),n("a",{attrs:{href:r.edit_url,title:r.title},domProps:{textContent:e._s(r.title)}})])])}),0),e.hasMore&&!e.showingAll?n("button",{staticClass:"mt-1 text-blue text-2xs",domProps:{textContent:e._s(e.__("messages.view_more_count",{count:e.value.length-2}))},on:{click:function(r){return r.stopPropagation(),e.showAll.apply(null,arguments)}}}):e._e(),e.showingAll?n("button",{staticClass:"mt-1 text-blue text-2xs",domProps:{textContent:e._s(e.__("Hide"))},on:{click:function(r){return r.stopPropagation(),e.hideExtra.apply(null,arguments)}}}):e._e()])},_sfc_staticRenderFns=[],__component__=normalizeComponent(_sfc_main,_sfc_render,_sfc_staticRenderFns,!1,null,null,null,null);const HasManyFieldtypeIndex=__component__.exports;Statamic.$components.register("runway-relationship-fieldtype",RelationshipFieldtype);Statamic.$components.register("relationship-table-mode",RelationshipTableMode);Statamic.$components.register("hasmany-related-item",HasManyRelatedItem);Statamic.$components.register("runway-publish-form",PublishForm);Statamic.$components.register("runway-listing",RunwayListing);Statamic.$components.register("has_many-fieldtype-index",HasManyFieldtypeIndex);
